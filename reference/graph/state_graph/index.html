
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A lightweight Python framework for building intelligent agents and multi-agent workflows.">
      
      
      
        <link rel="canonical" href="https://iamsdt.github.io/pyagenity/reference/graph/state_graph/">
      
      
        <link rel="prev" href="../node/">
      
      
        <link rel="next" href="../tool_node/">
      
      
      <link rel="icon" href="../../../None">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>State graph - PyAgenity</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e53b48f4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pyagenity.graph.state_graph" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="PyAgenity" class="md-header__button md-logo" aria-label="PyAgenity" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PyAgenity
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              State graph
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Iamsdt/PyAgenity" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Iamsdt/PyAgenity
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  PyAgenity

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../Concept/" class="md-tabs__link">
        
  
  
    
  
  Concept

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../Tutorial/" class="md-tabs__link">
        
  
  
    
  
  Tutorial

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="../../" class="md-tabs__link">
        
  
  
    
  
  Reference

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="PyAgenity" class="md-nav__button md-logo" aria-label="PyAgenity" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    PyAgenity
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Iamsdt/PyAgenity" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Iamsdt/PyAgenity
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PyAgenity
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Concept/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Concept
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Concept
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/Callbacks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Callbacks: Interception and Flow Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/Command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands: Combining State Updates with Control Flow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/Threadname/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Threadname
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/dependency-injection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dependency Injection in PyAgenity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/id_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Id generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publisher: Real-time Agent Observability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/response_converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Response converter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Concept/context/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Context
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Context
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/context/checkpointer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Checkpointer: The Agent's Session Memory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/context/message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Messages: The Lifeblood of Agent Communication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/context/state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent State: The Mind of Your Agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/context/store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Store: The Agent's Knowledge Memory
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Concept/graph/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Graph
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            Graph
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/graph/Config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Graph Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/graph/advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Patterns &amp; Performance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/graph/control_flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Flow &amp; Edges
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/graph/execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execution &amp; Streaming Runtime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/graph/human-in-the-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Human-in-the-Loop (HITL) &amp; Interrupts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/graph/nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nodes &amp; Return Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Concept/graph/tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools &amp; Integrations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Tutorial/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tutorial
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tutorial/long_term_memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Long-Term Memory with Mem0
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tutorial/plan_act_reflect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plan-Act-Reflect Pattern
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tutorial/qdrant_store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QdrantStore Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tutorial/rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RAG (Retrieval-Augmented Generation) with PyAgenity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Tutorial/react/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    React
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            React
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tutorial/react/01-basic-react/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic React Patterns
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tutorial/react/02-dependency-injection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    React Agents with Dependency Injection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tutorial/react/03-mcp-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    React Agents with Model Context Protocol (MCP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tutorial/react/04-streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    React Agents with Streaming Responses
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../adapters/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Adapters
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Adapters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../adapters/llm/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Llm
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_1">
            <span class="md-nav__icon md-icon"></span>
            Llm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/llm/base_converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base converter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/llm/litellm_converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Litellm converter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/llm/model_response_converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model response converter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../adapters/tools/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1_2" id="__nav_4_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_2">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/tools/composio_adapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Composio adapter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/tools/langchain_adapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Langchain adapter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../checkpointer/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Checkpointer
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Checkpointer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../checkpointer/base_checkpointer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base checkpointer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../checkpointer/in_memory_checkpointer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    In memory checkpointer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../checkpointer/pg_checkpointer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pg checkpointer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../exceptions/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Exceptions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exceptions/graph_error/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Graph error
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exceptions/node_error/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node error
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exceptions/recursion_error/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recursion error
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exceptions/storage_exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Graph
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Graph
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compiled_graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compiled graph
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../edge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Edge
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    State graph
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    State graph
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph" class="md-nav__link">
    <span class="md-ellipsis">
      state_graph
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateT" class="md-nav__link">
    <span class="md-ellipsis">
      StateT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph" class="md-nav__link">
    <span class="md-ellipsis">
      StateGraph
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StateGraph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.edges" class="md-nav__link">
    <span class="md-ellipsis">
      edges
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.entry_point" class="md-nav__link">
    <span class="md-ellipsis">
      entry_point
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.nodes" class="md-nav__link">
    <span class="md-ellipsis">
      nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.thread_name_generator" class="md-nav__link">
    <span class="md-ellipsis">
      thread_name_generator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__init__">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__(state)" class="md-nav__link">
    <span class="md-ellipsis">
      state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__(context_manager)" class="md-nav__link">
    <span class="md-ellipsis">
      context_manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__(dependency_container)" class="md-nav__link">
    <span class="md-ellipsis">
      dependency_container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__(publisher)" class="md-nav__link">
    <span class="md-ellipsis">
      publisher
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__--basic-usage-with-default-agentstate" class="md-nav__link">
    <span class="md-ellipsis">
      Basic usage with default AgentState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__--with-custom-state" class="md-nav__link">
    <span class="md-ellipsis">
      With custom state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__--or-using-type-hints-for-clarity" class="md-nav__link">
    <span class="md-ellipsis">
      Or using type hints for clarity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges" class="md-nav__link">
    <span class="md-ellipsis">
      add_conditional_edges
    </span>
  </a>
  
    <nav class="md-nav" aria-label="add_conditional_edges">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges(from_node)" class="md-nav__link">
    <span class="md-ellipsis">
      from_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges(condition)" class="md-nav__link">
    <span class="md-ellipsis">
      condition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges(path_map)" class="md-nav__link">
    <span class="md-ellipsis">
      path_map
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_edge" class="md-nav__link">
    <span class="md-ellipsis">
      add_edge
    </span>
  </a>
  
    <nav class="md-nav" aria-label="add_edge">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_edge(from_node)" class="md-nav__link">
    <span class="md-ellipsis">
      from_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_edge(to_node)" class="md-nav__link">
    <span class="md-ellipsis">
      to_node
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_node" class="md-nav__link">
    <span class="md-ellipsis">
      add_node
    </span>
  </a>
  
    <nav class="md-nav" aria-label="add_node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_node(name_or_func)" class="md-nav__link">
    <span class="md-ellipsis">
      name_or_func
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_node(func)" class="md-nav__link">
    <span class="md-ellipsis">
      func
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_node--method-1-function-name-inferred" class="md-nav__link">
    <span class="md-ellipsis">
      Method 1: Function name inferred
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_node--method-2-explicit-name-and-function" class="md-nav__link">
    <span class="md-ellipsis">
      Method 2: Explicit name and function
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile" class="md-nav__link">
    <span class="md-ellipsis">
      compile
    </span>
  </a>
  
    <nav class="md-nav" aria-label="compile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(checkpointer)" class="md-nav__link">
    <span class="md-ellipsis">
      checkpointer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(store)" class="md-nav__link">
    <span class="md-ellipsis">
      store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(debug)" class="md-nav__link">
    <span class="md-ellipsis">
      debug
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(interrupt_before)" class="md-nav__link">
    <span class="md-ellipsis">
      interrupt_before
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(interrupt_after)" class="md-nav__link">
    <span class="md-ellipsis">
      interrupt_after
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(callback_manager)" class="md-nav__link">
    <span class="md-ellipsis">
      callback_manager
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.set_entry_point" class="md-nav__link">
    <span class="md-ellipsis">
      set_entry_point
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../tool_node/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tool node
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_5" id="__nav_4_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_5">
            <span class="md-nav__icon md-icon"></span>
            Tool node
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tool_node/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tool_node/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tool_node/deps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tool_node/executors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Executors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tool_node/schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schema
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_6" id="__nav_4_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_6">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/handler_mixins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Handler mixins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/invoke_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Invoke handler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/invoke_node_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Invoke node handler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/stream_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stream handler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/stream_node_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stream node handler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/stream_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stream utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../prebuilt/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Prebuilt
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Prebuilt
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../prebuilt/agent/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Agent
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5_1" id="__nav_4_5_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_1">
            <span class="md-nav__icon md-icon"></span>
            Agent
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/branch_join/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Branch join
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/deep_research/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deep research
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/guarded/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guarded
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/map_reduce/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Map reduce
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/plan_act_reflect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plan act reflect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rag
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/react/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    React
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/router/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Router
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/sequential/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sequential
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/supervisor_team/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supervisor team
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prebuilt/agent/swarm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Swarm
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../publisher/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Publisher
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Publisher
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../publisher/base_publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base publisher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../publisher/console_publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Console publisher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../publisher/events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../publisher/kafka_publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka publisher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../publisher/publish/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publish
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../publisher/rabbitmq_publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rabbitmq publisher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../publisher/redis_publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Redis publisher
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../state/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    State
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            State
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../state/agent_state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent state
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../state/base_context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base context
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../state/execution_state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execution state
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../state/message_context_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message context manager
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../store/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Store
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Store
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../store/base_store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../store/mem0_store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mem0 store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../store/qdrant_store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qdrant store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../store/store_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Store schema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../store/embedding/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Embedding
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8_5" id="__nav_4_8_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_5">
            <span class="md-nav__icon md-icon"></span>
            Embedding
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../store/embedding/base_embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base embedding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../store/embedding/openai_embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openai embedding
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/background_task_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Background task manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/callable_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Callable utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/callbacks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Callbacks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Converter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/id_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Id generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/reducers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reducers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/thread_info/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Thread info
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/thread_name_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Thread name generator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph" class="md-nav__link">
    <span class="md-ellipsis">
      state_graph
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateT" class="md-nav__link">
    <span class="md-ellipsis">
      StateT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph" class="md-nav__link">
    <span class="md-ellipsis">
      StateGraph
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StateGraph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.edges" class="md-nav__link">
    <span class="md-ellipsis">
      edges
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.entry_point" class="md-nav__link">
    <span class="md-ellipsis">
      entry_point
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.nodes" class="md-nav__link">
    <span class="md-ellipsis">
      nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.thread_name_generator" class="md-nav__link">
    <span class="md-ellipsis">
      thread_name_generator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__init__">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__(state)" class="md-nav__link">
    <span class="md-ellipsis">
      state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__(context_manager)" class="md-nav__link">
    <span class="md-ellipsis">
      context_manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__(dependency_container)" class="md-nav__link">
    <span class="md-ellipsis">
      dependency_container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__(publisher)" class="md-nav__link">
    <span class="md-ellipsis">
      publisher
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__--basic-usage-with-default-agentstate" class="md-nav__link">
    <span class="md-ellipsis">
      Basic usage with default AgentState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__--with-custom-state" class="md-nav__link">
    <span class="md-ellipsis">
      With custom state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.__init__--or-using-type-hints-for-clarity" class="md-nav__link">
    <span class="md-ellipsis">
      Or using type hints for clarity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges" class="md-nav__link">
    <span class="md-ellipsis">
      add_conditional_edges
    </span>
  </a>
  
    <nav class="md-nav" aria-label="add_conditional_edges">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges(from_node)" class="md-nav__link">
    <span class="md-ellipsis">
      from_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges(condition)" class="md-nav__link">
    <span class="md-ellipsis">
      condition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges(path_map)" class="md-nav__link">
    <span class="md-ellipsis">
      path_map
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_edge" class="md-nav__link">
    <span class="md-ellipsis">
      add_edge
    </span>
  </a>
  
    <nav class="md-nav" aria-label="add_edge">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_edge(from_node)" class="md-nav__link">
    <span class="md-ellipsis">
      from_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_edge(to_node)" class="md-nav__link">
    <span class="md-ellipsis">
      to_node
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_node" class="md-nav__link">
    <span class="md-ellipsis">
      add_node
    </span>
  </a>
  
    <nav class="md-nav" aria-label="add_node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_node(name_or_func)" class="md-nav__link">
    <span class="md-ellipsis">
      name_or_func
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_node(func)" class="md-nav__link">
    <span class="md-ellipsis">
      func
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_node--method-1-function-name-inferred" class="md-nav__link">
    <span class="md-ellipsis">
      Method 1: Function name inferred
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.add_node--method-2-explicit-name-and-function" class="md-nav__link">
    <span class="md-ellipsis">
      Method 2: Explicit name and function
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile" class="md-nav__link">
    <span class="md-ellipsis">
      compile
    </span>
  </a>
  
    <nav class="md-nav" aria-label="compile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(checkpointer)" class="md-nav__link">
    <span class="md-ellipsis">
      checkpointer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(store)" class="md-nav__link">
    <span class="md-ellipsis">
      store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(debug)" class="md-nav__link">
    <span class="md-ellipsis">
      debug
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(interrupt_before)" class="md-nav__link">
    <span class="md-ellipsis">
      interrupt_before
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(interrupt_after)" class="md-nav__link">
    <span class="md-ellipsis">
      interrupt_after
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.compile(callback_manager)" class="md-nav__link">
    <span class="md-ellipsis">
      callback_manager
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph.StateGraph.set_entry_point" class="md-nav__link">
    <span class="md-ellipsis">
      set_entry_point
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyagenity.graph.state_graph-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>State graph</h1>

<div class="doc doc-object doc-module">



<a id="pyagenity.graph.state_graph"></a>
    <div class="doc doc-contents first">










<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            StateGraph (pyagenity.graph.state_graph.StateGraph)" href="../../#pyagenity.graph.state_graph.StateGraph">StateGraph</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Main graph class for orchestrating multi-agent workflows.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>






<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            StateT


  
      module-attribute
   (pyagenity.graph.state_graph.StateT)" href="../../#pyagenity.graph.state_graph.StateT">StateT</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            logger


  
      module-attribute
   (pyagenity.graph.state_graph.logger)" href="../../#pyagenity.graph.state_graph.logger">logger</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>



  <div class="doc doc-children">





<h2 id="pyagenity.graph.state_graph-attributes">Attributes<a href="#pyagenity.graph.state_graph-attributes" class="headerlink" title="Permanent link">&para;</a></h2>

<div class="doc doc-object doc-attribute">



<h3 id="pyagenity.graph.state_graph.StateT" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">StateT</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#pyagenity.graph.state_graph.StateT" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">StateT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;StateT&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">AgentState</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pyagenity.graph.state_graph.logger" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#pyagenity.graph.state_graph.logger" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<h2 id="pyagenity.graph.state_graph-classes">Classes<a href="#pyagenity.graph.state_graph-classes" class="headerlink" title="Permanent link">&para;</a></h2>

<div class="doc doc-object doc-class">



<h3 id="pyagenity.graph.state_graph.StateGraph" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">StateGraph</span>


<a href="#pyagenity.graph.state_graph.StateGraph" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Main graph class for orchestrating multi-agent workflows.</p>
<p>This class provides the core functionality for building and managing stateful
agent workflows. It is similar to LangGraph's StateGraph
integration with support for dependency injection.</p>
<p>The graph is generic over state types to support custom AgentState subclasses,
allowing for type-safe state management throughout the workflow execution.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="pyagenity.graph.state_graph.StateGraph.state">state</span></code></td>
            <td>
                  <code><span title="pyagenity.graph.state_graph.StateGraph[StateT]">StateT</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current state of the graph workflow.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            nodes


  
      instance-attribute
   (pyagenity.graph.state_graph.StateGraph.nodes)" href="../../#pyagenity.graph.state_graph.StateGraph.nodes">nodes</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="            Node (pyagenity.graph.node.Node)" href="../../#pyagenity.graph.node.Node">Node</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Collection of nodes in the graph.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            edges


  
      instance-attribute
   (pyagenity.graph.state_graph.StateGraph.edges)" href="../../#pyagenity.graph.state_graph.StateGraph.edges">edges</a></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Edge (pyagenity.graph.edge.Edge)" href="../../#pyagenity.graph.edge.Edge">Edge</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Collection of edges connecting nodes.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            entry_point


  
      instance-attribute
   (pyagenity.graph.state_graph.StateGraph.entry_point)" href="../../#pyagenity.graph.state_graph.StateGraph.entry_point">entry_point</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the starting node for execution.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pyagenity.graph.state_graph.StateGraph.context_manager">context_manager</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            BaseContextManager (pyagenity.state.BaseContextManager)" href="../../#pyagenity.state.BaseContextManager">BaseContextManager</a>[<span title="pyagenity.graph.state_graph.StateGraph[StateT]">StateT</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional context manager
for handling cross-node state operations.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pyagenity.graph.state_graph.StateGraph.dependency_container">dependency_container</span></code></td>
            <td>
                  <code><span title="DependencyContainer">DependencyContainer</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Container for managing
dependencies that can be injected into node functions.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pyagenity.graph.state_graph.StateGraph.compiled">compiled</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the graph has been compiled for execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>graph = StateGraph()
graph.add_node("process", process_function)
graph.add_edge(START, "process")
graph.add_edge("process", END)
compiled = graph.compile()
result = compiled.invoke({"input": "data"})</p>
</blockquote>
</blockquote>
</blockquote>
</details>











<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            __init__ (pyagenity.graph.state_graph.StateGraph.__init__)" href="../../#pyagenity.graph.state_graph.StateGraph.__init__">__init__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Initialize a new StateGraph instance.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            add_conditional_edges (pyagenity.graph.state_graph.StateGraph.add_conditional_edges)" href="../../#pyagenity.graph.state_graph.StateGraph.add_conditional_edges">add_conditional_edges</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Add conditional routing between nodes based on runtime evaluation.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            add_edge (pyagenity.graph.state_graph.StateGraph.add_edge)" href="../../#pyagenity.graph.state_graph.StateGraph.add_edge">add_edge</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Add a static edge between two nodes.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            add_node (pyagenity.graph.state_graph.StateGraph.add_node)" href="../../#pyagenity.graph.state_graph.StateGraph.add_node">add_node</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Add a node to the graph.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            compile (pyagenity.graph.state_graph.StateGraph.compile)" href="../../#pyagenity.graph.state_graph.StateGraph.compile">compile</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Compile the graph for execution.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            set_entry_point (pyagenity.graph.state_graph.StateGraph.set_entry_point)" href="../../#pyagenity.graph.state_graph.StateGraph.set_entry_point">set_entry_point</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Set the entry point for the graph.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>pyagenity/graph/state_graph.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StateGraph</span><span class="p">[</span><span class="n">StateT</span><span class="p">:</span> <span class="n">AgentState</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main graph class for orchestrating multi-agent workflows.</span>

<span class="sd">    This class provides the core functionality for building and managing stateful</span>
<span class="sd">    agent workflows. It is similar to LangGraph&#39;s StateGraph</span>
<span class="sd">    integration with support for dependency injection.</span>

<span class="sd">    The graph is generic over state types to support custom AgentState subclasses,</span>
<span class="sd">    allowing for type-safe state management throughout the workflow execution.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        state (StateT): The current state of the graph workflow.</span>
<span class="sd">        nodes (dict[str, Node]): Collection of nodes in the graph.</span>
<span class="sd">        edges (list[Edge]): Collection of edges connecting nodes.</span>
<span class="sd">        entry_point (str | None): Name of the starting node for execution.</span>
<span class="sd">        context_manager (BaseContextManager[StateT] | None): Optional context manager</span>
<span class="sd">            for handling cross-node state operations.</span>
<span class="sd">        dependency_container (DependencyContainer): Container for managing</span>
<span class="sd">            dependencies that can be injected into node functions.</span>
<span class="sd">        compiled (bool): Whether the graph has been compiled for execution.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; graph = StateGraph()</span>
<span class="sd">        &gt;&gt;&gt; graph.add_node(&quot;process&quot;, process_function)</span>
<span class="sd">        &gt;&gt;&gt; graph.add_edge(START, &quot;process&quot;)</span>
<span class="sd">        &gt;&gt;&gt; graph.add_edge(&quot;process&quot;, END)</span>
<span class="sd">        &gt;&gt;&gt; compiled = graph.compile()</span>
<span class="sd">        &gt;&gt;&gt; result = compiled.invoke({&quot;input&quot;: &quot;data&quot;})</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">state</span><span class="p">:</span> <span class="n">StateT</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">context_manager</span><span class="p">:</span> <span class="n">BaseContextManager</span><span class="p">[</span><span class="n">StateT</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">publisher</span><span class="p">:</span> <span class="n">BasePublisher</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">id_generator</span><span class="p">:</span> <span class="n">BaseIDGenerator</span> <span class="o">=</span> <span class="n">DefaultIDGenerator</span><span class="p">(),</span>
        <span class="n">container</span><span class="p">:</span> <span class="n">InjectQ</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">thread_name_generator</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a new StateGraph instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            state: Initial state for the graph. If None, a default AgentState</span>
<span class="sd">                will be created.</span>
<span class="sd">            context_manager: Optional context manager for handling cross-node</span>
<span class="sd">                state operations and advanced state management patterns.</span>
<span class="sd">            dependency_container: Container for managing dependencies that can</span>
<span class="sd">                be injected into node functions. If None, a new empty container</span>
<span class="sd">                will be created.</span>
<span class="sd">            publisher: Publisher for emitting events during execution</span>

<span class="sd">        Note:</span>
<span class="sd">            START and END nodes are automatically added to the graph upon</span>
<span class="sd">            initialization and accept the full node signature including</span>
<span class="sd">            dependencies.</span>

<span class="sd">        Example:</span>
<span class="sd">            # Basic usage with default AgentState</span>
<span class="sd">            &gt;&gt;&gt; graph = StateGraph()</span>

<span class="sd">            # With custom state</span>
<span class="sd">            &gt;&gt;&gt; custom_state = MyCustomState()</span>
<span class="sd">            &gt;&gt;&gt; graph = StateGraph(custom_state)</span>

<span class="sd">            # Or using type hints for clarity</span>
<span class="sd">            &gt;&gt;&gt; graph = StateGraph[MyCustomState](MyCustomState())</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initializing StateGraph&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;StateGraph init with state=</span><span class="si">%s</span><span class="s2">, context_manager=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">if</span> <span class="n">state</span> <span class="k">else</span> <span class="s2">&quot;default AgentState&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="p">(</span><span class="n">context_manager</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">if</span> <span class="n">context_manager</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># State handling</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="p">:</span> <span class="n">StateT</span> <span class="o">=</span> <span class="n">state</span> <span class="k">if</span> <span class="n">state</span> <span class="k">else</span> <span class="n">AgentState</span><span class="p">()</span>  <span class="c1"># type: ignore[assignment]</span>

        <span class="c1"># Graph structure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Edge</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_point</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Services</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_publisher</span><span class="p">:</span> <span class="n">BasePublisher</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">publisher</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id_generator</span><span class="p">:</span> <span class="n">BaseIDGenerator</span> <span class="o">=</span> <span class="n">id_generator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_context_manager</span><span class="p">:</span> <span class="n">BaseContextManager</span><span class="p">[</span><span class="n">StateT</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">context_manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread_name_generator</span> <span class="o">=</span> <span class="n">thread_name_generator</span>
        <span class="c1"># save container for dependency injection</span>
        <span class="c1"># if any container is passed then we will activate that</span>
        <span class="c1"># otherwise we can skip it and use the default one</span>
        <span class="k">if</span> <span class="n">container</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_container</span> <span class="o">=</span> <span class="n">InjectQ</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;No container provided, using global singleton instance&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using provided dependency container instance&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_container</span> <span class="o">=</span> <span class="n">container</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

        <span class="c1"># Register task_manager, for async tasks</span>
        <span class="c1"># This will be used to run background tasks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_task_manager</span> <span class="o">=</span> <span class="n">BackgroundTaskManager</span><span class="p">()</span>

        <span class="c1"># now setup the graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setup</span><span class="p">()</span>

        <span class="c1"># Add START and END nodes (accept full node signature including dependencies)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding default START and END nodes&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">START</span><span class="p">]</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">START</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">state</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="o">**</span><span class="n">deps</span><span class="p">:</span> <span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publisher</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">END</span><span class="p">]</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">END</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">state</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="o">**</span><span class="n">deps</span><span class="p">:</span> <span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publisher</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;StateGraph initialized with </span><span class="si">%d</span><span class="s2"> nodes&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Setup the graph before compilation.</span>

<span class="sd">        This method can be used to perform any necessary setup or validation</span>
<span class="sd">        before compiling the graph for execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting up StateGraph before compilation&quot;</span><span class="p">)</span>
        <span class="c1"># Placeholder for any setup logic needed before compilation</span>
        <span class="c1"># register dependencies</span>

        <span class="c1"># register state and context manager as singletons (these are nullable)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span>
            <span class="n">BaseContextManager</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_context_manager</span><span class="p">,</span>
            <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">allow_concrete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span>
            <span class="n">BasePublisher</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_publisher</span><span class="p">,</span>
            <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">allow_concrete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># register id generator as factory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span>
            <span class="n">BaseIDGenerator</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_id_generator</span><span class="p">,</span>
            <span class="n">allow_concrete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;generated_id_type&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_generator</span><span class="o">.</span><span class="n">id_type</span><span class="p">)</span>
        <span class="c1"># Allow async method also</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_factory</span><span class="p">(</span>
            <span class="s2">&quot;generated_id&quot;</span><span class="p">,</span>
            <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(),</span>
        <span class="p">)</span>

        <span class="c1"># Attach Thread name generator if provided</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thread_name_generator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">thread_name_generator</span> <span class="o">=</span> <span class="n">generate_dummy_thread_name</span>

        <span class="n">generator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">thread_name_generator</span> <span class="ow">or</span> <span class="n">generate_dummy_thread_name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_factory</span><span class="p">(</span>
            <span class="s2">&quot;generated_thread_name&quot;</span><span class="p">,</span>
            <span class="k">lambda</span><span class="p">:</span> <span class="n">generator</span><span class="p">(),</span>
        <span class="p">)</span>

        <span class="c1"># Save BackgroundTaskManager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span>
            <span class="n">BackgroundTaskManager</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_task_manager</span><span class="p">,</span>
            <span class="n">allow_concrete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_node</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name_or_func</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">,</span>
        <span class="n">func</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Callable</span><span class="p">,</span> <span class="s2">&quot;ToolNode&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StateGraph&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a node to the graph.</span>

<span class="sd">        This method supports two calling patterns:</span>
<span class="sd">        1. Pass a callable as the first argument (name inferred from function name)</span>
<span class="sd">        2. Pass a name string and callable/ToolNode as separate arguments</span>

<span class="sd">        Args:</span>
<span class="sd">            name_or_func: Either the node name (str) or a callable function.</span>
<span class="sd">                If callable, the function name will be used as the node name.</span>
<span class="sd">            func: The function or ToolNode to execute. Required if name_or_func</span>
<span class="sd">                is a string, ignored if name_or_func is callable.</span>

<span class="sd">        Returns:</span>
<span class="sd">            StateGraph: The graph instance for method chaining.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If invalid arguments are provided.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; # Method 1: Function name inferred</span>
<span class="sd">            &gt;&gt;&gt; graph.add_node(my_function)</span>
<span class="sd">            &gt;&gt;&gt; # Method 2: Explicit name and function</span>
<span class="sd">            &gt;&gt;&gt; graph.add_node(&quot;process&quot;, my_function)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">name_or_func</span><span class="p">)</span> <span class="ow">and</span> <span class="n">func</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Function passed as first argument</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name_or_func</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">func</span> <span class="o">=</span> <span class="n">name_or_func</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding node &#39;</span><span class="si">%s</span><span class="s2">&#39; with inferred name from function&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name_or_func</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ToolNode</span><span class="p">)):</span>
            <span class="c1"># Name and function passed separately</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name_or_func</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Adding node &#39;</span><span class="si">%s</span><span class="s2">&#39; with explicit name and </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;ToolNode&quot;</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ToolNode</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;callable&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error_msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid arguments for add_node&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Added node &#39;</span><span class="si">%s</span><span class="s2">&#39; to graph (total nodes: </span><span class="si">%d</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_edge</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">from_node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">to_node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StateGraph&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a static edge between two nodes.</span>

<span class="sd">        Creates a direct connection from one node to another. If the source</span>
<span class="sd">        node is START, the target node becomes the entry point for the graph.</span>

<span class="sd">        Args:</span>
<span class="sd">            from_node: Name of the source node.</span>
<span class="sd">            to_node: Name of the target node.</span>

<span class="sd">        Returns:</span>
<span class="sd">            StateGraph: The graph instance for method chaining.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; graph.add_edge(&quot;node1&quot;, &quot;node2&quot;)</span>
<span class="sd">            &gt;&gt;&gt; graph.add_edge(START, &quot;entry_node&quot;)  # Sets entry point</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding edge from &#39;</span><span class="si">%s</span><span class="s2">&#39; to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="p">,</span> <span class="n">to_node</span><span class="p">)</span>
        <span class="c1"># Set entry point if edge is from START</span>
        <span class="k">if</span> <span class="n">from_node</span> <span class="o">==</span> <span class="n">START</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entry_point</span> <span class="o">=</span> <span class="n">to_node</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Set entry point to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">to_node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="n">to_node</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Added edge (total edges: </span><span class="si">%d</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_conditional_edges</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">from_node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">condition</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
        <span class="n">path_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StateGraph&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add conditional routing between nodes based on runtime evaluation.</span>

<span class="sd">        Creates dynamic routing logic where the next node is determined by evaluating</span>
<span class="sd">        a condition function against the current state. This enables complex branching</span>
<span class="sd">        logic, decision trees, and adaptive workflow routing.</span>

<span class="sd">        Args:</span>
<span class="sd">            from_node: Name of the source node where the condition is evaluated.</span>
<span class="sd">            condition: Callable function that takes the current AgentState and returns</span>
<span class="sd">                a value used for routing decisions. Should be deterministic and</span>
<span class="sd">                side-effect free.</span>
<span class="sd">            path_map: Optional dictionary mapping condition results to destination nodes.</span>
<span class="sd">                If provided, the condition&#39;s return value is looked up in this mapping.</span>
<span class="sd">                If None, the condition should return the destination node name directly.</span>

<span class="sd">        Returns:</span>
<span class="sd">            StateGraph: The graph instance for method chaining.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the condition function or path_map configuration is invalid.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            # Direct routing - condition returns node name</span>
<span class="sd">            def route_by_priority(state):</span>
<span class="sd">                priority = state.data.get(&quot;priority&quot;, &quot;normal&quot;)</span>
<span class="sd">                return &quot;urgent_handler&quot; if priority == &quot;high&quot; else &quot;normal_handler&quot;</span>


<span class="sd">            graph.add_conditional_edges(&quot;classifier&quot;, route_by_priority)</span>


<span class="sd">            # Mapped routing - condition result mapped to nodes</span>
<span class="sd">            def get_category(state):</span>
<span class="sd">                return state.data.get(&quot;category&quot;, &quot;default&quot;)</span>


<span class="sd">            category_map = {</span>
<span class="sd">                &quot;finance&quot;: &quot;finance_processor&quot;,</span>
<span class="sd">                &quot;legal&quot;: &quot;legal_processor&quot;,</span>
<span class="sd">                &quot;default&quot;: &quot;general_processor&quot;,</span>
<span class="sd">            }</span>
<span class="sd">            graph.add_conditional_edges(&quot;categorizer&quot;, get_category, category_map)</span>
<span class="sd">            ```</span>

<span class="sd">        Note:</span>
<span class="sd">            The condition function receives the current AgentState and should return</span>
<span class="sd">            consistent results for the same state. If using path_map, ensure the</span>
<span class="sd">            condition&#39;s return values match the map keys exactly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add conditional edges from a node based on a condition function.</span>

<span class="sd">        Creates edges that are traversed based on the result of a condition</span>
<span class="sd">        function. The condition function receives the current state and should</span>
<span class="sd">        return a value that determines which edge to follow.</span>

<span class="sd">        Args:</span>
<span class="sd">            from_node: Name of the source node.</span>
<span class="sd">            condition: Function that evaluates the current state and returns</span>
<span class="sd">                a value to determine the next node.</span>
<span class="sd">            path_map: Optional mapping from condition results to target nodes.</span>
<span class="sd">                If provided, creates multiple conditional edges. If None,</span>
<span class="sd">                creates a single conditional edge.</span>

<span class="sd">        Returns:</span>
<span class="sd">            StateGraph: The graph instance for method chaining.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; def route_condition(state):</span>
<span class="sd">            ...     return &quot;success&quot; if state.success else &quot;failure&quot;</span>
<span class="sd">            &gt;&gt;&gt; graph.add_conditional_edges(</span>
<span class="sd">            ...     &quot;processor&quot;,</span>
<span class="sd">            ...     route_condition,</span>
<span class="sd">            ...     {&quot;success&quot;: &quot;next_step&quot;, &quot;failure&quot;: &quot;error_handler&quot;},</span>
<span class="sd">            ... )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create edges based on possible returns from condition function</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Node &#39;</span><span class="si">%s</span><span class="s2">&#39; adding conditional edges with path_map: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">from_node</span><span class="p">,</span>
            <span class="n">path_map</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">path_map</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Node &#39;</span><span class="si">%s</span><span class="s2">&#39; adding conditional edges with path_map: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="p">,</span> <span class="n">path_map</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">condition_result</span><span class="p">,</span> <span class="n">target_node</span> <span class="ow">in</span> <span class="n">path_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">edge</span> <span class="o">=</span> <span class="n">Edge</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="n">target_node</span><span class="p">,</span> <span class="n">condition</span><span class="p">)</span>
                <span class="n">edge</span><span class="o">.</span><span class="n">condition_result</span> <span class="o">=</span> <span class="n">condition_result</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Single conditional edge</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Node &#39;</span><span class="si">%s</span><span class="s2">&#39; adding single conditional edge&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">condition</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StateGraph&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the entry point for the graph.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_point</span> <span class="o">=</span> <span class="n">node_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">START</span><span class="p">,</span> <span class="n">node_name</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Set entry point to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">node_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">checkpointer</span><span class="p">:</span> <span class="n">BaseCheckpointer</span><span class="p">[</span><span class="n">StateT</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">store</span><span class="p">:</span> <span class="n">BaseStore</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">interrupt_before</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">interrupt_after</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">callback_manager</span><span class="p">:</span> <span class="n">CallbackManager</span> <span class="o">=</span> <span class="n">CallbackManager</span><span class="p">(),</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CompiledGraph[StateT]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compile the graph for execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            checkpointer: Checkpointer for state persistence</span>
<span class="sd">            store: Store for additional data</span>
<span class="sd">            debug: Enable debug mode</span>
<span class="sd">            interrupt_before: List of node names to interrupt before execution</span>
<span class="sd">            interrupt_after: List of node names to interrupt after execution</span>
<span class="sd">            callback_manager: Callback manager for executing hooks</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Compiling graph with </span><span class="si">%d</span><span class="s2"> nodes, </span><span class="si">%d</span><span class="s2"> edges, entry_point=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">),</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entry_point</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Compile options: interrupt_before=</span><span class="si">%s</span><span class="s2">, interrupt_after=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">interrupt_before</span><span class="p">,</span>
            <span class="n">interrupt_after</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_point</span><span class="p">:</span>
            <span class="n">error_msg</span> <span class="o">=</span> <span class="s2">&quot;No entry point set. Use set_entry_point() or add an edge from START.&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>

        <span class="c1"># Validate graph structure</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Validating graph structure&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_graph</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Graph structure validated successfully&quot;</span><span class="p">)</span>

        <span class="c1"># Validate interrupt node names</span>
        <span class="n">interrupt_before</span> <span class="o">=</span> <span class="n">interrupt_before</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">interrupt_after</span> <span class="o">=</span> <span class="n">interrupt_after</span> <span class="ow">or</span> <span class="p">[]</span>

        <span class="n">all_interrupt_nodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">interrupt_before</span> <span class="o">+</span> <span class="n">interrupt_after</span><span class="p">)</span>
        <span class="n">invalid_nodes</span> <span class="o">=</span> <span class="n">all_interrupt_nodes</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">invalid_nodes</span><span class="p">:</span>
            <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Invalid interrupt nodes: </span><span class="si">{</span><span class="n">invalid_nodes</span><span class="si">}</span><span class="s2">. Must be existing node names.&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">compiled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Graph compilation completed successfully&quot;</span><span class="p">)</span>
        <span class="c1"># Import here to avoid circular import at module import time</span>
        <span class="c1"># Now update Checkpointer</span>
        <span class="k">if</span> <span class="n">checkpointer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">pyagenity.checkpointer</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemoryCheckpointer</span>

            <span class="n">checkpointer</span> <span class="o">=</span> <span class="n">InMemoryCheckpointer</span><span class="p">[</span><span class="n">StateT</span><span class="p">]()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;No checkpointer provided, using InMemoryCheckpointer&quot;</span><span class="p">)</span>

        <span class="c1"># Import the CompiledGraph class</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">.compiled_graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">CompiledGraph</span>

        <span class="c1"># Setup dependencies</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span>
            <span class="n">BaseCheckpointer</span><span class="p">,</span>
            <span class="n">checkpointer</span><span class="p">,</span>
            <span class="n">allow_concrete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>  <span class="c1"># not null as we set default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span>
            <span class="n">BaseStore</span><span class="p">,</span>
            <span class="n">store</span><span class="p">,</span>
            <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">allow_concrete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span>
            <span class="n">CallbackManager</span><span class="p">,</span>
            <span class="n">callback_manager</span><span class="p">,</span>
            <span class="n">allow_concrete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>  <span class="c1"># not null as we set default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;interrupt_before&quot;</span><span class="p">,</span> <span class="n">interrupt_before</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;interrupt_after&quot;</span><span class="p">,</span> <span class="n">interrupt_after</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span><span class="n">StateGraph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="n">app</span> <span class="o">=</span> <span class="n">CompiledGraph</span><span class="p">(</span>
            <span class="n">state</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="p">,</span>
            <span class="n">interrupt_after</span><span class="o">=</span><span class="n">interrupt_after</span><span class="p">,</span>
            <span class="n">interrupt_before</span><span class="o">=</span><span class="n">interrupt_before</span><span class="p">,</span>
            <span class="n">state_graph</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">,</span>
            <span class="n">publisher</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_publisher</span><span class="p">,</span>
            <span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">,</span>
            <span class="n">task_manager</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_task_manager</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">CompiledGraph</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>
        <span class="c1"># Compile the Graph, so it will optimize the dependency graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">app</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the graph structure.&quot;&quot;&quot;</span>
        <span class="c1"># Check for orphaned nodes</span>
        <span class="n">connected_nodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
            <span class="n">connected_nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">edge</span><span class="o">.</span><span class="n">from_node</span><span class="p">)</span>
            <span class="n">connected_nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">edge</span><span class="o">.</span><span class="n">to_node</span><span class="p">)</span>

        <span class="n">all_nodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">orphaned</span> <span class="o">=</span> <span class="n">all_nodes</span> <span class="o">-</span> <span class="n">connected_nodes</span>
        <span class="k">if</span> <span class="n">orphaned</span> <span class="o">-</span> <span class="p">{</span><span class="n">START</span><span class="p">,</span> <span class="n">END</span><span class="p">}:</span>  <span class="c1"># START and END can be orphaned</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Orphaned nodes detected: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">orphaned</span> <span class="o">-</span> <span class="p">{</span><span class="n">START</span><span class="p">,</span> <span class="n">END</span><span class="p">})</span>
            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Orphaned nodes detected: </span><span class="si">{</span><span class="n">orphaned</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">{</span><span class="n">START</span><span class="p">,</span><span class="w"> </span><span class="n">END</span><span class="p">}</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Check that all edge targets exist</span>
        <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">edge</span><span class="o">.</span><span class="n">to_node</span> <span class="ow">and</span> <span class="n">edge</span><span class="o">.</span><span class="n">to_node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Edge &#39;</span><span class="si">%s</span><span class="s2">&#39; targets non-existent node: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">edge</span><span class="o">.</span><span class="n">to_node</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Edge targets non-existent node: </span><span class="si">{</span><span class="n">edge</span><span class="o">.</span><span class="n">to_node</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="pyagenity.graph.state_graph.StateGraph-attributes">Attributes<a href="#pyagenity.graph.state_graph.StateGraph-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="pyagenity.graph.state_graph.StateGraph.edges" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">edges</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pyagenity.graph.state_graph.StateGraph.edges" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">edges</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="pyagenity.graph.state_graph.StateGraph.entry_point" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">entry_point</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pyagenity.graph.state_graph.StateGraph.entry_point" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">entry_point</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="pyagenity.graph.state_graph.StateGraph.nodes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">nodes</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pyagenity.graph.state_graph.StateGraph.nodes" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">nodes</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="pyagenity.graph.state_graph.StateGraph.thread_name_generator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">thread_name_generator</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pyagenity.graph.state_graph.StateGraph.thread_name_generator" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">thread_name_generator</span> <span class="o">=</span> <span class="n">thread_name_generator</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>


<h4 id="pyagenity.graph.state_graph.StateGraph-functions">Functions<a href="#pyagenity.graph.state_graph.StateGraph-functions" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-function">


<h5 id="pyagenity.graph.state_graph.StateGraph.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">__init__</span>


<a href="#pyagenity.graph.state_graph.StateGraph.__init__" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__init__</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">context_manager</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">publisher</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">id_generator</span><span class="o">=</span><span class="n">DefaultIDGenerator</span><span class="p">(),</span> <span class="n">container</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thread_name_generator</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize a new StateGraph instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.__init__(state)" class="doc doc-heading doc-heading-parameter">                  <code>state</code>
<a href="#pyagenity.graph.state_graph.StateGraph.__init__(state)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="pyagenity.graph.state_graph.StateGraph[StateT]">StateT</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial state for the graph. If None, a default AgentState
will be created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.__init__(context_manager)" class="doc doc-heading doc-heading-parameter">                  <code>context_manager</code>
<a href="#pyagenity.graph.state_graph.StateGraph.__init__(context_manager)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            BaseContextManager (pyagenity.state.BaseContextManager)" href="../../#pyagenity.state.BaseContextManager">BaseContextManager</a>[<span title="pyagenity.graph.state_graph.StateGraph[StateT]">StateT</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional context manager for handling cross-node
state operations and advanced state management patterns.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.__init__(dependency_container)" class="doc doc-heading doc-heading-parameter">                  <code>dependency_container</code>
<a href="#pyagenity.graph.state_graph.StateGraph.__init__(dependency_container)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Container for managing dependencies that can
be injected into node functions. If None, a new empty container
will be created.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.__init__(publisher)" class="doc doc-heading doc-heading-parameter">                  <code>publisher</code>
<a href="#pyagenity.graph.state_graph.StateGraph.__init__(publisher)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            BasePublisher (pyagenity.publisher.BasePublisher)" href="../../#pyagenity.publisher.BasePublisher">BasePublisher</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Publisher for emitting events during execution</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>START and END nodes are automatically added to the graph upon
initialization and accept the full node signature including
dependencies.</p>
</details>

<details class="example" open>
  <summary>Example</summary>
  <h6 id="pyagenity.graph.state_graph.StateGraph.__init__--basic-usage-with-default-agentstate">Basic usage with default AgentState<a class="headerlink" href="#pyagenity.graph.state_graph.StateGraph.__init__--basic-usage-with-default-agentstate" title="Permanent link">&para;</a></h6>
<blockquote>
<blockquote>
<blockquote>
<p>graph = StateGraph()</p>
</blockquote>
</blockquote>
</blockquote>
<h6 id="pyagenity.graph.state_graph.StateGraph.__init__--with-custom-state">With custom state<a class="headerlink" href="#pyagenity.graph.state_graph.StateGraph.__init__--with-custom-state" title="Permanent link">&para;</a></h6>
<blockquote>
<blockquote>
<blockquote>
<p>custom_state = MyCustomState()
graph = StateGraph(custom_state)</p>
</blockquote>
</blockquote>
</blockquote>
<h6 id="pyagenity.graph.state_graph.StateGraph.__init__--or-using-type-hints-for-clarity">Or using type hints for clarity<a class="headerlink" href="#pyagenity.graph.state_graph.StateGraph.__init__--or-using-type-hints-for-clarity" title="Permanent link">&para;</a></h6>
<blockquote>
<blockquote>
<blockquote>
<p>graph = StateGraph<a href="MyCustomState()">MyCustomState</a></p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>pyagenity/graph/state_graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">StateT</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">context_manager</span><span class="p">:</span> <span class="n">BaseContextManager</span><span class="p">[</span><span class="n">StateT</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">publisher</span><span class="p">:</span> <span class="n">BasePublisher</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">id_generator</span><span class="p">:</span> <span class="n">BaseIDGenerator</span> <span class="o">=</span> <span class="n">DefaultIDGenerator</span><span class="p">(),</span>
    <span class="n">container</span><span class="p">:</span> <span class="n">InjectQ</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">thread_name_generator</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize a new StateGraph instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        state: Initial state for the graph. If None, a default AgentState</span>
<span class="sd">            will be created.</span>
<span class="sd">        context_manager: Optional context manager for handling cross-node</span>
<span class="sd">            state operations and advanced state management patterns.</span>
<span class="sd">        dependency_container: Container for managing dependencies that can</span>
<span class="sd">            be injected into node functions. If None, a new empty container</span>
<span class="sd">            will be created.</span>
<span class="sd">        publisher: Publisher for emitting events during execution</span>

<span class="sd">    Note:</span>
<span class="sd">        START and END nodes are automatically added to the graph upon</span>
<span class="sd">        initialization and accept the full node signature including</span>
<span class="sd">        dependencies.</span>

<span class="sd">    Example:</span>
<span class="sd">        # Basic usage with default AgentState</span>
<span class="sd">        &gt;&gt;&gt; graph = StateGraph()</span>

<span class="sd">        # With custom state</span>
<span class="sd">        &gt;&gt;&gt; custom_state = MyCustomState()</span>
<span class="sd">        &gt;&gt;&gt; graph = StateGraph(custom_state)</span>

<span class="sd">        # Or using type hints for clarity</span>
<span class="sd">        &gt;&gt;&gt; graph = StateGraph[MyCustomState](MyCustomState())</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initializing StateGraph&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;StateGraph init with state=</span><span class="si">%s</span><span class="s2">, context_manager=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">if</span> <span class="n">state</span> <span class="k">else</span> <span class="s2">&quot;default AgentState&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">(</span><span class="n">context_manager</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">if</span> <span class="n">context_manager</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># State handling</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="p">:</span> <span class="n">StateT</span> <span class="o">=</span> <span class="n">state</span> <span class="k">if</span> <span class="n">state</span> <span class="k">else</span> <span class="n">AgentState</span><span class="p">()</span>  <span class="c1"># type: ignore[assignment]</span>

    <span class="c1"># Graph structure</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Edge</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">entry_point</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Services</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_publisher</span><span class="p">:</span> <span class="n">BasePublisher</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">publisher</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_id_generator</span><span class="p">:</span> <span class="n">BaseIDGenerator</span> <span class="o">=</span> <span class="n">id_generator</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_context_manager</span><span class="p">:</span> <span class="n">BaseContextManager</span><span class="p">[</span><span class="n">StateT</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">context_manager</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">thread_name_generator</span> <span class="o">=</span> <span class="n">thread_name_generator</span>
    <span class="c1"># save container for dependency injection</span>
    <span class="c1"># if any container is passed then we will activate that</span>
    <span class="c1"># otherwise we can skip it and use the default one</span>
    <span class="k">if</span> <span class="n">container</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span> <span class="o">=</span> <span class="n">InjectQ</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;No container provided, using global singleton instance&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using provided dependency container instance&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span> <span class="o">=</span> <span class="n">container</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

    <span class="c1"># Register task_manager, for async tasks</span>
    <span class="c1"># This will be used to run background tasks</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_task_manager</span> <span class="o">=</span> <span class="n">BackgroundTaskManager</span><span class="p">()</span>

    <span class="c1"># now setup the graph</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_setup</span><span class="p">()</span>

    <span class="c1"># Add START and END nodes (accept full node signature including dependencies)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding default START and END nodes&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">START</span><span class="p">]</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">START</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">state</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="o">**</span><span class="n">deps</span><span class="p">:</span> <span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publisher</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">END</span><span class="p">]</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">END</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">state</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="o">**</span><span class="n">deps</span><span class="p">:</span> <span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publisher</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;StateGraph initialized with </span><span class="si">%d</span><span class="s2"> nodes&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="pyagenity.graph.state_graph.StateGraph.add_conditional_edges" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">add_conditional_edges</span>


<a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_conditional_edges</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="n">condition</span><span class="p">,</span> <span class="n">path_map</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add conditional routing between nodes based on runtime evaluation.</p>
<p>Creates dynamic routing logic where the next node is determined by evaluating
a condition function against the current state. This enables complex branching
logic, decision trees, and adaptive workflow routing.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.add_conditional_edges(from_node)" class="doc doc-heading doc-heading-parameter">                  <code>from_node</code>
<a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges(from_node)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the source node where the condition is evaluated.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.add_conditional_edges(condition)" class="doc doc-heading doc-heading-parameter">                  <code>condition</code>
<a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges(condition)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Callable function that takes the current AgentState and returns
a value used for routing decisions. Should be deterministic and
side-effect free.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.add_conditional_edges(path_map)" class="doc doc-heading doc-heading-parameter">                  <code>path_map</code>
<a href="#pyagenity.graph.state_graph.StateGraph.add_conditional_edges(path_map)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional dictionary mapping condition results to destination nodes.
If provided, the condition's return value is looked up in this mapping.
If None, the condition should return the destination node name directly.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>StateGraph</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            StateGraph (pyagenity.graph.state_graph.StateGraph)" href="../../#pyagenity.graph.state_graph.StateGraph">StateGraph</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The graph instance for method chaining.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the condition function or path_map configuration is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="c1"># Direct routing - condition returns node name</span>
<span class="k">def</span><span class="w"> </span><span class="nf">route_by_priority</span><span class="p">(</span><span class="n">state</span><span class="p">):</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;priority&quot;</span><span class="p">,</span> <span class="s2">&quot;normal&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;urgent_handler&quot;</span> <span class="k">if</span> <span class="n">priority</span> <span class="o">==</span> <span class="s2">&quot;high&quot;</span> <span class="k">else</span> <span class="s2">&quot;normal_handler&quot;</span>


<span class="n">graph</span><span class="o">.</span><span class="n">add_conditional_edges</span><span class="p">(</span><span class="s2">&quot;classifier&quot;</span><span class="p">,</span> <span class="n">route_by_priority</span><span class="p">)</span>


<span class="c1"># Mapped routing - condition result mapped to nodes</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_category</span><span class="p">(</span><span class="n">state</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">state</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span>


<span class="n">category_map</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;finance&quot;</span><span class="p">:</span> <span class="s2">&quot;finance_processor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;legal&quot;</span><span class="p">:</span> <span class="s2">&quot;legal_processor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;general_processor&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add_conditional_edges</span><span class="p">(</span><span class="s2">&quot;categorizer&quot;</span><span class="p">,</span> <span class="n">get_category</span><span class="p">,</span> <span class="n">category_map</span><span class="p">)</span>
</code></pre></div>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>The condition function receives the current AgentState and should return
consistent results for the same state. If using path_map, ensure the
condition's return values match the map keys exactly.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>pyagenity/graph/state_graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_conditional_edges</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">from_node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">condition</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
    <span class="n">path_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StateGraph&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add conditional routing between nodes based on runtime evaluation.</span>

<span class="sd">    Creates dynamic routing logic where the next node is determined by evaluating</span>
<span class="sd">    a condition function against the current state. This enables complex branching</span>
<span class="sd">    logic, decision trees, and adaptive workflow routing.</span>

<span class="sd">    Args:</span>
<span class="sd">        from_node: Name of the source node where the condition is evaluated.</span>
<span class="sd">        condition: Callable function that takes the current AgentState and returns</span>
<span class="sd">            a value used for routing decisions. Should be deterministic and</span>
<span class="sd">            side-effect free.</span>
<span class="sd">        path_map: Optional dictionary mapping condition results to destination nodes.</span>
<span class="sd">            If provided, the condition&#39;s return value is looked up in this mapping.</span>
<span class="sd">            If None, the condition should return the destination node name directly.</span>

<span class="sd">    Returns:</span>
<span class="sd">        StateGraph: The graph instance for method chaining.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the condition function or path_map configuration is invalid.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        # Direct routing - condition returns node name</span>
<span class="sd">        def route_by_priority(state):</span>
<span class="sd">            priority = state.data.get(&quot;priority&quot;, &quot;normal&quot;)</span>
<span class="sd">            return &quot;urgent_handler&quot; if priority == &quot;high&quot; else &quot;normal_handler&quot;</span>


<span class="sd">        graph.add_conditional_edges(&quot;classifier&quot;, route_by_priority)</span>


<span class="sd">        # Mapped routing - condition result mapped to nodes</span>
<span class="sd">        def get_category(state):</span>
<span class="sd">            return state.data.get(&quot;category&quot;, &quot;default&quot;)</span>


<span class="sd">        category_map = {</span>
<span class="sd">            &quot;finance&quot;: &quot;finance_processor&quot;,</span>
<span class="sd">            &quot;legal&quot;: &quot;legal_processor&quot;,</span>
<span class="sd">            &quot;default&quot;: &quot;general_processor&quot;,</span>
<span class="sd">        }</span>
<span class="sd">        graph.add_conditional_edges(&quot;categorizer&quot;, get_category, category_map)</span>
<span class="sd">        ```</span>

<span class="sd">    Note:</span>
<span class="sd">        The condition function receives the current AgentState and should return</span>
<span class="sd">        consistent results for the same state. If using path_map, ensure the</span>
<span class="sd">        condition&#39;s return values match the map keys exactly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add conditional edges from a node based on a condition function.</span>

<span class="sd">    Creates edges that are traversed based on the result of a condition</span>
<span class="sd">    function. The condition function receives the current state and should</span>
<span class="sd">    return a value that determines which edge to follow.</span>

<span class="sd">    Args:</span>
<span class="sd">        from_node: Name of the source node.</span>
<span class="sd">        condition: Function that evaluates the current state and returns</span>
<span class="sd">            a value to determine the next node.</span>
<span class="sd">        path_map: Optional mapping from condition results to target nodes.</span>
<span class="sd">            If provided, creates multiple conditional edges. If None,</span>
<span class="sd">            creates a single conditional edge.</span>

<span class="sd">    Returns:</span>
<span class="sd">        StateGraph: The graph instance for method chaining.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; def route_condition(state):</span>
<span class="sd">        ...     return &quot;success&quot; if state.success else &quot;failure&quot;</span>
<span class="sd">        &gt;&gt;&gt; graph.add_conditional_edges(</span>
<span class="sd">        ...     &quot;processor&quot;,</span>
<span class="sd">        ...     route_condition,</span>
<span class="sd">        ...     {&quot;success&quot;: &quot;next_step&quot;, &quot;failure&quot;: &quot;error_handler&quot;},</span>
<span class="sd">        ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create edges based on possible returns from condition function</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Node &#39;</span><span class="si">%s</span><span class="s2">&#39; adding conditional edges with path_map: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">from_node</span><span class="p">,</span>
        <span class="n">path_map</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">path_map</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Node &#39;</span><span class="si">%s</span><span class="s2">&#39; adding conditional edges with path_map: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="p">,</span> <span class="n">path_map</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">condition_result</span><span class="p">,</span> <span class="n">target_node</span> <span class="ow">in</span> <span class="n">path_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">edge</span> <span class="o">=</span> <span class="n">Edge</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="n">target_node</span><span class="p">,</span> <span class="n">condition</span><span class="p">)</span>
            <span class="n">edge</span><span class="o">.</span><span class="n">condition_result</span> <span class="o">=</span> <span class="n">condition_result</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Single conditional edge</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Node &#39;</span><span class="si">%s</span><span class="s2">&#39; adding single conditional edge&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">condition</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="pyagenity.graph.state_graph.StateGraph.add_edge" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">add_edge</span>


<a href="#pyagenity.graph.state_graph.StateGraph.add_edge" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_edge</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="n">to_node</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add a static edge between two nodes.</p>
<p>Creates a direct connection from one node to another. If the source
node is START, the target node becomes the entry point for the graph.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.add_edge(from_node)" class="doc doc-heading doc-heading-parameter">                  <code>from_node</code>
<a href="#pyagenity.graph.state_graph.StateGraph.add_edge(from_node)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the source node.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.add_edge(to_node)" class="doc doc-heading doc-heading-parameter">                  <code>to_node</code>
<a href="#pyagenity.graph.state_graph.StateGraph.add_edge(to_node)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the target node.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>StateGraph</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            StateGraph (pyagenity.graph.state_graph.StateGraph)" href="../../#pyagenity.graph.state_graph.StateGraph">StateGraph</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The graph instance for method chaining.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>graph.add_edge("node1", "node2")
graph.add_edge(START, "entry_node")  # Sets entry point</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>pyagenity/graph/state_graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_edge</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">from_node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">to_node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StateGraph&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a static edge between two nodes.</span>

<span class="sd">    Creates a direct connection from one node to another. If the source</span>
<span class="sd">    node is START, the target node becomes the entry point for the graph.</span>

<span class="sd">    Args:</span>
<span class="sd">        from_node: Name of the source node.</span>
<span class="sd">        to_node: Name of the target node.</span>

<span class="sd">    Returns:</span>
<span class="sd">        StateGraph: The graph instance for method chaining.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; graph.add_edge(&quot;node1&quot;, &quot;node2&quot;)</span>
<span class="sd">        &gt;&gt;&gt; graph.add_edge(START, &quot;entry_node&quot;)  # Sets entry point</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding edge from &#39;</span><span class="si">%s</span><span class="s2">&#39; to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">from_node</span><span class="p">,</span> <span class="n">to_node</span><span class="p">)</span>
    <span class="c1"># Set entry point if edge is from START</span>
    <span class="k">if</span> <span class="n">from_node</span> <span class="o">==</span> <span class="n">START</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_point</span> <span class="o">=</span> <span class="n">to_node</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Set entry point to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">to_node</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Edge</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="n">to_node</span><span class="p">))</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Added edge (total edges: </span><span class="si">%d</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="pyagenity.graph.state_graph.StateGraph.add_node" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">add_node</span>


<a href="#pyagenity.graph.state_graph.StateGraph.add_node" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_node</span><span class="p">(</span><span class="n">name_or_func</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add a node to the graph.</p>
<p>This method supports two calling patterns:
1. Pass a callable as the first argument (name inferred from function name)
2. Pass a name string and callable/ToolNode as separate arguments</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.add_node(name_or_func)" class="doc doc-heading doc-heading-parameter">                  <code>name_or_func</code>
<a href="#pyagenity.graph.state_graph.StateGraph.add_node(name_or_func)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span> | <span title="collections.abc.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Either the node name (str) or a callable function.
If callable, the function name will be used as the node name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.add_node(func)" class="doc doc-heading doc-heading-parameter">                  <code>func</code>
<a href="#pyagenity.graph.state_graph.StateGraph.add_node(func)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="collections.abc.Callable">Callable</span>, <a class="autorefs autorefs-internal" title="            ToolNode (pyagenity.graph.tool_node.ToolNode)" href="../../#pyagenity.graph.tool_node.ToolNode">ToolNode</a>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function or ToolNode to execute. Required if name_or_func
is a string, ignored if name_or_func is callable.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>StateGraph</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            StateGraph (pyagenity.graph.state_graph.StateGraph)" href="../../#pyagenity.graph.state_graph.StateGraph">StateGraph</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The graph instance for method chaining.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If invalid arguments are provided.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<h6 id="pyagenity.graph.state_graph.StateGraph.add_node--method-1-function-name-inferred">Method 1: Function name inferred<a class="headerlink" href="#pyagenity.graph.state_graph.StateGraph.add_node--method-1-function-name-inferred" title="Permanent link">&para;</a></h6>
<p>graph.add_node(my_function)</p>
<h6 id="pyagenity.graph.state_graph.StateGraph.add_node--method-2-explicit-name-and-function">Method 2: Explicit name and function<a class="headerlink" href="#pyagenity.graph.state_graph.StateGraph.add_node--method-2-explicit-name-and-function" title="Permanent link">&para;</a></h6>
<p>graph.add_node("process", my_function)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>pyagenity/graph/state_graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_node</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name_or_func</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">,</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Callable</span><span class="p">,</span> <span class="s2">&quot;ToolNode&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StateGraph&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a node to the graph.</span>

<span class="sd">    This method supports two calling patterns:</span>
<span class="sd">    1. Pass a callable as the first argument (name inferred from function name)</span>
<span class="sd">    2. Pass a name string and callable/ToolNode as separate arguments</span>

<span class="sd">    Args:</span>
<span class="sd">        name_or_func: Either the node name (str) or a callable function.</span>
<span class="sd">            If callable, the function name will be used as the node name.</span>
<span class="sd">        func: The function or ToolNode to execute. Required if name_or_func</span>
<span class="sd">            is a string, ignored if name_or_func is callable.</span>

<span class="sd">    Returns:</span>
<span class="sd">        StateGraph: The graph instance for method chaining.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If invalid arguments are provided.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; # Method 1: Function name inferred</span>
<span class="sd">        &gt;&gt;&gt; graph.add_node(my_function)</span>
<span class="sd">        &gt;&gt;&gt; # Method 2: Explicit name and function</span>
<span class="sd">        &gt;&gt;&gt; graph.add_node(&quot;process&quot;, my_function)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">name_or_func</span><span class="p">)</span> <span class="ow">and</span> <span class="n">func</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Function passed as first argument</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name_or_func</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">func</span> <span class="o">=</span> <span class="n">name_or_func</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding node &#39;</span><span class="si">%s</span><span class="s2">&#39; with inferred name from function&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name_or_func</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ToolNode</span><span class="p">)):</span>
        <span class="c1"># Name and function passed separately</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name_or_func</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Adding node &#39;</span><span class="si">%s</span><span class="s2">&#39; with explicit name and </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;ToolNode&quot;</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ToolNode</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;callable&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid arguments for add_node&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Added node &#39;</span><span class="si">%s</span><span class="s2">&#39; to graph (total nodes: </span><span class="si">%d</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="pyagenity.graph.state_graph.StateGraph.compile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">compile</span>


<a href="#pyagenity.graph.state_graph.StateGraph.compile" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">compile</span><span class="p">(</span><span class="n">checkpointer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interrupt_before</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interrupt_after</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback_manager</span><span class="o">=</span><span class="n">CallbackManager</span><span class="p">())</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Compile the graph for execution.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.compile(checkpointer)" class="doc doc-heading doc-heading-parameter">                  <code>checkpointer</code>
<a href="#pyagenity.graph.state_graph.StateGraph.compile(checkpointer)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            BaseCheckpointer (pyagenity.checkpointer.BaseCheckpointer)" href="../../#pyagenity.checkpointer.BaseCheckpointer">BaseCheckpointer</a>[<span title="pyagenity.graph.state_graph.StateGraph[StateT]">StateT</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Checkpointer for state persistence</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.compile(store)" class="doc doc-heading doc-heading-parameter">                  <code>store</code>
<a href="#pyagenity.graph.state_graph.StateGraph.compile(store)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            BaseStore (pyagenity.store.BaseStore)" href="../../#pyagenity.store.BaseStore">BaseStore</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Store for additional data</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.compile(debug)" class="doc doc-heading doc-heading-parameter">                  <code>debug</code>
<a href="#pyagenity.graph.state_graph.StateGraph.compile(debug)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Enable debug mode</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.compile(interrupt_before)" class="doc doc-heading doc-heading-parameter">                  <code>interrupt_before</code>
<a href="#pyagenity.graph.state_graph.StateGraph.compile(interrupt_before)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of node names to interrupt before execution</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.compile(interrupt_after)" class="doc doc-heading doc-heading-parameter">                  <code>interrupt_after</code>
<a href="#pyagenity.graph.state_graph.StateGraph.compile(interrupt_after)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of node names to interrupt after execution</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="pyagenity.graph.state_graph.StateGraph.compile(callback_manager)" class="doc doc-heading doc-heading-parameter">                  <code>callback_manager</code>
<a href="#pyagenity.graph.state_graph.StateGraph.compile(callback_manager)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            CallbackManager (pyagenity.utils.CallbackManager)" href="../../#pyagenity.utils.CallbackManager">CallbackManager</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Callback manager for executing hooks</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            CallbackManager (pyagenity.utils.CallbackManager)" href="../../#pyagenity.utils.CallbackManager">CallbackManager</a>()</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pyagenity/graph/state_graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">checkpointer</span><span class="p">:</span> <span class="n">BaseCheckpointer</span><span class="p">[</span><span class="n">StateT</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">store</span><span class="p">:</span> <span class="n">BaseStore</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">interrupt_before</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">interrupt_after</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">callback_manager</span><span class="p">:</span> <span class="n">CallbackManager</span> <span class="o">=</span> <span class="n">CallbackManager</span><span class="p">(),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CompiledGraph[StateT]&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compile the graph for execution.</span>

<span class="sd">    Args:</span>
<span class="sd">        checkpointer: Checkpointer for state persistence</span>
<span class="sd">        store: Store for additional data</span>
<span class="sd">        debug: Enable debug mode</span>
<span class="sd">        interrupt_before: List of node names to interrupt before execution</span>
<span class="sd">        interrupt_after: List of node names to interrupt after execution</span>
<span class="sd">        callback_manager: Callback manager for executing hooks</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Compiling graph with </span><span class="si">%d</span><span class="s2"> nodes, </span><span class="si">%d</span><span class="s2"> edges, entry_point=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
        <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">),</span>
        <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_point</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Compile options: interrupt_before=</span><span class="si">%s</span><span class="s2">, interrupt_after=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">interrupt_before</span><span class="p">,</span>
        <span class="n">interrupt_after</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_point</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="s2">&quot;No entry point set. Use set_entry_point() or add an edge from START.&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>

    <span class="c1"># Validate graph structure</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Validating graph structure&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_graph</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Graph structure validated successfully&quot;</span><span class="p">)</span>

    <span class="c1"># Validate interrupt node names</span>
    <span class="n">interrupt_before</span> <span class="o">=</span> <span class="n">interrupt_before</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">interrupt_after</span> <span class="o">=</span> <span class="n">interrupt_after</span> <span class="ow">or</span> <span class="p">[]</span>

    <span class="n">all_interrupt_nodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">interrupt_before</span> <span class="o">+</span> <span class="n">interrupt_after</span><span class="p">)</span>
    <span class="n">invalid_nodes</span> <span class="o">=</span> <span class="n">all_interrupt_nodes</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">invalid_nodes</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Invalid interrupt nodes: </span><span class="si">{</span><span class="n">invalid_nodes</span><span class="si">}</span><span class="s2">. Must be existing node names.&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">compiled</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Graph compilation completed successfully&quot;</span><span class="p">)</span>
    <span class="c1"># Import here to avoid circular import at module import time</span>
    <span class="c1"># Now update Checkpointer</span>
    <span class="k">if</span> <span class="n">checkpointer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">pyagenity.checkpointer</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemoryCheckpointer</span>

        <span class="n">checkpointer</span> <span class="o">=</span> <span class="n">InMemoryCheckpointer</span><span class="p">[</span><span class="n">StateT</span><span class="p">]()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;No checkpointer provided, using InMemoryCheckpointer&quot;</span><span class="p">)</span>

    <span class="c1"># Import the CompiledGraph class</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">.compiled_graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">CompiledGraph</span>

    <span class="c1"># Setup dependencies</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span>
        <span class="n">BaseCheckpointer</span><span class="p">,</span>
        <span class="n">checkpointer</span><span class="p">,</span>
        <span class="n">allow_concrete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>  <span class="c1"># not null as we set default</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span>
        <span class="n">BaseStore</span><span class="p">,</span>
        <span class="n">store</span><span class="p">,</span>
        <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">allow_concrete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span>
        <span class="n">CallbackManager</span><span class="p">,</span>
        <span class="n">callback_manager</span><span class="p">,</span>
        <span class="n">allow_concrete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>  <span class="c1"># not null as we set default</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;interrupt_before&quot;</span><span class="p">,</span> <span class="n">interrupt_before</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;interrupt_after&quot;</span><span class="p">,</span> <span class="n">interrupt_after</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind_instance</span><span class="p">(</span><span class="n">StateGraph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

    <span class="n">app</span> <span class="o">=</span> <span class="n">CompiledGraph</span><span class="p">(</span>
        <span class="n">state</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="p">,</span>
        <span class="n">interrupt_after</span><span class="o">=</span><span class="n">interrupt_after</span><span class="p">,</span>
        <span class="n">interrupt_before</span><span class="o">=</span><span class="n">interrupt_before</span><span class="p">,</span>
        <span class="n">state_graph</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">,</span>
        <span class="n">publisher</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_publisher</span><span class="p">,</span>
        <span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">,</span>
        <span class="n">task_manager</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_task_manager</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">CompiledGraph</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>
    <span class="c1"># Compile the Graph, so it will optimize the dependency graph</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_container</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">app</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="pyagenity.graph.state_graph.StateGraph.set_entry_point" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_entry_point</span>


<a href="#pyagenity.graph.state_graph.StateGraph.set_entry_point" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_entry_point</span><span class="p">(</span><span class="n">node_name</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the entry point for the graph.</p>


            <details class="quote">
              <summary>Source code in <code>pyagenity/graph/state_graph.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_entry_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StateGraph&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the entry point for the graph.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">entry_point</span> <span class="o">=</span> <span class="n">node_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">START</span><span class="p">,</span> <span class="n">node_name</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Set entry point to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">node_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h2 id="pyagenity.graph.state_graph-functions">Functions<a href="#pyagenity.graph.state_graph-functions" class="headerlink" title="Permanent link">&para;</a></h2>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.pagination", "navigation.goto_top", "navigation.path", "navigation.tabs", "navigation.top", "search-suggest", "search.highlight", "search.share", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>