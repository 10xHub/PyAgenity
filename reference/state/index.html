
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A lightweight Python framework for building intelligent agents and multi-agent workflows.">
      
      
      
        <link rel="canonical" href="https://10xhub.github.io/agentflow/reference/state/">
      
      
        <link rel="prev" href="../publisher/redis_publisher/">
      
      
        <link rel="next" href="agent_state/">
      
      
      <link rel="icon" href="../../None">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>State - 10xScale Agentflow</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#agentflow.state" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="10xScale Agentflow" class="md-header__button md-logo" aria-label="10xScale Agentflow" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            10xScale Agentflow
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              State
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/10xhub/agentflow" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    10xhub/agentflow
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  10xScale Agentflow

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../Concept/" class="md-tabs__link">
        
  
  
    
  
  Concept

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../Tutorial/" class="md-tabs__link">
        
  
  
    
  
  Tutorial

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="../" class="md-tabs__link">
        
  
  
    
  
  Reference

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="10xScale Agentflow" class="md-nav__button md-logo" aria-label="10xScale Agentflow" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    10xScale Agentflow
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/10xhub/agentflow" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    10xhub/agentflow
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10xScale Agentflow
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Concept/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Concept
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Concept
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/Callbacks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Callbacks: Interception and Flow Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/Command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands: Combining State Updates with Control Flow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/Threadname/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Threadname
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/dependency-injection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dependency Injection in 10xScale Agentflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/id_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Id generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publisher: Real-time Agent Observability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/response_converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Response converter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Concept/context/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Context
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Context
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/context/checkpointer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Checkpointer: The Agent's Session Memory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/context/context-manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/context/message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Messages: The Lifeblood of Agent Communication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/context/state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent State: The Mind of Your Agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/context/store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Store: The Agent's Knowledge Memory
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Concept/graph/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Graph
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            Graph
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/graph/Config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Graph Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/graph/advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Patterns &amp; Performance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/graph/control_flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Flow &amp; Edges
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/graph/execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execution &amp; Streaming Runtime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/graph/human-in-the-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Human-in-the-Loop (HITL) &amp; Interrupts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/graph/nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nodes &amp; Return Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Concept/graph/tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools &amp; Integrations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Tutorial/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tutorial
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tutorial/long_term_memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Long-Term Memory with Mem0
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tutorial/plan_act_reflect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plan-Act-Reflect Pattern
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tutorial/qdrant_store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QdrantStore Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tutorial/rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RAG (Retrieval-Augmented Generation) with 10xScale Agentflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Tutorial/react/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    React
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            React
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tutorial/react/01-basic-react/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic React Patterns
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tutorial/react/02-dependency-injection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    React Agents with Dependency Injection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tutorial/react/03-mcp-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    React Agents with Model Context Protocol (MCP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tutorial/react/04-streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    React Agents with Streaming Responses
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../adapters/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Adapters
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Adapters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../adapters/llm/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Llm
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_1">
            <span class="md-nav__icon md-icon"></span>
            Llm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adapters/llm/base_converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base converter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adapters/llm/litellm_converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Litellm converter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adapters/llm/model_response_converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model response converter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../adapters/tools/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1_2" id="__nav_4_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_2">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adapters/tools/composio_adapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Composio adapter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adapters/tools/langchain_adapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Langchain adapter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../checkpointer/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Checkpointer
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Checkpointer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../checkpointer/base_checkpointer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base checkpointer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../checkpointer/in_memory_checkpointer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    In memory checkpointer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../checkpointer/pg_checkpointer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pg checkpointer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../exceptions/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Exceptions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/graph_error/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Graph error
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/node_error/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node error
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/recursion_error/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recursion error
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/storage_exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../graph/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Graph
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Graph
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/compiled_graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compiled graph
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/edge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Edge
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/state_graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    State graph
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../graph/tool_node/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tool node
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_5" id="__nav_4_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_5">
            <span class="md-nav__icon md-icon"></span>
            Tool node
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/tool_node/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/tool_node/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/tool_node/deps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/tool_node/executors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Executors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/tool_node/schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schema
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../graph/utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_6" id="__nav_4_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_6">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/utils/handler_mixins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Handler mixins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/utils/invoke_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Invoke handler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/utils/invoke_node_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Invoke node handler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/utils/stream_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stream handler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/utils/stream_node_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stream node handler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/utils/stream_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stream utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/utils/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../prebuilt/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Prebuilt
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Prebuilt
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../prebuilt/agent/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Agent
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5_1" id="__nav_4_5_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_1">
            <span class="md-nav__icon md-icon"></span>
            Agent
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/branch_join/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Branch join
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/deep_research/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deep research
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/guarded/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guarded
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/map_reduce/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Map reduce
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/plan_act_reflect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plan act reflect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rag
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/react/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    React
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/router/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Router
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/sequential/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sequential
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/supervisor_team/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supervisor team
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prebuilt/agent/swarm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Swarm
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../publisher/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Publisher
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Publisher
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../publisher/base_publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base publisher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../publisher/console_publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Console publisher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../publisher/events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../publisher/kafka_publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka publisher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../publisher/publish/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publish
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../publisher/rabbitmq_publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rabbitmq publisher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../publisher/redis_publisher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Redis publisher
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  
  <span class="md-ellipsis">
    State
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            State
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="agent_state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent state
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="base_context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base context
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="execution_state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execution state
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="message_block/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message block
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="message_context_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message context manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="reducers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reducers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="stream_chunks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stream chunks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../store/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Store
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Store
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../store/base_store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../store/mem0_store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mem0 store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../store/qdrant_store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qdrant store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../store/store_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Store schema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../store/embedding/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Embedding
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8_5" id="__nav_4_8_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_5">
            <span class="md-nav__icon md-icon"></span>
            Embedding
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../store/embedding/base_embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base embedding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../store/embedding/openai_embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openai embedding
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/background_task_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Background task manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/callable_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Callable utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/callbacks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Callbacks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Converter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/id_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Id generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/thread_info/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Thread info
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/thread_name_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Thread name generator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#agentflow.state" class="md-nav__link">
    <span class="md-ellipsis">
      state
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agentflow.state-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ContentBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ContentBlock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.__all__" class="md-nav__link">
    <span class="md-ellipsis">
      __all__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agentflow.state-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState" class="md-nav__link">
    <span class="md-ellipsis">
      AgentState
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AgentState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.context" class="md-nav__link">
    <span class="md-ellipsis">
      context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.context_summary" class="md-nav__link">
    <span class="md-ellipsis">
      context_summary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.execution_meta" class="md-nav__link">
    <span class="md-ellipsis">
      execution_meta
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.advance_step" class="md-nav__link">
    <span class="md-ellipsis">
      advance_step
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.clear_interrupt" class="md-nav__link">
    <span class="md-ellipsis">
      clear_interrupt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.complete" class="md-nav__link">
    <span class="md-ellipsis">
      complete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.error" class="md-nav__link">
    <span class="md-ellipsis">
      error
    </span>
  </a>
  
    <nav class="md-nav" aria-label="error">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.error(error_msg)" class="md-nav__link">
    <span class="md-ellipsis">
      error_msg
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.is_interrupted" class="md-nav__link">
    <span class="md-ellipsis">
      is_interrupted
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.is_running" class="md-nav__link">
    <span class="md-ellipsis">
      is_running
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.is_stopped_requested" class="md-nav__link">
    <span class="md-ellipsis">
      is_stopped_requested
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.set_current_node" class="md-nav__link">
    <span class="md-ellipsis">
      set_current_node
    </span>
  </a>
  
    <nav class="md-nav" aria-label="set_current_node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.set_current_node(node)" class="md-nav__link">
    <span class="md-ellipsis">
      node
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.set_interrupt" class="md-nav__link">
    <span class="md-ellipsis">
      set_interrupt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="set_interrupt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.set_interrupt(node)" class="md-nav__link">
    <span class="md-ellipsis">
      node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.set_interrupt(reason)" class="md-nav__link">
    <span class="md-ellipsis">
      reason
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.set_interrupt(status)" class="md-nav__link">
    <span class="md-ellipsis">
      status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AgentState.set_interrupt(data)" class="md-nav__link">
    <span class="md-ellipsis">
      data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationBlock" class="md-nav__link">
    <span class="md-ellipsis">
      AnnotationBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnnotationBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationBlock.kind" class="md-nav__link">
    <span class="md-ellipsis">
      kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationBlock.refs" class="md-nav__link">
    <span class="md-ellipsis">
      refs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationBlock.spans" class="md-nav__link">
    <span class="md-ellipsis">
      spans
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationBlock.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationRef" class="md-nav__link">
    <span class="md-ellipsis">
      AnnotationRef
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnnotationRef">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationRef-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationRef.file_id" class="md-nav__link">
    <span class="md-ellipsis">
      file_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationRef.index" class="md-nav__link">
    <span class="md-ellipsis">
      index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationRef.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationRef.title" class="md-nav__link">
    <span class="md-ellipsis">
      title
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AnnotationRef.url" class="md-nav__link">
    <span class="md-ellipsis">
      url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AudioBlock" class="md-nav__link">
    <span class="md-ellipsis">
      AudioBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AudioBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AudioBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AudioBlock.channels" class="md-nav__link">
    <span class="md-ellipsis">
      channels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AudioBlock.media" class="md-nav__link">
    <span class="md-ellipsis">
      media
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AudioBlock.sample_rate" class="md-nav__link">
    <span class="md-ellipsis">
      sample_rate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AudioBlock.transcript" class="md-nav__link">
    <span class="md-ellipsis">
      transcript
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.AudioBlock.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.BaseContextManager" class="md-nav__link">
    <span class="md-ellipsis">
      BaseContextManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseContextManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.BaseContextManager-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.BaseContextManager.atrim_context" class="md-nav__link">
    <span class="md-ellipsis">
      atrim_context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="atrim_context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.BaseContextManager.atrim_context(state)" class="md-nav__link">
    <span class="md-ellipsis">
      state
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.BaseContextManager.trim_context" class="md-nav__link">
    <span class="md-ellipsis">
      trim_context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="trim_context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.BaseContextManager.trim_context(state)" class="md-nav__link">
    <span class="md-ellipsis">
      state
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DataBlock" class="md-nav__link">
    <span class="md-ellipsis">
      DataBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DataBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DataBlock.data_base64" class="md-nav__link">
    <span class="md-ellipsis">
      data_base64
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DataBlock.media" class="md-nav__link">
    <span class="md-ellipsis">
      media
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DataBlock.mime_type" class="md-nav__link">
    <span class="md-ellipsis">
      mime_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DataBlock.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DocumentBlock" class="md-nav__link">
    <span class="md-ellipsis">
      DocumentBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DocumentBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DocumentBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DocumentBlock.excerpt" class="md-nav__link">
    <span class="md-ellipsis">
      excerpt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DocumentBlock.media" class="md-nav__link">
    <span class="md-ellipsis">
      media
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DocumentBlock.pages" class="md-nav__link">
    <span class="md-ellipsis">
      pages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.DocumentBlock.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ErrorBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ErrorBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ErrorBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ErrorBlock.code" class="md-nav__link">
    <span class="md-ellipsis">
      code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ErrorBlock.data" class="md-nav__link">
    <span class="md-ellipsis">
      data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ErrorBlock.message" class="md-nav__link">
    <span class="md-ellipsis">
      message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ErrorBlock.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState" class="md-nav__link">
    <span class="md-ellipsis">
      ExecutionState
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExecutionState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.current_node" class="md-nav__link">
    <span class="md-ellipsis">
      current_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.internal_data" class="md-nav__link">
    <span class="md-ellipsis">
      internal_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.interrupt_data" class="md-nav__link">
    <span class="md-ellipsis">
      interrupt_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.interrupt_reason" class="md-nav__link">
    <span class="md-ellipsis">
      interrupt_reason
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.interrupted_node" class="md-nav__link">
    <span class="md-ellipsis">
      interrupted_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.status" class="md-nav__link">
    <span class="md-ellipsis">
      status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.step" class="md-nav__link">
    <span class="md-ellipsis">
      step
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.stop_current_execution" class="md-nav__link">
    <span class="md-ellipsis">
      stop_current_execution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.thread_id" class="md-nav__link">
    <span class="md-ellipsis">
      thread_id
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.advance_step" class="md-nav__link">
    <span class="md-ellipsis">
      advance_step
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.clear_interrupt" class="md-nav__link">
    <span class="md-ellipsis">
      clear_interrupt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.complete" class="md-nav__link">
    <span class="md-ellipsis">
      complete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.error" class="md-nav__link">
    <span class="md-ellipsis">
      error
    </span>
  </a>
  
    <nav class="md-nav" aria-label="error">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.error(error_msg)" class="md-nav__link">
    <span class="md-ellipsis">
      error_msg
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
    <nav class="md-nav" aria-label="from_dict">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.from_dict(data)" class="md-nav__link">
    <span class="md-ellipsis">
      data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.is_interrupted" class="md-nav__link">
    <span class="md-ellipsis">
      is_interrupted
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.is_running" class="md-nav__link">
    <span class="md-ellipsis">
      is_running
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.is_stopped_requested" class="md-nav__link">
    <span class="md-ellipsis">
      is_stopped_requested
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.set_current_node" class="md-nav__link">
    <span class="md-ellipsis">
      set_current_node
    </span>
  </a>
  
    <nav class="md-nav" aria-label="set_current_node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.set_current_node(node)" class="md-nav__link">
    <span class="md-ellipsis">
      node
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.set_interrupt" class="md-nav__link">
    <span class="md-ellipsis">
      set_interrupt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="set_interrupt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.set_interrupt(node)" class="md-nav__link">
    <span class="md-ellipsis">
      node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.set_interrupt(reason)" class="md-nav__link">
    <span class="md-ellipsis">
      reason
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.set_interrupt(status)" class="md-nav__link">
    <span class="md-ellipsis">
      status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionState.set_interrupt(data)" class="md-nav__link">
    <span class="md-ellipsis">
      data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionStatus" class="md-nav__link">
    <span class="md-ellipsis">
      ExecutionStatus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExecutionStatus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionStatus-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionStatus.COMPLETED" class="md-nav__link">
    <span class="md-ellipsis">
      COMPLETED
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionStatus.ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionStatus.INTERRUPTED_AFTER" class="md-nav__link">
    <span class="md-ellipsis">
      INTERRUPTED_AFTER
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionStatus.INTERRUPTED_BEFORE" class="md-nav__link">
    <span class="md-ellipsis">
      INTERRUPTED_BEFORE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ExecutionStatus.RUNNING" class="md-nav__link">
    <span class="md-ellipsis">
      RUNNING
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ImageBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ImageBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ImageBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ImageBlock.alt_text" class="md-nav__link">
    <span class="md-ellipsis">
      alt_text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ImageBlock.bbox" class="md-nav__link">
    <span class="md-ellipsis">
      bbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ImageBlock.media" class="md-nav__link">
    <span class="md-ellipsis">
      media
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ImageBlock.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef" class="md-nav__link">
    <span class="md-ellipsis">
      MediaRef
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MediaRef">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.data_base64" class="md-nav__link">
    <span class="md-ellipsis">
      data_base64
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.duration_ms" class="md-nav__link">
    <span class="md-ellipsis">
      duration_ms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.file_id" class="md-nav__link">
    <span class="md-ellipsis">
      file_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.filename" class="md-nav__link">
    <span class="md-ellipsis">
      filename
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.height" class="md-nav__link">
    <span class="md-ellipsis">
      height
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.kind" class="md-nav__link">
    <span class="md-ellipsis">
      kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.mime_type" class="md-nav__link">
    <span class="md-ellipsis">
      mime_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.sha256" class="md-nav__link">
    <span class="md-ellipsis">
      sha256
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.size_bytes" class="md-nav__link">
    <span class="md-ellipsis">
      size_bytes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.url" class="md-nav__link">
    <span class="md-ellipsis">
      url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MediaRef.width" class="md-nav__link">
    <span class="md-ellipsis">
      width
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message" class="md-nav__link">
    <span class="md-ellipsis">
      Message
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.content" class="md-nav__link">
    <span class="md-ellipsis">
      content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.delta" class="md-nav__link">
    <span class="md-ellipsis">
      delta
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.message_id" class="md-nav__link">
    <span class="md-ellipsis">
      message_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.metadata" class="md-nav__link">
    <span class="md-ellipsis">
      metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.raw" class="md-nav__link">
    <span class="md-ellipsis">
      raw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.reasoning" class="md-nav__link">
    <span class="md-ellipsis">
      reasoning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.role" class="md-nav__link">
    <span class="md-ellipsis">
      role
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      timestamp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.tools_calls" class="md-nav__link">
    <span class="md-ellipsis">
      tools_calls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.usages" class="md-nav__link">
    <span class="md-ellipsis">
      usages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.attach_media" class="md-nav__link">
    <span class="md-ellipsis">
      attach_media
    </span>
  </a>
  
    <nav class="md-nav" aria-label="attach_media">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.attach_media(media)" class="md-nav__link">
    <span class="md-ellipsis">
      media
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.attach_media(as_type)" class="md-nav__link">
    <span class="md-ellipsis">
      as_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.text" class="md-nav__link">
    <span class="md-ellipsis">
      text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.text_message" class="md-nav__link">
    <span class="md-ellipsis">
      text_message
    </span>
  </a>
  
    <nav class="md-nav" aria-label="text_message">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.text_message(content)" class="md-nav__link">
    <span class="md-ellipsis">
      content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.text_message(role)" class="md-nav__link">
    <span class="md-ellipsis">
      role
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.text_message(message_id)" class="md-nav__link">
    <span class="md-ellipsis">
      message_id
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.tool_message" class="md-nav__link">
    <span class="md-ellipsis">
      tool_message
    </span>
  </a>
  
    <nav class="md-nav" aria-label="tool_message">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.tool_message(content)" class="md-nav__link">
    <span class="md-ellipsis">
      content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.tool_message(message_id)" class="md-nav__link">
    <span class="md-ellipsis">
      message_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.Message.tool_message(meta)" class="md-nav__link">
    <span class="md-ellipsis">
      meta
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager" class="md-nav__link">
    <span class="md-ellipsis">
      MessageContextManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MessageContextManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager.max_messages" class="md-nav__link">
    <span class="md-ellipsis">
      max_messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager.remove_tool_msgs" class="md-nav__link">
    <span class="md-ellipsis">
      remove_tool_msgs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__init__">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager.__init__(max_messages)" class="md-nav__link">
    <span class="md-ellipsis">
      max_messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager.__init__(remove_tool_msgs)" class="md-nav__link">
    <span class="md-ellipsis">
      remove_tool_msgs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager.atrim_context" class="md-nav__link">
    <span class="md-ellipsis">
      atrim_context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="atrim_context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager.atrim_context(state)" class="md-nav__link">
    <span class="md-ellipsis">
      state
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager.trim_context" class="md-nav__link">
    <span class="md-ellipsis">
      trim_context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="trim_context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.MessageContextManager.trim_context(state)" class="md-nav__link">
    <span class="md-ellipsis">
      state
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ReasoningBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ReasoningBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ReasoningBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ReasoningBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ReasoningBlock.details" class="md-nav__link">
    <span class="md-ellipsis">
      details
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ReasoningBlock.summary" class="md-nav__link">
    <span class="md-ellipsis">
      summary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ReasoningBlock.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk" class="md-nav__link">
    <span class="md-ellipsis">
      StreamChunk
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StreamChunk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk.data" class="md-nav__link">
    <span class="md-ellipsis">
      data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk.event" class="md-nav__link">
    <span class="md-ellipsis">
      event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk.message" class="md-nav__link">
    <span class="md-ellipsis">
      message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk.metadata" class="md-nav__link">
    <span class="md-ellipsis">
      metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk.run_id" class="md-nav__link">
    <span class="md-ellipsis">
      run_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk.state" class="md-nav__link">
    <span class="md-ellipsis">
      state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk.thread_id" class="md-nav__link">
    <span class="md-ellipsis">
      thread_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk.timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      timestamp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk.Config" class="md-nav__link">
    <span class="md-ellipsis">
      Config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamChunk.Config-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamEvent" class="md-nav__link">
    <span class="md-ellipsis">
      StreamEvent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StreamEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamEvent-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamEvent.ERROR" class="md-nav__link">
    <span class="md-ellipsis">
      ERROR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamEvent.MESSAGE" class="md-nav__link">
    <span class="md-ellipsis">
      MESSAGE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamEvent.STATE" class="md-nav__link">
    <span class="md-ellipsis">
      STATE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.StreamEvent.UPDATES" class="md-nav__link">
    <span class="md-ellipsis">
      UPDATES
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TextBlock" class="md-nav__link">
    <span class="md-ellipsis">
      TextBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TextBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TextBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TextBlock.annotations" class="md-nav__link">
    <span class="md-ellipsis">
      annotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TextBlock.text" class="md-nav__link">
    <span class="md-ellipsis">
      text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TextBlock.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TokenUsages" class="md-nav__link">
    <span class="md-ellipsis">
      TokenUsages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TokenUsages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TokenUsages-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TokenUsages.audio_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      audio_tokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TokenUsages.cache_creation_input_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      cache_creation_input_tokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TokenUsages.cache_read_input_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      cache_read_input_tokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TokenUsages.completion_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      completion_tokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TokenUsages.image_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      image_tokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TokenUsages.prompt_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      prompt_tokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TokenUsages.reasoning_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      reasoning_tokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.TokenUsages.total_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      total_tokens
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolCallBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ToolCallBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ToolCallBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolCallBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolCallBlock.args" class="md-nav__link">
    <span class="md-ellipsis">
      args
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolCallBlock.id" class="md-nav__link">
    <span class="md-ellipsis">
      id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolCallBlock.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolCallBlock.tool_type" class="md-nav__link">
    <span class="md-ellipsis">
      tool_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolCallBlock.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolResultBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ToolResultBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ToolResultBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolResultBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolResultBlock.call_id" class="md-nav__link">
    <span class="md-ellipsis">
      call_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolResultBlock.is_error" class="md-nav__link">
    <span class="md-ellipsis">
      is_error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolResultBlock.output" class="md-nav__link">
    <span class="md-ellipsis">
      output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolResultBlock.status" class="md-nav__link">
    <span class="md-ellipsis">
      status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.ToolResultBlock.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.VideoBlock" class="md-nav__link">
    <span class="md-ellipsis">
      VideoBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VideoBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.VideoBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.VideoBlock.media" class="md-nav__link">
    <span class="md-ellipsis">
      media
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.VideoBlock.thumbnail" class="md-nav__link">
    <span class="md-ellipsis">
      thumbnail
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.VideoBlock.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agentflow.state-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.add_messages" class="md-nav__link">
    <span class="md-ellipsis">
      add_messages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="add_messages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.add_messages(left)" class="md-nav__link">
    <span class="md-ellipsis">
      left
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.add_messages(right)" class="md-nav__link">
    <span class="md-ellipsis">
      right
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.append_items" class="md-nav__link">
    <span class="md-ellipsis">
      append_items
    </span>
  </a>
  
    <nav class="md-nav" aria-label="append_items">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.append_items(left)" class="md-nav__link">
    <span class="md-ellipsis">
      left
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.append_items(right)" class="md-nav__link">
    <span class="md-ellipsis">
      right
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.remove_tool_messages" class="md-nav__link">
    <span class="md-ellipsis">
      remove_tool_messages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="remove_tool_messages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.remove_tool_messages(messages)" class="md-nav__link">
    <span class="md-ellipsis">
      messages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.replace_messages" class="md-nav__link">
    <span class="md-ellipsis">
      replace_messages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="replace_messages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.replace_messages(left)" class="md-nav__link">
    <span class="md-ellipsis">
      left
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.replace_messages(right)" class="md-nav__link">
    <span class="md-ellipsis">
      right
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.replace_value" class="md-nav__link">
    <span class="md-ellipsis">
      replace_value
    </span>
  </a>
  
    <nav class="md-nav" aria-label="replace_value">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.replace_value(left)" class="md-nav__link">
    <span class="md-ellipsis">
      left
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.replace_value(right)" class="md-nav__link">
    <span class="md-ellipsis">
      right
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agentflow.state-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.agent_state" class="md-nav__link">
    <span class="md-ellipsis">
      agent_state
    </span>
  </a>
  
    <nav class="md-nav" aria-label="agent_state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.agent_state-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.agent_state.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.agent_state-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.agent_state.AgentState" class="md-nav__link">
    <span class="md-ellipsis">
      AgentState
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AgentState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.agent_state.AgentState-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.agent_state.AgentState-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.agent_state-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.base_context" class="md-nav__link">
    <span class="md-ellipsis">
      base_context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base_context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.base_context-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.base_context.S" class="md-nav__link">
    <span class="md-ellipsis">
      S
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.base_context.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.base_context-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.base_context.BaseContextManager" class="md-nav__link">
    <span class="md-ellipsis">
      BaseContextManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseContextManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.base_context.BaseContextManager-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.execution_state" class="md-nav__link">
    <span class="md-ellipsis">
      execution_state
    </span>
  </a>
  
    <nav class="md-nav" aria-label="execution_state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.execution_state-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.execution_state.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.execution_state-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.execution_state.ExecutionState" class="md-nav__link">
    <span class="md-ellipsis">
      ExecutionState
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExecutionState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.execution_state.ExecutionState-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.execution_state.ExecutionState-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.execution_state.ExecutionStatus" class="md-nav__link">
    <span class="md-ellipsis">
      ExecutionStatus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExecutionStatus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.execution_state.ExecutionStatus-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.execution_state.StopRequestStatus" class="md-nav__link">
    <span class="md-ellipsis">
      StopRequestStatus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StopRequestStatus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.execution_state.StopRequestStatus-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message" class="md-nav__link">
    <span class="md-ellipsis">
      message
    </span>
  </a>
  
    <nav class="md-nav" aria-label="message">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message.Message" class="md-nav__link">
    <span class="md-ellipsis">
      Message
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message.Message-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message.Message-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message.TokenUsages" class="md-nav__link">
    <span class="md-ellipsis">
      TokenUsages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TokenUsages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message.TokenUsages-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message.generate_id" class="md-nav__link">
    <span class="md-ellipsis">
      generate_id
    </span>
  </a>
  
    <nav class="md-nav" aria-label="generate_id">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message.generate_id(default_id)" class="md-nav__link">
    <span class="md-ellipsis">
      default_id
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block" class="md-nav__link">
    <span class="md-ellipsis">
      message_block
    </span>
  </a>
  
    <nav class="md-nav" aria-label="message_block">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.ContentBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ContentBlock
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.AnnotationBlock" class="md-nav__link">
    <span class="md-ellipsis">
      AnnotationBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnnotationBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.AnnotationBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.AnnotationRef" class="md-nav__link">
    <span class="md-ellipsis">
      AnnotationRef
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnnotationRef">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.AnnotationRef-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.AudioBlock" class="md-nav__link">
    <span class="md-ellipsis">
      AudioBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AudioBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.AudioBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.DataBlock" class="md-nav__link">
    <span class="md-ellipsis">
      DataBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.DataBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.DocumentBlock" class="md-nav__link">
    <span class="md-ellipsis">
      DocumentBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DocumentBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.DocumentBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.ErrorBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ErrorBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.ErrorBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.ImageBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ImageBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.ImageBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.MediaRef" class="md-nav__link">
    <span class="md-ellipsis">
      MediaRef
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MediaRef">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.MediaRef-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.ReasoningBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ReasoningBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ReasoningBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.ReasoningBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.RemoteToolCallBlock" class="md-nav__link">
    <span class="md-ellipsis">
      RemoteToolCallBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RemoteToolCallBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.RemoteToolCallBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.TextBlock" class="md-nav__link">
    <span class="md-ellipsis">
      TextBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TextBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.TextBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.ToolCallBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ToolCallBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ToolCallBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.ToolCallBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.ToolResultBlock" class="md-nav__link">
    <span class="md-ellipsis">
      ToolResultBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ToolResultBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.ToolResultBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.VideoBlock" class="md-nav__link">
    <span class="md-ellipsis">
      VideoBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VideoBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_block.VideoBlock-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_context_manager" class="md-nav__link">
    <span class="md-ellipsis">
      message_context_manager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="message_context_manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_context_manager-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_context_manager.S" class="md-nav__link">
    <span class="md-ellipsis">
      S
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_context_manager.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_context_manager-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_context_manager.MessageContextManager" class="md-nav__link">
    <span class="md-ellipsis">
      MessageContextManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MessageContextManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_context_manager.MessageContextManager-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_context_manager.MessageContextManager-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.message_context_manager-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers" class="md-nav__link">
    <span class="md-ellipsis">
      reducers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="reducers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.add_messages" class="md-nav__link">
    <span class="md-ellipsis">
      add_messages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="add_messages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.add_messages(left)" class="md-nav__link">
    <span class="md-ellipsis">
      left
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.add_messages(right)" class="md-nav__link">
    <span class="md-ellipsis">
      right
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.append_items" class="md-nav__link">
    <span class="md-ellipsis">
      append_items
    </span>
  </a>
  
    <nav class="md-nav" aria-label="append_items">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.append_items(left)" class="md-nav__link">
    <span class="md-ellipsis">
      left
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.append_items(right)" class="md-nav__link">
    <span class="md-ellipsis">
      right
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.remove_tool_messages" class="md-nav__link">
    <span class="md-ellipsis">
      remove_tool_messages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="remove_tool_messages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.remove_tool_messages(messages)" class="md-nav__link">
    <span class="md-ellipsis">
      messages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.replace_messages" class="md-nav__link">
    <span class="md-ellipsis">
      replace_messages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="replace_messages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.replace_messages(left)" class="md-nav__link">
    <span class="md-ellipsis">
      left
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.replace_messages(right)" class="md-nav__link">
    <span class="md-ellipsis">
      right
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.replace_value" class="md-nav__link">
    <span class="md-ellipsis">
      replace_value
    </span>
  </a>
  
    <nav class="md-nav" aria-label="replace_value">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.replace_value(left)" class="md-nav__link">
    <span class="md-ellipsis">
      left
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.reducers.replace_value(right)" class="md-nav__link">
    <span class="md-ellipsis">
      right
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.stream_chunks" class="md-nav__link">
    <span class="md-ellipsis">
      stream_chunks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="stream_chunks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.stream_chunks-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.stream_chunks.StreamChunk" class="md-nav__link">
    <span class="md-ellipsis">
      StreamChunk
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StreamChunk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.stream_chunks.StreamChunk-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.stream_chunks.StreamChunk-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentflow.state.stream_chunks.StreamEvent" class="md-nav__link">
    <span class="md-ellipsis">
      StreamEvent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StreamEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentflow.state.stream_chunks.StreamEvent-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>State</h1>

<div class="doc doc-object doc-module">



<a id="agentflow.state"></a>
    <div class="doc doc-contents first">

        <p>State management for TAF agent graphs.</p>
<p>This package provides schemas and context managers for agent state, execution
tracking, and message context management. All core state classes are exported
for use in agent workflows and custom state extensions.</p>






<p><span class="doc-section-title">Modules:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            agent_state (agentflow.state.agent_state)" href="../#agentflow.state.agent_state">agent_state</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Agent state schema for TAF agent graphs.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            base_context (agentflow.state.base_context)" href="../#agentflow.state.base_context">base_context</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Abstract base class for context management in TAF agent graphs.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            execution_state (agentflow.state.execution_state)" href="../#agentflow.state.execution_state">execution_state</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Execution state management for graph execution in TAF.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            message (agentflow.state.message)" href="../#agentflow.state.message">message</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Message and content block primitives for agent graphs.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            message_block (agentflow.state.message_block)" href="../#agentflow.state.message_block">message_block</a></code></td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            message_context_manager (agentflow.state.message_context_manager)" href="../#agentflow.state.message_context_manager">message_context_manager</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Message context management for agent state in TAF.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            reducers (agentflow.state.reducers)" href="../#agentflow.state.reducers">reducers</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Reducer utilities for merging and replacing lists and values in agent state.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            stream_chunks (agentflow.state.stream_chunks)" href="../#agentflow.state.stream_chunks">stream_chunks</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Stream chunk primitives for unified streaming data handling.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>






<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            AgentState (agentflow.state.AgentState)" href="../#agentflow.state.AgentState">AgentState</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Common state schema that includes messages, context and internal execution metadata.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            AnnotationBlock (agentflow.state.AnnotationBlock)" href="../#agentflow.state.AnnotationBlock">AnnotationBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Annotation content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            AnnotationRef (agentflow.state.AnnotationRef)" href="../#agentflow.state.AnnotationRef">AnnotationRef</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Reference to annotation metadata (e.g., citation, note).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            AudioBlock (agentflow.state.AudioBlock)" href="../#agentflow.state.AudioBlock">AudioBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Audio content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            BaseContextManager (agentflow.state.BaseContextManager)" href="../#agentflow.state.BaseContextManager">BaseContextManager</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Abstract base class for context management in AI interactions.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            DataBlock (agentflow.state.DataBlock)" href="../#agentflow.state.DataBlock">DataBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Data content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            DocumentBlock (agentflow.state.DocumentBlock)" href="../#agentflow.state.DocumentBlock">DocumentBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Document content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ErrorBlock (agentflow.state.ErrorBlock)" href="../#agentflow.state.ErrorBlock">ErrorBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Error content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ExecutionState (agentflow.state.ExecutionState)" href="../#agentflow.state.ExecutionState">ExecutionState</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Tracks the internal execution state of a graph.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ExecutionStatus (agentflow.state.ExecutionStatus)" href="../#agentflow.state.ExecutionStatus">ExecutionStatus</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Status of graph execution.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ImageBlock (agentflow.state.ImageBlock)" href="../#agentflow.state.ImageBlock">ImageBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Image content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.MediaRef)" href="../#agentflow.state.MediaRef">MediaRef</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Reference to media content (image/audio/video/document/data).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            Message (agentflow.state.Message)" href="../#agentflow.state.Message">Message</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Represents a message in a conversation, including content, role, metadata, and token usage.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            MessageContextManager (agentflow.state.MessageContextManager)" href="../#agentflow.state.MessageContextManager">MessageContextManager</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Manages the context field for AI interactions.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ReasoningBlock (agentflow.state.ReasoningBlock)" href="../#agentflow.state.ReasoningBlock">ReasoningBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Reasoning content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            StreamChunk (agentflow.state.StreamChunk)" href="../#agentflow.state.StreamChunk">StreamChunk</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Unified wrapper for different types of streaming data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            StreamEvent (agentflow.state.StreamEvent)" href="../#agentflow.state.StreamEvent">StreamEvent</a></code></td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            TextBlock (agentflow.state.TextBlock)" href="../#agentflow.state.TextBlock">TextBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Text content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            TokenUsages (agentflow.state.TokenUsages)" href="../#agentflow.state.TokenUsages">TokenUsages</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Tracks token usage statistics for a message or model response.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ToolCallBlock (agentflow.state.ToolCallBlock)" href="../#agentflow.state.ToolCallBlock">ToolCallBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Tool call content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ToolResultBlock (agentflow.state.ToolResultBlock)" href="../#agentflow.state.ToolResultBlock">ToolResultBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Tool result content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            VideoBlock (agentflow.state.VideoBlock)" href="../#agentflow.state.VideoBlock">VideoBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Video content block for messages.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>




<p><span class="doc-section-title">Functions:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            add_messages (agentflow.state.add_messages)" href="../#agentflow.state.add_messages">add_messages</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Adds messages to the list, avoiding duplicates by message_id.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            append_items (agentflow.state.append_items)" href="../#agentflow.state.append_items">append_items</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Appends items to a list, avoiding duplicates by item.id.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            remove_tool_messages (agentflow.state.remove_tool_messages)" href="../#agentflow.state.remove_tool_messages">remove_tool_messages</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Remove COMPLETED tool interaction sequences from the message list.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            replace_messages (agentflow.state.replace_messages)" href="../#agentflow.state.replace_messages">replace_messages</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Replaces the entire message list with a new one.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            replace_value (agentflow.state.replace_value)" href="../#agentflow.state.replace_value">replace_value</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Replaces a value with another.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>




<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ContentBlock


  
      module-attribute
   (agentflow.state.ContentBlock)" href="../#agentflow.state.ContentBlock">ContentBlock</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>



  <div class="doc doc-children">





<h2 id="agentflow.state-attributes">Attributes<a href="#agentflow.state-attributes" class="headerlink" title="Permanent link">&para;</a></h2>

<div class="doc doc-object doc-attribute">



<h3 id="agentflow.state.ContentBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">ContentBlock</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#agentflow.state.ContentBlock" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ContentBlock</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">TextBlock</span><span class="p">,</span> <span class="n">ImageBlock</span><span class="p">,</span> <span class="n">AudioBlock</span><span class="p">,</span> <span class="n">VideoBlock</span><span class="p">,</span> <span class="n">DocumentBlock</span><span class="p">,</span> <span class="n">DataBlock</span><span class="p">,</span> <span class="n">ToolCallBlock</span><span class="p">,</span> <span class="n">RemoteToolCallBlock</span><span class="p">,</span> <span class="n">ToolResultBlock</span><span class="p">,</span> <span class="n">ReasoningBlock</span><span class="p">,</span> <span class="n">AnnotationBlock</span><span class="p">,</span> <span class="n">ErrorBlock</span><span class="p">],</span> <span class="n">Field</span><span class="p">(</span><span class="n">discriminator</span><span class="o">=</span><span class="s1">&#39;type&#39;</span><span class="p">)]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="agentflow.state.__all__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">__all__</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#agentflow.state.__all__" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AgentState&#39;</span><span class="p">,</span> <span class="s1">&#39;AnnotationBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;AnnotationRef&#39;</span><span class="p">,</span> <span class="s1">&#39;AudioBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;BaseContextManager&#39;</span><span class="p">,</span> <span class="s1">&#39;ContentBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;DataBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;DocumentBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;ErrorBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;ExecutionState&#39;</span><span class="p">,</span> <span class="s1">&#39;ExecutionStatus&#39;</span><span class="p">,</span> <span class="s1">&#39;ImageBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;MediaRef&#39;</span><span class="p">,</span> <span class="s1">&#39;Message&#39;</span><span class="p">,</span> <span class="s1">&#39;MessageContextManager&#39;</span><span class="p">,</span> <span class="s1">&#39;ReasoningBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;StreamChunk&#39;</span><span class="p">,</span> <span class="s1">&#39;StreamEvent&#39;</span><span class="p">,</span> <span class="s1">&#39;TextBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;TextBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;TokenUsages&#39;</span><span class="p">,</span> <span class="s1">&#39;ToolCallBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;ToolResultBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;VideoBlock&#39;</span><span class="p">,</span> <span class="s1">&#39;add_messages&#39;</span><span class="p">,</span> <span class="s1">&#39;append_items&#39;</span><span class="p">,</span> <span class="s1">&#39;remove_tool_messages&#39;</span><span class="p">,</span> <span class="s1">&#39;replace_messages&#39;</span><span class="p">,</span> <span class="s1">&#39;replace_value&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<h2 id="agentflow.state-classes">Classes<a href="#agentflow.state-classes" class="headerlink" title="Permanent link">&para;</a></h2>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.AgentState" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AgentState</span>


<a href="#agentflow.state.AgentState" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Common state schema that includes messages, context and internal execution metadata.</p>
<p>This class can be subclassed to add application-specific fields while maintaining
compatibility with the TAF framework. All internal execution metadata
is preserved through subclassing.</p>
<p>Notes:
- <code>execution_meta</code> contains internal-only execution progress and interrupt info.
- Users may subclass <code>AgentState</code> to add application fields; internal exec meta remains
  available to the runtime and will be persisted with the state.
- When subclassing, add your fields but keep the core fields intact.</p>


<details class="example" open>
  <summary>Example</summary>
  <p>class MyCustomState(AgentState):
    user_data: dict = Field(default_factory=dict)
    custom_field: str = "default"</p>
</details>











<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            advance_step (agentflow.state.AgentState.advance_step)" href="../#agentflow.state.AgentState.advance_step">advance_step</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Advance the execution step in the metadata.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            clear_interrupt (agentflow.state.AgentState.clear_interrupt)" href="../#agentflow.state.AgentState.clear_interrupt">clear_interrupt</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Clear any interrupt in the execution metadata.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            complete (agentflow.state.AgentState.complete)" href="../#agentflow.state.AgentState.complete">complete</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Mark the agent state as completed.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            error (agentflow.state.AgentState.error)" href="../#agentflow.state.AgentState.error">error</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Mark the agent state as errored.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_interrupted (agentflow.state.AgentState.is_interrupted)" href="../#agentflow.state.AgentState.is_interrupted">is_interrupted</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if the agent state is currently interrupted.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_running (agentflow.state.AgentState.is_running)" href="../#agentflow.state.AgentState.is_running">is_running</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if the agent state is currently running.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_stopped_requested (agentflow.state.AgentState.is_stopped_requested)" href="../#agentflow.state.AgentState.is_stopped_requested">is_stopped_requested</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if a stop has been requested for the agent state.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            set_current_node (agentflow.state.AgentState.set_current_node)" href="../#agentflow.state.AgentState.set_current_node">set_current_node</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Set the current node in the execution metadata.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            set_interrupt (agentflow.state.AgentState.set_interrupt)" href="../#agentflow.state.AgentState.set_interrupt">set_interrupt</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Set an interrupt in the execution metadata.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>




<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            context


  
      class-attribute
      instance-attribute
   (agentflow.state.AgentState.context)" href="../#agentflow.state.AgentState.context">context</a></code></td>
            <td>
                  <code><span title="typing.Annotated">Annotated</span>[<span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>], <a class="autorefs autorefs-internal" title="            add_messages (agentflow.state.reducers.add_messages)" href="../#agentflow.state.reducers.add_messages">add_messages</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            context_summary


  
      class-attribute
      instance-attribute
   (agentflow.state.AgentState.context_summary)" href="../#agentflow.state.AgentState.context_summary">context_summary</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            execution_meta


  
      class-attribute
      instance-attribute
   (agentflow.state.AgentState.execution_meta)" href="../#agentflow.state.AgentState.execution_meta">execution_meta</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ExecutionState (agentflow.state.execution_state.ExecutionState)" href="../#agentflow.state.execution_state.ExecutionState">ExecutionState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AgentState</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Common state schema that includes messages, context and internal execution metadata.</span>

<span class="sd">    This class can be subclassed to add application-specific fields while maintaining</span>
<span class="sd">    compatibility with the TAF framework. All internal execution metadata</span>
<span class="sd">    is preserved through subclassing.</span>

<span class="sd">    Notes:</span>
<span class="sd">    - `execution_meta` contains internal-only execution progress and interrupt info.</span>
<span class="sd">    - Users may subclass `AgentState` to add application fields; internal exec meta remains</span>
<span class="sd">      available to the runtime and will be persisted with the state.</span>
<span class="sd">    - When subclassing, add your fields but keep the core fields intact.</span>

<span class="sd">    Example:</span>
<span class="sd">        class MyCustomState(AgentState):</span>
<span class="sd">            user_data: dict = Field(default_factory=dict)</span>
<span class="sd">            custom_field: str = &quot;default&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">context</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">],</span> <span class="n">add_messages</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">context_summary</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Internal execution metadata (kept private-ish but accessible to runtime)</span>
    <span class="n">execution_meta</span><span class="p">:</span> <span class="n">ExecMeta</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">ExecMeta</span><span class="p">(</span><span class="n">current_node</span><span class="o">=</span><span class="n">START</span><span class="p">))</span>

    <span class="c1"># Convenience delegation methods for execution meta so callers can use the same API</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set an interrupt in the execution metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            node (str): Node where the interrupt occurred.</span>
<span class="sd">            reason (str): Reason for the interrupt.</span>
<span class="sd">            status: Execution status to set.</span>
<span class="sd">            data (dict | None): Optional additional interrupt data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Setting interrupt at node &#39;</span><span class="si">%s</span><span class="s2">&#39; with reason: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">set_interrupt</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clear any interrupt in the execution metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing interrupt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">clear_interrupt</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_running</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the agent state is currently running.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if running, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">running</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_running</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_running: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">running</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">running</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_interrupted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the agent state is currently interrupted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if interrupted, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">interrupted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_interrupted</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_interrupted: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">interrupted</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">interrupted</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">advance_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Advance the execution step in the metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">step</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">advance_step</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Advanced step from </span><span class="si">%d</span><span class="s2"> to </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">old_step</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_current_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the current node in the execution metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            node (str): Node to set as current.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">current_node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">set_current_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Changed current node from &#39;</span><span class="si">%s</span><span class="s2">&#39; to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">old_node</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark the agent state as completed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Marking state as completed&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark the agent state as errored.</span>

<span class="sd">        Args:</span>
<span class="sd">            error_msg (str): Error message to record.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Setting state error: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_stopped_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if a stop has been requested for the agent state.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if stop requested, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stopped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_stopped_requested</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_stopped_requested: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">stopped</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">stopped</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.AgentState-attributes">Attributes<a href="#agentflow.state.AgentState-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AgentState.context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">context</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AgentState.context" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">context</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AgentState.context_summary" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">context_summary</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AgentState.context_summary" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">context_summary</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AgentState.execution_meta" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">execution_meta</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AgentState.execution_meta" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">execution_meta</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">ExecutionState</span><span class="p">(</span><span class="n">current_node</span><span class="o">=</span><span class="n">START</span><span class="p">))</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>


<h4 id="agentflow.state.AgentState-functions">Functions<a href="#agentflow.state.AgentState-functions" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.AgentState.advance_step" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">advance_step</span>


<a href="#agentflow.state.AgentState.advance_step" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">advance_step</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Advance the execution step in the metadata.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">advance_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Advance the execution step in the metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">old_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">step</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">advance_step</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Advanced step from </span><span class="si">%d</span><span class="s2"> to </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">old_step</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.AgentState.clear_interrupt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">clear_interrupt</span>


<a href="#agentflow.state.AgentState.clear_interrupt" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">clear_interrupt</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Clear any interrupt in the execution metadata.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clear any interrupt in the execution metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing interrupt&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">clear_interrupt</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.AgentState.complete" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">complete</span>


<a href="#agentflow.state.AgentState.complete" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">complete</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Mark the agent state as completed.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mark the agent state as completed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Marking state as completed&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.AgentState.error" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">error</span>


<a href="#agentflow.state.AgentState.error" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Mark the agent state as errored.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.AgentState.error(error_msg)" class="doc doc-heading doc-heading-parameter">                  <code>error_msg</code>
<a href="#agentflow.state.AgentState.error(error_msg)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error message to record.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mark the agent state as errored.</span>

<span class="sd">    Args:</span>
<span class="sd">        error_msg (str): Error message to record.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Setting state error: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.AgentState.is_interrupted" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_interrupted</span>


<a href="#agentflow.state.AgentState.is_interrupted" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_interrupted</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if the agent state is currently interrupted.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if interrupted, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_interrupted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the agent state is currently interrupted.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if interrupted, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">interrupted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_interrupted</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_interrupted: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">interrupted</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">interrupted</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.AgentState.is_running" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_running</span>


<a href="#agentflow.state.AgentState.is_running" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_running</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if the agent state is currently running.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if running, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_running</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the agent state is currently running.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if running, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">running</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_running</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_running: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">running</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">running</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.AgentState.is_stopped_requested" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_stopped_requested</span>


<a href="#agentflow.state.AgentState.is_stopped_requested" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_stopped_requested</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if a stop has been requested for the agent state.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if stop requested, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_stopped_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if a stop has been requested for the agent state.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if stop requested, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stopped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_stopped_requested</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_stopped_requested: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">stopped</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stopped</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.AgentState.set_current_node" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_current_node</span>


<a href="#agentflow.state.AgentState.set_current_node" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_current_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the current node in the execution metadata.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.AgentState.set_current_node(node)" class="doc doc-heading doc-heading-parameter">                  <code>node</code>
<a href="#agentflow.state.AgentState.set_current_node(node)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Node to set as current.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_current_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the current node in the execution metadata.</span>

<span class="sd">    Args:</span>
<span class="sd">        node (str): Node to set as current.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">old_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">current_node</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">set_current_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Changed current node from &#39;</span><span class="si">%s</span><span class="s2">&#39; to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">old_node</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.AgentState.set_interrupt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_interrupt</span>


<a href="#agentflow.state.AgentState.set_interrupt" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_interrupt</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set an interrupt in the execution metadata.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.AgentState.set_interrupt(node)" class="doc doc-heading doc-heading-parameter">                  <code>node</code>
<a href="#agentflow.state.AgentState.set_interrupt(node)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Node where the interrupt occurred.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.AgentState.set_interrupt(reason)" class="doc doc-heading doc-heading-parameter">                  <code>reason</code>
<a href="#agentflow.state.AgentState.set_interrupt(reason)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reason for the interrupt.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.AgentState.set_interrupt(status)" class="doc doc-heading doc-heading-parameter">                  <code>status</code>
<a href="#agentflow.state.AgentState.set_interrupt(status)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Execution status to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.AgentState.set_interrupt(data)" class="doc doc-heading doc-heading-parameter">                  <code>data</code>
<a href="#agentflow.state.AgentState.set_interrupt(data)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional additional interrupt data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set an interrupt in the execution metadata.</span>

<span class="sd">    Args:</span>
<span class="sd">        node (str): Node where the interrupt occurred.</span>
<span class="sd">        reason (str): Reason for the interrupt.</span>
<span class="sd">        status: Execution status to set.</span>
<span class="sd">        data (dict | None): Optional additional interrupt data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Setting interrupt at node &#39;</span><span class="si">%s</span><span class="s2">&#39; with reason: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">set_interrupt</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.AnnotationBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AnnotationBlock</span>


<a href="#agentflow.state.AnnotationBlock" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Annotation content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.AnnotationBlock.type)" href="../#agentflow.state.AnnotationBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;annotation&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            kind


  
      class-attribute
      instance-attribute
   (agentflow.state.AnnotationBlock.kind)" href="../#agentflow.state.AnnotationBlock.kind">kind</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;citation&#39;, &#39;note&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Kind of annotation.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            refs


  
      class-attribute
      instance-attribute
   (agentflow.state.AnnotationBlock.refs)" href="../#agentflow.state.AnnotationBlock.refs">refs</a></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            AnnotationRef (agentflow.state.message_block.AnnotationRef)" href="../#agentflow.state.message_block.AnnotationRef">AnnotationRef</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of annotation references.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            spans


  
      class-attribute
      instance-attribute
   (agentflow.state.AnnotationBlock.spans)" href="../#agentflow.state.AnnotationBlock.spans">spans</a></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="int">int</span>, <span title="int">int</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spans covered by the annotation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AnnotationBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Annotation content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;annotation&quot;]): Block type discriminator.</span>
<span class="sd">        kind (Literal[&quot;citation&quot;, &quot;note&quot;]): Kind of annotation.</span>
<span class="sd">        refs (list[AnnotationRef]): List of annotation references.</span>
<span class="sd">        spans (list[tuple[int, int]] | None): Spans covered by the annotation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;annotation&quot;</span>
    <span class="n">kind</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;citation&quot;</span><span class="p">,</span> <span class="s2">&quot;note&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;citation&quot;</span>
    <span class="n">refs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AnnotationRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">spans</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.AnnotationBlock-attributes">Attributes<a href="#agentflow.state.AnnotationBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AnnotationBlock.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AnnotationBlock.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;citation&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AnnotationBlock.refs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">refs</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AnnotationBlock.refs" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">refs</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AnnotationBlock.spans" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">spans</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AnnotationBlock.spans" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">spans</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AnnotationBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AnnotationBlock.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;annotation&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.AnnotationRef" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AnnotationRef</span>


<a href="#agentflow.state.AnnotationRef" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Reference to annotation metadata (e.g., citation, note).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            url


  
      class-attribute
      instance-attribute
   (agentflow.state.AnnotationRef.url)" href="../#agentflow.state.AnnotationRef.url">url</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL to annotation source.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            file_id


  
      class-attribute
      instance-attribute
   (agentflow.state.AnnotationRef.file_id)" href="../#agentflow.state.AnnotationRef.file_id">file_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Provider-managed file ID.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            page


  
      class-attribute
      instance-attribute
   (agentflow.state.AnnotationRef.page)" href="../#agentflow.state.AnnotationRef.page">page</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page number (if applicable).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            index


  
      class-attribute
      instance-attribute
   (agentflow.state.AnnotationRef.index)" href="../#agentflow.state.AnnotationRef.index">index</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index within the annotation source.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            title


  
      class-attribute
      instance-attribute
   (agentflow.state.AnnotationRef.title)" href="../#agentflow.state.AnnotationRef.title">title</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Title of the annotation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AnnotationRef</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reference to annotation metadata (e.g., citation, note).</span>

<span class="sd">    Attributes:</span>
<span class="sd">        url (str | None): URL to annotation source.</span>
<span class="sd">        file_id (str | None): Provider-managed file ID.</span>
<span class="sd">        page (int | None): Page number (if applicable).</span>
<span class="sd">        index (int | None): Index within the annotation source.</span>
<span class="sd">        title (str | None): Title of the annotation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">file_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.AnnotationRef-attributes">Attributes<a href="#agentflow.state.AnnotationRef-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AnnotationRef.file_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">file_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AnnotationRef.file_id" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_id</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AnnotationRef.index" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">index</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AnnotationRef.index" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">index</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AnnotationRef.page" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">page</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AnnotationRef.page" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">page</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AnnotationRef.title" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">title</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AnnotationRef.title" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">title</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AnnotationRef.url" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">url</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AnnotationRef.url" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">url</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.AudioBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AudioBlock</span>


<a href="#agentflow.state.AudioBlock" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Audio content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.AudioBlock.type)" href="../#agentflow.state.AudioBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;audio&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            media


  
      instance-attribute
   (agentflow.state.AudioBlock.media)" href="../#agentflow.state.AudioBlock.media">media</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to audio media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            transcript


  
      class-attribute
      instance-attribute
   (agentflow.state.AudioBlock.transcript)" href="../#agentflow.state.AudioBlock.transcript">transcript</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transcript of audio.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            sample_rate


  
      class-attribute
      instance-attribute
   (agentflow.state.AudioBlock.sample_rate)" href="../#agentflow.state.AudioBlock.sample_rate">sample_rate</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Sample rate in Hz.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            channels


  
      class-attribute
      instance-attribute
   (agentflow.state.AudioBlock.channels)" href="../#agentflow.state.AudioBlock.channels">channels</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of audio channels.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AudioBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Audio content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;audio&quot;]): Block type discriminator.</span>
<span class="sd">        media (MediaRef): Reference to audio media.</span>
<span class="sd">        transcript (str | None): Transcript of audio.</span>
<span class="sd">        sample_rate (int | None): Sample rate in Hz.</span>
<span class="sd">        channels (int | None): Number of audio channels.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;audio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;audio&quot;</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span>
    <span class="n">transcript</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sample_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">channels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.AudioBlock-attributes">Attributes<a href="#agentflow.state.AudioBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AudioBlock.channels" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">channels</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AudioBlock.channels" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">channels</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AudioBlock.media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">media</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AudioBlock.media" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">media</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AudioBlock.sample_rate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">sample_rate</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AudioBlock.sample_rate" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">sample_rate</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AudioBlock.transcript" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">transcript</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AudioBlock.transcript" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">transcript</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.AudioBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.AudioBlock.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;audio&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.BaseContextManager" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseContextManager</span>


<a href="#agentflow.state.BaseContextManager" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Abstract base class for context management in AI interactions.</p>
<p>Subclasses should implement <code>trim_context</code> as either a synchronous or asynchronous method.
Generic over AgentState or its subclasses.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            atrim_context


  
      abstractmethod
      async
   (agentflow.state.BaseContextManager.atrim_context)" href="../#agentflow.state.BaseContextManager.atrim_context">atrim_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Trim context based on message count asynchronously.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            trim_context


  
      abstractmethod
   (agentflow.state.BaseContextManager.trim_context)" href="../#agentflow.state.BaseContextManager.trim_context">trim_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Trim context based on message count. Can be sync or async.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>agentflow/state/base_context.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseContextManager</span><span class="p">[</span><span class="n">S</span><span class="p">](</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for context management in AI interactions.</span>

<span class="sd">    Subclasses should implement `trim_context` as either a synchronous or asynchronous method.</span>
<span class="sd">    Generic over AgentState or its subclasses.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">trim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Trim context based on message count. Can be sync or async.</span>

<span class="sd">        Subclasses may implement as either a synchronous or asynchronous method.</span>

<span class="sd">        Args:</span>
<span class="sd">            state: The state containing context to be trimmed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The state with trimmed context, either directly or as an awaitable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method (sync or async)&quot;</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">atrim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Trim context based on message count asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            state: The state containing context to be trimmed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The state with trimmed context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">








<h4 id="agentflow.state.BaseContextManager-functions">Functions<a href="#agentflow.state.BaseContextManager-functions" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.BaseContextManager.atrim_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">atrim_context</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentflow.state.BaseContextManager.atrim_context" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">atrim_context</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Trim context based on message count asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.BaseContextManager.atrim_context(state)" class="doc doc-heading doc-heading-parameter">                  <code>state</code>
<a href="#agentflow.state.BaseContextManager.atrim_context(state)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="agentflow.state.base_context.BaseContextManager[S]">S</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The state containing context to be trimmed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="agentflow.state.base_context.BaseContextManager[S]">S</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The state with trimmed context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/base_context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">atrim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Trim context based on message count asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        state: The state containing context to be trimmed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The state with trimmed context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.BaseContextManager.trim_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">trim_context</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#agentflow.state.BaseContextManager.trim_context" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">trim_context</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Trim context based on message count. Can be sync or async.</p>
<p>Subclasses may implement as either a synchronous or asynchronous method.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.BaseContextManager.trim_context(state)" class="doc doc-heading doc-heading-parameter">                  <code>state</code>
<a href="#agentflow.state.BaseContextManager.trim_context(state)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="agentflow.state.base_context.BaseContextManager[S]">S</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The state containing context to be trimmed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="agentflow.state.base_context.BaseContextManager[S]">S</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The state with trimmed context, either directly or as an awaitable.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/base_context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">trim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Trim context based on message count. Can be sync or async.</span>

<span class="sd">    Subclasses may implement as either a synchronous or asynchronous method.</span>

<span class="sd">    Args:</span>
<span class="sd">        state: The state containing context to be trimmed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The state with trimmed context, either directly or as an awaitable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method (sync or async)&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.DataBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">DataBlock</span>


<a href="#agentflow.state.DataBlock" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Data content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.DataBlock.type)" href="../#agentflow.state.DataBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;data&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            mime_type


  
      instance-attribute
   (agentflow.state.DataBlock.mime_type)" href="../#agentflow.state.DataBlock.mime_type">mime_type</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>MIME type of the data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            data_base64


  
      class-attribute
      instance-attribute
   (agentflow.state.DataBlock.data_base64)" href="../#agentflow.state.DataBlock.data_base64">data_base64</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Base64-encoded data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            media


  
      class-attribute
      instance-attribute
   (agentflow.state.DataBlock.media)" href="../#agentflow.state.DataBlock.media">media</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to associated media.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DataBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Data content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;data&quot;]): Block type discriminator.</span>
<span class="sd">        mime_type (str): MIME type of the data.</span>
<span class="sd">        data_base64 (str | None): Base64-encoded data.</span>
<span class="sd">        media (MediaRef | None): Reference to associated media.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span>
    <span class="n">mime_type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">data_base64</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.DataBlock-attributes">Attributes<a href="#agentflow.state.DataBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.DataBlock.data_base64" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data_base64</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.DataBlock.data_base64" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data_base64</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.DataBlock.media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">media</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.DataBlock.media" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">media</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.DataBlock.mime_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">mime_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.DataBlock.mime_type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">mime_type</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.DataBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.DataBlock.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.DocumentBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">DocumentBlock</span>


<a href="#agentflow.state.DocumentBlock" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Document content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.DocumentBlock.type)" href="../#agentflow.state.DocumentBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;document&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            media


  
      instance-attribute
   (agentflow.state.DocumentBlock.media)" href="../#agentflow.state.DocumentBlock.media">media</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to document media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            pages


  
      class-attribute
      instance-attribute
   (agentflow.state.DocumentBlock.pages)" href="../#agentflow.state.DocumentBlock.pages">pages</a></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="int">int</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of page numbers.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            excerpt


  
      class-attribute
      instance-attribute
   (agentflow.state.DocumentBlock.excerpt)" href="../#agentflow.state.DocumentBlock.excerpt">excerpt</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Excerpt from the document.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DocumentBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Document content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;document&quot;]): Block type discriminator.</span>
<span class="sd">        media (MediaRef): Reference to document media.</span>
<span class="sd">        pages (list[int] | None): List of page numbers.</span>
<span class="sd">        excerpt (str | None): Excerpt from the document.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;document&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;document&quot;</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span>
    <span class="n">pages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">excerpt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.DocumentBlock-attributes">Attributes<a href="#agentflow.state.DocumentBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.DocumentBlock.excerpt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">excerpt</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.DocumentBlock.excerpt" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">excerpt</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.DocumentBlock.media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">media</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.DocumentBlock.media" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">media</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.DocumentBlock.pages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">pages</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.DocumentBlock.pages" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">pages</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.DocumentBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.DocumentBlock.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;document&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.ErrorBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ErrorBlock</span>


<a href="#agentflow.state.ErrorBlock" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Error content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.ErrorBlock.type)" href="../#agentflow.state.ErrorBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;error&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            message


  
      instance-attribute
   (agentflow.state.ErrorBlock.message)" href="../#agentflow.state.ErrorBlock.message">message</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error message.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            code


  
      class-attribute
      instance-attribute
   (agentflow.state.ErrorBlock.code)" href="../#agentflow.state.ErrorBlock.code">code</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error code.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            data


  
      class-attribute
      instance-attribute
   (agentflow.state.ErrorBlock.data)" href="../#agentflow.state.ErrorBlock.data">data</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional error data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ErrorBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Error content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;error&quot;]): Block type discriminator.</span>
<span class="sd">        message (str): Error message.</span>
<span class="sd">        code (str | None): Error code.</span>
<span class="sd">        data (dict[str, Any] | None): Additional error data.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">code</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.ErrorBlock-attributes">Attributes<a href="#agentflow.state.ErrorBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ErrorBlock.code" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">code</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ErrorBlock.code" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">code</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ErrorBlock.data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ErrorBlock.data" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ErrorBlock.message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">message</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ErrorBlock.message" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">message</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ErrorBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ErrorBlock.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.ExecutionState" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ExecutionState</span>


<a href="#agentflow.state.ExecutionState" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Tracks the internal execution state of a graph.</p>
<p>This class manages the execution progress, interrupt status, and internal
data that should not be exposed to users.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            advance_step (agentflow.state.ExecutionState.advance_step)" href="../#agentflow.state.ExecutionState.advance_step">advance_step</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Advance to the next execution step.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            clear_interrupt (agentflow.state.ExecutionState.clear_interrupt)" href="../#agentflow.state.ExecutionState.clear_interrupt">clear_interrupt</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Clear the interrupt state and resume execution.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            complete (agentflow.state.ExecutionState.complete)" href="../#agentflow.state.ExecutionState.complete">complete</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Mark execution as completed.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            error (agentflow.state.ExecutionState.error)" href="../#agentflow.state.ExecutionState.error">error</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Mark execution as errored.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            from_dict


  
      classmethod
   (agentflow.state.ExecutionState.from_dict)" href="../#agentflow.state.ExecutionState.from_dict">from_dict</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Create an ExecutionState instance from a dictionary.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_interrupted (agentflow.state.ExecutionState.is_interrupted)" href="../#agentflow.state.ExecutionState.is_interrupted">is_interrupted</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if execution is currently interrupted.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_running (agentflow.state.ExecutionState.is_running)" href="../#agentflow.state.ExecutionState.is_running">is_running</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if execution is currently running.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_stopped_requested (agentflow.state.ExecutionState.is_stopped_requested)" href="../#agentflow.state.ExecutionState.is_stopped_requested">is_stopped_requested</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if a stop has been requested for execution.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            set_current_node (agentflow.state.ExecutionState.set_current_node)" href="../#agentflow.state.ExecutionState.set_current_node">set_current_node</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Update the current node in execution state.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            set_interrupt (agentflow.state.ExecutionState.set_interrupt)" href="../#agentflow.state.ExecutionState.set_interrupt">set_interrupt</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Set the interrupt state for execution.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>




<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            current_node


  
      instance-attribute
   (agentflow.state.ExecutionState.current_node)" href="../#agentflow.state.ExecutionState.current_node">current_node</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            internal_data


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionState.internal_data)" href="../#agentflow.state.ExecutionState.internal_data">internal_data</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            interrupt_data


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionState.interrupt_data)" href="../#agentflow.state.ExecutionState.interrupt_data">interrupt_data</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            interrupt_reason


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionState.interrupt_reason)" href="../#agentflow.state.ExecutionState.interrupt_reason">interrupt_reason</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            interrupted_node


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionState.interrupted_node)" href="../#agentflow.state.ExecutionState.interrupted_node">interrupted_node</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            status


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionState.status)" href="../#agentflow.state.ExecutionState.status">status</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ExecutionStatus (agentflow.state.execution_state.ExecutionStatus)" href="../#agentflow.state.execution_state.ExecutionStatus">ExecutionStatus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            step


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionState.step)" href="../#agentflow.state.ExecutionState.step">step</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            stop_current_execution


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionState.stop_current_execution)" href="../#agentflow.state.ExecutionState.stop_current_execution">stop_current_execution</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            StopRequestStatus (agentflow.state.execution_state.StopRequestStatus)" href="../#agentflow.state.execution_state.StopRequestStatus">StopRequestStatus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            thread_id


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionState.thread_id)" href="../#agentflow.state.ExecutionState.thread_id">thread_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExecutionState</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tracks the internal execution state of a graph.</span>

<span class="sd">    This class manages the execution progress, interrupt status, and internal</span>
<span class="sd">    data that should not be exposed to users.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Core execution tracking</span>
    <span class="n">current_node</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">step</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">ExecutionStatus</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>

    <span class="c1"># Interrupt management</span>
    <span class="n">interrupted_node</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">interrupt_reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">interrupt_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Thread/session identification</span>
    <span class="n">thread_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Stop Current Execution Flag</span>
    <span class="n">stop_current_execution</span><span class="p">:</span> <span class="n">StopRequestStatus</span> <span class="o">=</span> <span class="n">StopRequestStatus</span><span class="o">.</span><span class="n">NONE</span>

    <span class="c1"># Internal execution data (hidden from user)</span>
    <span class="n">internal_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;ExecutionState&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an ExecutionState instance from a dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (dict[str, Any]): Dictionary containing execution state fields.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ExecutionState: The deserialized execution state object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;current_node&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;current_node&quot;</span><span class="p">],</span>
                <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">ExecutionStatus</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;running&quot;</span><span class="p">)),</span>
                <span class="s2">&quot;interrupted_node&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupted_node&quot;</span><span class="p">),</span>
                <span class="s2">&quot;interrupt_reason&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupt_reason&quot;</span><span class="p">),</span>
                <span class="s2">&quot;interrupt_data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupt_data&quot;</span><span class="p">),</span>
                <span class="s2">&quot;thread_id&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;thread_id&quot;</span><span class="p">),</span>
                <span class="s2">&quot;internal_data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_internal_data&quot;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_interrupt</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="n">ExecutionStatus</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the interrupt state for execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            node (str): Node where the interrupt occurred.</span>
<span class="sd">            reason (str): Reason for the interrupt.</span>
<span class="sd">            status (ExecutionStatus): Status to set for the interrupt.</span>
<span class="sd">            data (dict[str, Any] | None): Optional additional interrupt data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Setting interrupt: node=&#39;</span><span class="si">%s</span><span class="s2">&#39;, reason=&#39;</span><span class="si">%s</span><span class="s2">&#39;, status=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
            <span class="n">node</span><span class="p">,</span>
            <span class="n">reason</span><span class="p">,</span>
            <span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupted_node</span> <span class="o">=</span> <span class="n">node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_reason</span> <span class="o">=</span> <span class="n">reason</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_data</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clear the interrupt state and resume execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing interrupt, resuming execution&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupted_node</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_reason</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_data</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_interrupted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if execution is currently interrupted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if interrupted, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">interrupted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">INTERRUPTED_BEFORE</span><span class="p">,</span>
            <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">INTERRUPTED_AFTER</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Execution is_interrupted: </span><span class="si">%s</span><span class="s2"> (status: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">interrupted</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">interrupted</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">advance_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Advance to the next execution step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Advanced step from </span><span class="si">%d</span><span class="s2"> to </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">old_step</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_current_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the current node in execution state.</span>

<span class="sd">        Args:</span>
<span class="sd">            node (str): Node to set as current.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_node</span> <span class="o">=</span> <span class="n">node</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Changed current node from &#39;</span><span class="si">%s</span><span class="s2">&#39; to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">old_node</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark execution as completed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Marking execution as completed&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">COMPLETED</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark execution as errored.</span>

<span class="sd">        Args:</span>
<span class="sd">            error_msg (str): Error message to record.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Marking execution as errored: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">ERROR</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">internal_data</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">error_msg</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_running</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if execution is currently running.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if running, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">running</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Execution is_running: </span><span class="si">%s</span><span class="s2"> (status: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">running</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">running</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_stopped_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if a stop has been requested for execution.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if stop requested, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stopped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_current_execution</span> <span class="o">==</span> <span class="n">StopRequestStatus</span><span class="o">.</span><span class="n">STOP_REQUESTED</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Execution is_stopped_requested: </span><span class="si">%s</span><span class="s2"> (stop_current_execution: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="n">stopped</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stop_current_execution</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">stopped</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.ExecutionState-attributes">Attributes<a href="#agentflow.state.ExecutionState-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionState.current_node" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">current_node</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionState.current_node" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">current_node</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionState.internal_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">internal_data</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionState.internal_data" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">internal_data</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionState.interrupt_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">interrupt_data</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionState.interrupt_data" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interrupt_data</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionState.interrupt_reason" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">interrupt_reason</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionState.interrupt_reason" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interrupt_reason</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionState.interrupted_node" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">interrupted_node</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionState.interrupted_node" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interrupted_node</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionState.status" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">status</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionState.status" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">status</span> <span class="o">=</span> <span class="n">RUNNING</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionState.step" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">step</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionState.step" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionState.stop_current_execution" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">stop_current_execution</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionState.stop_current_execution" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">stop_current_execution</span> <span class="o">=</span> <span class="n">NONE</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionState.thread_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">thread_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionState.thread_id" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">thread_id</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>


<h4 id="agentflow.state.ExecutionState-functions">Functions<a href="#agentflow.state.ExecutionState-functions" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.ExecutionState.advance_step" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">advance_step</span>


<a href="#agentflow.state.ExecutionState.advance_step" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">advance_step</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Advance to the next execution step.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">advance_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Advance to the next execution step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">old_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Advanced step from </span><span class="si">%d</span><span class="s2"> to </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">old_step</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.ExecutionState.clear_interrupt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">clear_interrupt</span>


<a href="#agentflow.state.ExecutionState.clear_interrupt" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">clear_interrupt</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Clear the interrupt state and resume execution.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clear the interrupt state and resume execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing interrupt, resuming execution&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupted_node</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_reason</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_data</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.ExecutionState.complete" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">complete</span>


<a href="#agentflow.state.ExecutionState.complete" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">complete</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Mark execution as completed.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mark execution as completed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Marking execution as completed&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">COMPLETED</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.ExecutionState.error" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">error</span>


<a href="#agentflow.state.ExecutionState.error" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Mark execution as errored.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.ExecutionState.error(error_msg)" class="doc doc-heading doc-heading-parameter">                  <code>error_msg</code>
<a href="#agentflow.state.ExecutionState.error(error_msg)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error message to record.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mark execution as errored.</span>

<span class="sd">    Args:</span>
<span class="sd">        error_msg (str): Error message to record.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Marking execution as errored: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">ERROR</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">internal_data</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">error_msg</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.ExecutionState.from_dict" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">from_dict</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#agentflow.state.ExecutionState.from_dict" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create an ExecutionState instance from a dictionary.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.ExecutionState.from_dict(data)" class="doc doc-heading doc-heading-parameter">                  <code>data</code>
<a href="#agentflow.state.ExecutionState.from_dict(data)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary containing execution state fields.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ExecutionState</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            ExecutionState (agentflow.state.execution_state.ExecutionState)" href="../#agentflow.state.execution_state.ExecutionState">ExecutionState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The deserialized execution state object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;ExecutionState&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an ExecutionState instance from a dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (dict[str, Any]): Dictionary containing execution state fields.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ExecutionState: The deserialized execution state object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;current_node&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;current_node&quot;</span><span class="p">],</span>
            <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">ExecutionStatus</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;running&quot;</span><span class="p">)),</span>
            <span class="s2">&quot;interrupted_node&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupted_node&quot;</span><span class="p">),</span>
            <span class="s2">&quot;interrupt_reason&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupt_reason&quot;</span><span class="p">),</span>
            <span class="s2">&quot;interrupt_data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupt_data&quot;</span><span class="p">),</span>
            <span class="s2">&quot;thread_id&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;thread_id&quot;</span><span class="p">),</span>
            <span class="s2">&quot;internal_data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_internal_data&quot;</span><span class="p">,</span> <span class="p">{}),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.ExecutionState.is_interrupted" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_interrupted</span>


<a href="#agentflow.state.ExecutionState.is_interrupted" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_interrupted</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if execution is currently interrupted.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if interrupted, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_interrupted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if execution is currently interrupted.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if interrupted, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">interrupted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="ow">in</span> <span class="p">[</span>
        <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">INTERRUPTED_BEFORE</span><span class="p">,</span>
        <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">INTERRUPTED_AFTER</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Execution is_interrupted: </span><span class="si">%s</span><span class="s2"> (status: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">interrupted</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">interrupted</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.ExecutionState.is_running" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_running</span>


<a href="#agentflow.state.ExecutionState.is_running" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_running</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if execution is currently running.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if running, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_running</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if execution is currently running.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if running, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">running</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Execution is_running: </span><span class="si">%s</span><span class="s2"> (status: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">running</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">running</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.ExecutionState.is_stopped_requested" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_stopped_requested</span>


<a href="#agentflow.state.ExecutionState.is_stopped_requested" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_stopped_requested</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if a stop has been requested for execution.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if stop requested, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_stopped_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if a stop has been requested for execution.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if stop requested, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stopped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_current_execution</span> <span class="o">==</span> <span class="n">StopRequestStatus</span><span class="o">.</span><span class="n">STOP_REQUESTED</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Execution is_stopped_requested: </span><span class="si">%s</span><span class="s2"> (stop_current_execution: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
        <span class="n">stopped</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_current_execution</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">stopped</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.ExecutionState.set_current_node" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_current_node</span>


<a href="#agentflow.state.ExecutionState.set_current_node" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_current_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Update the current node in execution state.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.ExecutionState.set_current_node(node)" class="doc doc-heading doc-heading-parameter">                  <code>node</code>
<a href="#agentflow.state.ExecutionState.set_current_node(node)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Node to set as current.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_current_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the current node in execution state.</span>

<span class="sd">    Args:</span>
<span class="sd">        node (str): Node to set as current.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">old_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_node</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">current_node</span> <span class="o">=</span> <span class="n">node</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Changed current node from &#39;</span><span class="si">%s</span><span class="s2">&#39; to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">old_node</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.ExecutionState.set_interrupt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_interrupt</span>


<a href="#agentflow.state.ExecutionState.set_interrupt" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_interrupt</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the interrupt state for execution.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.ExecutionState.set_interrupt(node)" class="doc doc-heading doc-heading-parameter">                  <code>node</code>
<a href="#agentflow.state.ExecutionState.set_interrupt(node)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Node where the interrupt occurred.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.ExecutionState.set_interrupt(reason)" class="doc doc-heading doc-heading-parameter">                  <code>reason</code>
<a href="#agentflow.state.ExecutionState.set_interrupt(reason)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reason for the interrupt.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.ExecutionState.set_interrupt(status)" class="doc doc-heading doc-heading-parameter">                  <code>status</code>
<a href="#agentflow.state.ExecutionState.set_interrupt(status)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ExecutionStatus (agentflow.state.execution_state.ExecutionStatus)" href="../#agentflow.state.execution_state.ExecutionStatus">ExecutionStatus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Status to set for the interrupt.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.ExecutionState.set_interrupt(data)" class="doc doc-heading doc-heading-parameter">                  <code>data</code>
<a href="#agentflow.state.ExecutionState.set_interrupt(data)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional additional interrupt data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_interrupt</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="n">ExecutionStatus</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the interrupt state for execution.</span>

<span class="sd">    Args:</span>
<span class="sd">        node (str): Node where the interrupt occurred.</span>
<span class="sd">        reason (str): Reason for the interrupt.</span>
<span class="sd">        status (ExecutionStatus): Status to set for the interrupt.</span>
<span class="sd">        data (dict[str, Any] | None): Optional additional interrupt data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Setting interrupt: node=&#39;</span><span class="si">%s</span><span class="s2">&#39;, reason=&#39;</span><span class="si">%s</span><span class="s2">&#39;, status=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
        <span class="n">node</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">,</span>
        <span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupted_node</span> <span class="o">=</span> <span class="n">node</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_reason</span> <span class="o">=</span> <span class="n">reason</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_data</span> <span class="o">=</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.ExecutionStatus" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ExecutionStatus</span>


<a href="#agentflow.state.ExecutionStatus" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Status of graph execution.</p>














<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            COMPLETED


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionStatus.COMPLETED)" href="../#agentflow.state.ExecutionStatus.COMPLETED">COMPLETED</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ERROR


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionStatus.ERROR)" href="../#agentflow.state.ExecutionStatus.ERROR">ERROR</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            INTERRUPTED_AFTER


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionStatus.INTERRUPTED_AFTER)" href="../#agentflow.state.ExecutionStatus.INTERRUPTED_AFTER">INTERRUPTED_AFTER</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            INTERRUPTED_BEFORE


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionStatus.INTERRUPTED_BEFORE)" href="../#agentflow.state.ExecutionStatus.INTERRUPTED_BEFORE">INTERRUPTED_BEFORE</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            RUNNING


  
      class-attribute
      instance-attribute
   (agentflow.state.ExecutionStatus.RUNNING)" href="../#agentflow.state.ExecutionStatus.RUNNING">RUNNING</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExecutionStatus</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Status of graph execution.&quot;&quot;&quot;</span>

    <span class="n">RUNNING</span> <span class="o">=</span> <span class="s2">&quot;running&quot;</span>
    <span class="n">INTERRUPTED_BEFORE</span> <span class="o">=</span> <span class="s2">&quot;interrupted_before&quot;</span>
    <span class="n">INTERRUPTED_AFTER</span> <span class="o">=</span> <span class="s2">&quot;interrupted_after&quot;</span>
    <span class="n">COMPLETED</span> <span class="o">=</span> <span class="s2">&quot;completed&quot;</span>
    <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.ExecutionStatus-attributes">Attributes<a href="#agentflow.state.ExecutionStatus-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionStatus.COMPLETED" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">COMPLETED</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionStatus.COMPLETED" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">COMPLETED</span> <span class="o">=</span> <span class="s1">&#39;completed&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionStatus.ERROR" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">ERROR</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionStatus.ERROR" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ERROR</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionStatus.INTERRUPTED_AFTER" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">INTERRUPTED_AFTER</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionStatus.INTERRUPTED_AFTER" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">INTERRUPTED_AFTER</span> <span class="o">=</span> <span class="s1">&#39;interrupted_after&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionStatus.INTERRUPTED_BEFORE" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">INTERRUPTED_BEFORE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionStatus.INTERRUPTED_BEFORE" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">INTERRUPTED_BEFORE</span> <span class="o">=</span> <span class="s1">&#39;interrupted_before&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ExecutionStatus.RUNNING" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">RUNNING</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ExecutionStatus.RUNNING" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">RUNNING</span> <span class="o">=</span> <span class="s1">&#39;running&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.ImageBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ImageBlock</span>


<a href="#agentflow.state.ImageBlock" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Image content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.ImageBlock.type)" href="../#agentflow.state.ImageBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;image&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            media


  
      instance-attribute
   (agentflow.state.ImageBlock.media)" href="../#agentflow.state.ImageBlock.media">media</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to image media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            alt_text


  
      class-attribute
      instance-attribute
   (agentflow.state.ImageBlock.alt_text)" href="../#agentflow.state.ImageBlock.alt_text">alt_text</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Alternative text for accessibility.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            bbox


  
      class-attribute
      instance-attribute
   (agentflow.state.ImageBlock.bbox)" href="../#agentflow.state.ImageBlock.bbox">bbox</a></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="float">float</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Bounding box coordinates [x1, y1, x2, y2].</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ImageBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Image content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;image&quot;]): Block type discriminator.</span>
<span class="sd">        media (MediaRef): Reference to image media.</span>
<span class="sd">        alt_text (str | None): Alternative text for accessibility.</span>
<span class="sd">        bbox (list[float] | None): Bounding box coordinates [x1, y1, x2, y2].</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span>
    <span class="n">alt_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">bbox</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># [x1,y1,x2,y2] if applicable</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.ImageBlock-attributes">Attributes<a href="#agentflow.state.ImageBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ImageBlock.alt_text" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">alt_text</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ImageBlock.alt_text" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">alt_text</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ImageBlock.bbox" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">bbox</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ImageBlock.bbox" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">bbox</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ImageBlock.media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">media</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ImageBlock.media" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">media</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ImageBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ImageBlock.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.MediaRef" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">MediaRef</span>


<a href="#agentflow.state.MediaRef" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Reference to media content (image/audio/video/document/data).</p>
<p>Prefer referencing by URL or provider file_id over inlining base64 for large payloads.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            kind


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.kind)" href="../#agentflow.state.MediaRef.kind">kind</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;url&#39;, &#39;file_id&#39;, &#39;data&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of reference.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            url


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.url)" href="../#agentflow.state.MediaRef.url">url</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL to media content.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            file_id


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.file_id)" href="../#agentflow.state.MediaRef.file_id">file_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Provider-managed file ID.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            data_base64


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.data_base64)" href="../#agentflow.state.MediaRef.data_base64">data_base64</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Base64-encoded data (small payloads only).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            mime_type


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.mime_type)" href="../#agentflow.state.MediaRef.mime_type">mime_type</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>MIME type of the media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            size_bytes


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.size_bytes)" href="../#agentflow.state.MediaRef.size_bytes">size_bytes</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Size in bytes.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            sha256


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.sha256)" href="../#agentflow.state.MediaRef.sha256">sha256</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SHA256 hash of the media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            filename


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.filename)" href="../#agentflow.state.MediaRef.filename">filename</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filename of the media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            width


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.width)" href="../#agentflow.state.MediaRef.width">width</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image width (if applicable).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            height


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.height)" href="../#agentflow.state.MediaRef.height">height</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image height (if applicable).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            duration_ms


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.duration_ms)" href="../#agentflow.state.MediaRef.duration_ms">duration_ms</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Duration in milliseconds (if applicable).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            page


  
      class-attribute
      instance-attribute
   (agentflow.state.MediaRef.page)" href="../#agentflow.state.MediaRef.page">page</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page number (if applicable).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MediaRef</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reference to media content (image/audio/video/document/data).</span>

<span class="sd">    Prefer referencing by URL or provider file_id over inlining base64 for large payloads.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        kind (Literal[&quot;url&quot;, &quot;file_id&quot;, &quot;data&quot;]): Type of reference.</span>
<span class="sd">        url (str | None): URL to media content.</span>
<span class="sd">        file_id (str | None): Provider-managed file ID.</span>
<span class="sd">        data_base64 (str | None): Base64-encoded data (small payloads only).</span>
<span class="sd">        mime_type (str | None): MIME type of the media.</span>
<span class="sd">        size_bytes (int | None): Size in bytes.</span>
<span class="sd">        sha256 (str | None): SHA256 hash of the media.</span>
<span class="sd">        filename (str | None): Filename of the media.</span>
<span class="sd">        width (int | None): Image width (if applicable).</span>
<span class="sd">        height (int | None): Image height (if applicable).</span>
<span class="sd">        duration_ms (int | None): Duration in milliseconds (if applicable).</span>
<span class="sd">        page (int | None): Page number (if applicable).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">kind</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;file_id&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;url&quot;</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># http(s) or data: URL</span>
    <span class="n">file_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># provider-managed ID (e.g., OpenAI/Gemini)</span>
    <span class="n">data_base64</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># small payloads only</span>
    <span class="n">mime_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">size_bytes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sha256</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Media-specific hints</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">duration_ms</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.MediaRef-attributes">Attributes<a href="#agentflow.state.MediaRef-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.data_base64" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data_base64</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.data_base64" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data_base64</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.duration_ms" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">duration_ms</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.duration_ms" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">duration_ms</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.file_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">file_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.file_id" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_id</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.filename" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">filename</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.filename" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">filename</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.height" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">height</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.height" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">height</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;url&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.mime_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">mime_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.mime_type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">mime_type</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.page" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">page</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.page" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">page</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.sha256" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">sha256</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.sha256" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">sha256</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.size_bytes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">size_bytes</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.size_bytes" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">size_bytes</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.url" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">url</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.url" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">url</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MediaRef.width" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">width</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MediaRef.width" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">width</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.Message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Message</span>


<a href="#agentflow.state.Message" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Represents a message in a conversation, including content, role, metadata, and token usage.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            message_id


  
      class-attribute
      instance-attribute
   (agentflow.state.Message.message_id)" href="../#agentflow.state.Message.message_id">message_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unique identifier for the message.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            role


  
      instance-attribute
   (agentflow.state.Message.role)" href="../#agentflow.state.Message.role">role</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;user&#39;, &#39;assistant&#39;, &#39;system&#39;, &#39;tool&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The role of the message sender.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            content


  
      instance-attribute
   (agentflow.state.Message.content)" href="../#agentflow.state.Message.content">content</a></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            ContentBlock


  
      module-attribute
   (agentflow.state.message_block.ContentBlock)" href="../#agentflow.state.message_block.ContentBlock">ContentBlock</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message content blocks.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            delta


  
      class-attribute
      instance-attribute
   (agentflow.state.Message.delta)" href="../#agentflow.state.Message.delta">delta</a></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indicates if this is a delta/partial message.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            tools_calls


  
      class-attribute
      instance-attribute
   (agentflow.state.Message.tools_calls)" href="../#agentflow.state.Message.tools_calls">tools_calls</a></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tool call information, if any.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            reasoning


  
      class-attribute
      instance-attribute
   (agentflow.state.Message.reasoning)" href="../#agentflow.state.Message.reasoning">reasoning</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reasoning or explanation, if any.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            timestamp


  
      class-attribute
      instance-attribute
   (agentflow.state.Message.timestamp)" href="../#agentflow.state.Message.timestamp">timestamp</a></code></td>
            <td>
                  <code><span title="datetime.datetime">datetime</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp of the message.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            metadata


  
      class-attribute
      instance-attribute
   (agentflow.state.Message.metadata)" href="../#agentflow.state.Message.metadata">metadata</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional metadata.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            usages


  
      class-attribute
      instance-attribute
   (agentflow.state.Message.usages)" href="../#agentflow.state.Message.usages">usages</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            TokenUsages (agentflow.state.message.TokenUsages)" href="../#agentflow.state.message.TokenUsages">TokenUsages</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token usage statistics.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            raw


  
      class-attribute
      instance-attribute
   (agentflow.state.Message.raw)" href="../#agentflow.state.Message.raw">raw</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raw data, if any.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p _..._="[...]," _abc123_="'abc123'," _content_:="'content':" _message_id_:="'message_id':" _role_:="'role':" _user_="'user'," class="..">msg = Message(message_id="abc123", role="user", content=[TextBlock(text="Hello!")])</p>
</blockquote>
</blockquote>
</blockquote>
</details>











<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            attach_media (agentflow.state.Message.attach_media)" href="../#agentflow.state.Message.attach_media">attach_media</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Append a media block to the content.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            text (agentflow.state.Message.text)" href="../#agentflow.state.Message.text">text</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Best-effort text extraction from content blocks.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            text_message


  
      classmethod
   (agentflow.state.Message.text_message)" href="../#agentflow.state.Message.text_message">text_message</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Create a Message instance from plain text.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            tool_message


  
      classmethod
   (agentflow.state.Message.tool_message)" href="../#agentflow.state.Message.tool_message">tool_message</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Create a tool message, optionally marking it as an error.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>agentflow/state/message.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Message</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a message in a conversation, including content, role, metadata, and token usage.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        message_id (str | int): Unique identifier for the message.</span>
<span class="sd">        role (Literal[&quot;user&quot;, &quot;assistant&quot;, &quot;system&quot;, &quot;tool&quot;]): The role of the message sender.</span>
<span class="sd">        content (list[ContentBlock]): The message content blocks.</span>
<span class="sd">        delta (bool): Indicates if this is a delta/partial message.</span>
<span class="sd">        tools_calls (list[dict[str, Any]] | None): Tool call information, if any.</span>
<span class="sd">        reasoning (str | None): Reasoning or explanation, if any.</span>
<span class="sd">        timestamp (datetime | None): Timestamp of the message.</span>
<span class="sd">        metadata (dict[str, Any]): Additional metadata.</span>
<span class="sd">        usages (TokenUsages | None): Token usage statistics.</span>
<span class="sd">        raw (dict[str, Any] | None): Raw data, if any.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; msg = Message(message_id=&quot;abc123&quot;, role=&quot;user&quot;, content=[TextBlock(text=&quot;Hello!&quot;)])</span>
<span class="sd">        {&#39;message_id&#39;: &#39;abc123&#39;, &#39;role&#39;: &#39;user&#39;, &#39;content&#39;: [...], ...}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">generate_id</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
    <span class="n">role</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;tool&quot;</span><span class="p">]</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">]</span>
    <span class="n">delta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Indicates if this is a delta/partial message</span>
    <span class="n">tools_calls</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">reasoning</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Remove it</span>
    <span class="n">timestamp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">())</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">usages</span><span class="p">:</span> <span class="n">TokenUsages</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">raw</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">text_message</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;tool&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Message&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a Message instance from plain text.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str): The message content.</span>
<span class="sd">            role (Literal[&quot;user&quot;, &quot;assistant&quot;, &quot;system&quot;, &quot;tool&quot;]): The role of the sender.</span>
<span class="sd">            message_id (str | None): Optional message ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Message: The created Message instance.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; Message.text_message(&quot;Hello!&quot;, role=&quot;user&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating message from text with role: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">generate_id</span><span class="p">(</span><span class="n">message_id</span><span class="p">),</span>
            <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="p">[</span><span class="n">TextBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">content</span><span class="p">)],</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">{},</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tool_message</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">meta</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Message&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a tool message, optionally marking it as an error.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (list[ContentBlock]): The message content blocks.</span>
<span class="sd">            message_id (str | None): Optional message ID.</span>
<span class="sd">            meta (dict[str, Any] | None): Optional metadata.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Message: The created tool message instance.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; Message.tool_message([ToolResultBlock(...)], message_id=&quot;tool1&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">content</span>
        <span class="n">msg_id</span> <span class="o">=</span> <span class="n">generate_id</span><span class="p">(</span><span class="n">message_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">msg_id</span><span class="p">,</span>
            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;tool&quot;</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">meta</span> <span class="ow">or</span> <span class="p">{},</span>
        <span class="p">)</span>

    <span class="c1"># --- Convenience helpers ---</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Best-effort text extraction from content blocks.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Concatenated text from TextBlock and ToolResultBlock outputs.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; msg.text()</span>
<span class="sd">            &#39;Hello!Result text.&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">TextBlock</span><span class="p">):</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">ToolResultBlock</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">attach_media</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span><span class="p">,</span>
        <span class="n">as_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;audio&quot;</span><span class="p">,</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span> <span class="s2">&quot;document&quot;</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Append a media block to the content.</span>

<span class="sd">        If content was text, creates a block list. Supports image, audio, video, and document types.</span>

<span class="sd">        Args:</span>
<span class="sd">            media (MediaRef): Reference to media content.</span>
<span class="sd">            as_type (Literal[&quot;image&quot;, &quot;audio&quot;, &quot;video&quot;, &quot;document&quot;]): Type of media block to append.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If an unsupported media type is provided.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; msg.attach_media(media_ref, as_type=&quot;image&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">block</span><span class="p">:</span> <span class="n">ContentBlock</span>
        <span class="k">if</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span>
            <span class="n">block</span> <span class="o">=</span> <span class="n">ImageBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;audio&quot;</span><span class="p">:</span>
            <span class="n">block</span> <span class="o">=</span> <span class="n">AudioBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;video&quot;</span><span class="p">:</span>
            <span class="n">block</span> <span class="o">=</span> <span class="n">VideoBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;document&quot;</span><span class="p">:</span>
            <span class="n">block</span> <span class="o">=</span> <span class="n">DocumentBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported media type: </span><span class="si">{</span><span class="n">as_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="p">[</span><span class="n">TextBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="n">block</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="p">[</span><span class="n">block</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.Message-attributes">Attributes<a href="#agentflow.state.Message-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.Message.content" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">content</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.Message.content" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">content</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.Message.delta" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">delta</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.Message.delta" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">delta</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.Message.message_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">message_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.Message.message_id" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">message_id</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">generate_id</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.Message.metadata" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">metadata</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.Message.metadata" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">metadata</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.Message.raw" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">raw</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.Message.raw" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">raw</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.Message.reasoning" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">reasoning</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.Message.reasoning" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">reasoning</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.Message.role" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">role</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.Message.role" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">role</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.Message.timestamp" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">timestamp</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.Message.timestamp" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">timestamp</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">())</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.Message.tools_calls" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">tools_calls</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.Message.tools_calls" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">tools_calls</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.Message.usages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">usages</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.Message.usages" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">usages</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>


<h4 id="agentflow.state.Message-functions">Functions<a href="#agentflow.state.Message-functions" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.Message.attach_media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">attach_media</span>


<a href="#agentflow.state.Message.attach_media" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">attach_media</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="n">as_type</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Append a media block to the content.</p>
<p>If content was text, creates a block list. Supports image, audio, video, and document types.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.Message.attach_media(media)" class="doc doc-heading doc-heading-parameter">                  <code>media</code>
<a href="#agentflow.state.Message.attach_media(media)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to media content.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.Message.attach_media(as_type)" class="doc doc-heading doc-heading-parameter">                  <code>as_type</code>
<a href="#agentflow.state.Message.attach_media(as_type)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;image&#39;, &#39;audio&#39;, &#39;video&#39;, &#39;document&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of media block to append.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an unsupported media type is provided.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>msg.attach_media(media_ref, as_type="image")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/message.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">attach_media</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span><span class="p">,</span>
    <span class="n">as_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;audio&quot;</span><span class="p">,</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span> <span class="s2">&quot;document&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Append a media block to the content.</span>

<span class="sd">    If content was text, creates a block list. Supports image, audio, video, and document types.</span>

<span class="sd">    Args:</span>
<span class="sd">        media (MediaRef): Reference to media content.</span>
<span class="sd">        as_type (Literal[&quot;image&quot;, &quot;audio&quot;, &quot;video&quot;, &quot;document&quot;]): Type of media block to append.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If an unsupported media type is provided.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; msg.attach_media(media_ref, as_type=&quot;image&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">block</span><span class="p">:</span> <span class="n">ContentBlock</span>
    <span class="k">if</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span>
        <span class="n">block</span> <span class="o">=</span> <span class="n">ImageBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;audio&quot;</span><span class="p">:</span>
        <span class="n">block</span> <span class="o">=</span> <span class="n">AudioBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;video&quot;</span><span class="p">:</span>
        <span class="n">block</span> <span class="o">=</span> <span class="n">VideoBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;document&quot;</span><span class="p">:</span>
        <span class="n">block</span> <span class="o">=</span> <span class="n">DocumentBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported media type: </span><span class="si">{</span><span class="n">as_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="p">[</span><span class="n">TextBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="n">block</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="p">[</span><span class="n">block</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.Message.text" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">text</span>


<a href="#agentflow.state.Message.text" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">text</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Best-effort text extraction from content blocks.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Concatenated text from TextBlock and ToolResultBlock outputs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>msg.text()
'Hello!Result text.'</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/message.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Best-effort text extraction from content blocks.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Concatenated text from TextBlock and ToolResultBlock outputs.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; msg.text()</span>
<span class="sd">        &#39;Hello!Result text.&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">TextBlock</span><span class="p">):</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">ToolResultBlock</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.Message.text_message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">text_message</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#agentflow.state.Message.text_message" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">text_message</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a Message instance from plain text.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.Message.text_message(content)" class="doc doc-heading doc-heading-parameter">                  <code>content</code>
<a href="#agentflow.state.Message.text_message(content)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message content.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.Message.text_message(role)" class="doc doc-heading doc-heading-parameter">                  <code>role</code>
<a href="#agentflow.state.Message.text_message(role)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;user&#39;, &#39;assistant&#39;, &#39;system&#39;, &#39;tool&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The role of the sender.</p>
              </div>
            </td>
            <td>
                  <code>&#39;user&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.Message.text_message(message_id)" class="doc doc-heading doc-heading-parameter">                  <code>message_id</code>
<a href="#agentflow.state.Message.text_message(message_id)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional message ID.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Message</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created Message instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>Message.text_message("Hello!", role="user")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/message.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">text_message</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">role</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;tool&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Message&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a Message instance from plain text.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (str): The message content.</span>
<span class="sd">        role (Literal[&quot;user&quot;, &quot;assistant&quot;, &quot;system&quot;, &quot;tool&quot;]): The role of the sender.</span>
<span class="sd">        message_id (str | None): Optional message ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Message: The created Message instance.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; Message.text_message(&quot;Hello!&quot;, role=&quot;user&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating message from text with role: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">generate_id</span><span class="p">(</span><span class="n">message_id</span><span class="p">),</span>
        <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="p">[</span><span class="n">TextBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">content</span><span class="p">)],</span>
        <span class="n">metadata</span><span class="o">=</span><span class="p">{},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.Message.tool_message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">tool_message</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#agentflow.state.Message.tool_message" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">tool_message</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a tool message, optionally marking it as an error.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.Message.tool_message(content)" class="doc doc-heading doc-heading-parameter">                  <code>content</code>
<a href="#agentflow.state.Message.tool_message(content)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            ContentBlock


  
      module-attribute
   (agentflow.state.message_block.ContentBlock)" href="../#agentflow.state.message_block.ContentBlock">ContentBlock</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message content blocks.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.Message.tool_message(message_id)" class="doc doc-heading doc-heading-parameter">                  <code>message_id</code>
<a href="#agentflow.state.Message.tool_message(message_id)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional message ID.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.Message.tool_message(meta)" class="doc doc-heading doc-heading-parameter">                  <code>meta</code>
<a href="#agentflow.state.Message.tool_message(meta)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional metadata.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Message</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created tool message instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>Message.tool_message([ToolResultBlock(...)], message_id="tool1")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/message.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">tool_message</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">meta</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Message&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a tool message, optionally marking it as an error.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (list[ContentBlock]): The message content blocks.</span>
<span class="sd">        message_id (str | None): Optional message ID.</span>
<span class="sd">        meta (dict[str, Any] | None): Optional metadata.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Message: The created tool message instance.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; Message.tool_message([ToolResultBlock(...)], message_id=&quot;tool1&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">content</span>
    <span class="n">msg_id</span> <span class="o">=</span> <span class="n">generate_id</span><span class="p">(</span><span class="n">message_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">msg_id</span><span class="p">,</span>
        <span class="n">role</span><span class="o">=</span><span class="s2">&quot;tool&quot;</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">meta</span> <span class="ow">or</span> <span class="p">{},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.MessageContextManager" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">MessageContextManager</span>


<a href="#agentflow.state.MessageContextManager" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BaseContextManager (agentflow.state.base_context.BaseContextManager)" href="../#agentflow.state.base_context.BaseContextManager">BaseContextManager</a>[<a class="autorefs autorefs-internal" title="            S


  
      module-attribute
   (agentflow.state.message_context_manager.S)" href="../#agentflow.state.message_context_manager.S">S</a>]</code></p>


        <p>Manages the context field for AI interactions.</p>
<p>This class trims the context (message history) based on a maximum number of user messages,
ensuring the first message (usually a system prompt) is always preserved.
Optionally removes tool-related messages (AI messages with tool calls and tool result messages).
Generic over AgentState or its subclasses.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            __init__ (agentflow.state.MessageContextManager.__init__)" href="../#agentflow.state.MessageContextManager.__init__">__init__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Initialize the MessageContextManager.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            atrim_context


  
      async
   (agentflow.state.MessageContextManager.atrim_context)" href="../#agentflow.state.MessageContextManager.atrim_context">atrim_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Asynchronous version of trim_context.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            trim_context (agentflow.state.MessageContextManager.trim_context)" href="../#agentflow.state.MessageContextManager.trim_context">trim_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Trim the context in the given AgentState based on the maximum number of user messages.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>




<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            max_messages


  
      instance-attribute
   (agentflow.state.MessageContextManager.max_messages)" href="../#agentflow.state.MessageContextManager.max_messages">max_messages</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            remove_tool_msgs


  
      instance-attribute
   (agentflow.state.MessageContextManager.remove_tool_msgs)" href="../#agentflow.state.MessageContextManager.remove_tool_msgs">remove_tool_msgs</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_context_manager.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MessageContextManager</span><span class="p">(</span><span class="n">BaseContextManager</span><span class="p">[</span><span class="n">S</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manages the context field for AI interactions.</span>

<span class="sd">    This class trims the context (message history) based on a maximum number of user messages,</span>
<span class="sd">    ensuring the first message (usually a system prompt) is always preserved.</span>
<span class="sd">    Optionally removes tool-related messages (AI messages with tool calls and tool result messages).</span>
<span class="sd">    Generic over AgentState or its subclasses.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_messages</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">remove_tool_msgs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the MessageContextManager.</span>

<span class="sd">        Args:</span>
<span class="sd">            max_messages (int): Maximum number of</span>
<span class="sd">                user messages to keep in context. Default is 10.</span>
<span class="sd">            remove_tool_msgs (bool): Whether to remove tool messages from context.</span>
<span class="sd">                Default is False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_messages</span> <span class="o">=</span> <span class="n">max_messages</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_tool_msgs</span> <span class="o">=</span> <span class="n">remove_tool_msgs</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initialized MessageContextManager with max_messages=</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">max_messages</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_trim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Trim messages keeping system messages and most recent user messages.</span>

<span class="sd">        Returns None if no trimming is needed, otherwise returns the trimmed list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check context is empty</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">messages</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;No messages to trim; context is empty&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># First, remove tool messages if requested</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_tool_msgs</span><span class="p">:</span>
            <span class="n">messages</span> <span class="o">=</span> <span class="n">remove_tool_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Removed tool messages, </span><span class="si">%d</span><span class="s2"> messages remaining&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">))</span>

        <span class="c1"># Count user messages</span>
        <span class="n">user_message_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">messages</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;user&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">user_message_count</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_messages</span><span class="p">:</span>
            <span class="c1"># Check if we removed tool messages but no trimming needed</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_tool_msgs</span><span class="p">:</span>
                <span class="c1"># Return the filtered messages even if count is within limits</span>
                <span class="k">return</span> <span class="n">messages</span>
            <span class="c1"># no trimming needed</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;No trimming needed; context is within limits (</span><span class="si">%d</span><span class="s2"> user messages)&quot;</span><span class="p">,</span>
                <span class="n">user_message_count</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Separate system messages (usually at the beginning)</span>
        <span class="n">system_messages</span> <span class="o">=</span> <span class="p">[</span><span class="n">msg</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">messages</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;system&quot;</span><span class="p">]</span>
        <span class="n">non_system_messages</span> <span class="o">=</span> <span class="p">[</span><span class="n">msg</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">messages</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">!=</span> <span class="s2">&quot;system&quot;</span><span class="p">]</span>

        <span class="c1"># Find the index of the oldest user message to keep</span>
        <span class="n">user_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">start_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">non_system_messages</span><span class="p">)</span>

        <span class="c1"># Iterate from the end to find the position to start keeping messages</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">non_system_messages</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">non_system_messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;user&quot;</span><span class="p">:</span>
                <span class="n">user_count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">user_count</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_messages</span><span class="p">:</span>
                    <span class="n">start_index</span> <span class="o">=</span> <span class="n">i</span>
                    <span class="k">break</span>

        <span class="c1"># Keep messages from start_index onwards</span>
        <span class="n">final_non_system</span> <span class="o">=</span> <span class="n">non_system_messages</span><span class="p">[</span><span class="n">start_index</span><span class="p">:]</span>

        <span class="c1"># Combine system messages (at start) with trimmed conversation</span>
        <span class="n">trimmed_messages</span> <span class="o">=</span> <span class="n">system_messages</span> <span class="o">+</span> <span class="n">final_non_system</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Trimmed from </span><span class="si">%d</span><span class="s2"> to </span><span class="si">%d</span><span class="s2"> messages (</span><span class="si">%d</span><span class="s2"> user messages kept)&quot;</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">),</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">trimmed_messages</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max_messages</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">trimmed_messages</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">trim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Trim the context in the given AgentState based on the maximum number of user messages.</span>

<span class="sd">        The first message (typically a system prompt) is always preserved. Only the most recent</span>
<span class="sd">        user messages up to `max_messages` are kept, along with the first message.</span>

<span class="sd">        If `remove_tool_msgs` is True, also removes:</span>
<span class="sd">        - AI messages that contain tool calls (intermediate tool-calling messages)</span>
<span class="sd">        - Tool result messages (role=&quot;tool&quot;)</span>

<span class="sd">        Args:</span>
<span class="sd">            state (AgentState): The agent state containing the context to trim.</span>

<span class="sd">        Returns:</span>
<span class="sd">            S: The updated agent state with trimmed context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">context</span>
        <span class="n">trimmed_messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trim</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">trimmed_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">state</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">trimmed_messages</span>
        <span class="k">return</span> <span class="n">state</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">atrim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Asynchronous version of trim_context.</span>

<span class="sd">        If `remove_tool_msgs` is True, also removes:</span>
<span class="sd">        - AI messages that contain tool calls (intermediate tool-calling messages)</span>
<span class="sd">        - Tool result messages (role=&quot;tool&quot;)</span>

<span class="sd">        Args:</span>
<span class="sd">            state (AgentState): The agent state containing the context to trim.</span>

<span class="sd">        Returns:</span>
<span class="sd">            S: The updated agent state with trimmed context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">context</span>
        <span class="n">trimmed_messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trim</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">trimmed_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">state</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">trimmed_messages</span>
        <span class="k">return</span> <span class="n">state</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.MessageContextManager-attributes">Attributes<a href="#agentflow.state.MessageContextManager-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MessageContextManager.max_messages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">max_messages</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MessageContextManager.max_messages" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">max_messages</span> <span class="o">=</span> <span class="n">max_messages</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.MessageContextManager.remove_tool_msgs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">remove_tool_msgs</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.MessageContextManager.remove_tool_msgs" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">remove_tool_msgs</span> <span class="o">=</span> <span class="n">remove_tool_msgs</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>


<h4 id="agentflow.state.MessageContextManager-functions">Functions<a href="#agentflow.state.MessageContextManager-functions" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.MessageContextManager.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">__init__</span>


<a href="#agentflow.state.MessageContextManager.__init__" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__init__</span><span class="p">(</span><span class="n">max_messages</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">remove_tool_msgs</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the MessageContextManager.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.MessageContextManager.__init__(max_messages)" class="doc doc-heading doc-heading-parameter">                  <code>max_messages</code>
<a href="#agentflow.state.MessageContextManager.__init__(max_messages)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum number of
user messages to keep in context. Default is 10.</p>
              </div>
            </td>
            <td>
                  <code>10</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.MessageContextManager.__init__(remove_tool_msgs)" class="doc doc-heading doc-heading-parameter">                  <code>remove_tool_msgs</code>
<a href="#agentflow.state.MessageContextManager.__init__(remove_tool_msgs)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to remove tool messages from context.
Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/message_context_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_messages</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">remove_tool_msgs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the MessageContextManager.</span>

<span class="sd">    Args:</span>
<span class="sd">        max_messages (int): Maximum number of</span>
<span class="sd">            user messages to keep in context. Default is 10.</span>
<span class="sd">        remove_tool_msgs (bool): Whether to remove tool messages from context.</span>
<span class="sd">            Default is False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_messages</span> <span class="o">=</span> <span class="n">max_messages</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_tool_msgs</span> <span class="o">=</span> <span class="n">remove_tool_msgs</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initialized MessageContextManager with max_messages=</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">max_messages</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.MessageContextManager.atrim_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">atrim_context</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentflow.state.MessageContextManager.atrim_context" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">atrim_context</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Asynchronous version of trim_context.</p>
<p>If <code>remove_tool_msgs</code> is True, also removes:
- AI messages that contain tool calls (intermediate tool-calling messages)
- Tool result messages (role="tool")</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.MessageContextManager.atrim_context(state)" class="doc doc-heading doc-heading-parameter">                  <code>state</code>
<a href="#agentflow.state.MessageContextManager.atrim_context(state)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            AgentState (agentflow.state.agent_state.AgentState)" href="../#agentflow.state.agent_state.AgentState">AgentState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The agent state containing the context to trim.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>S</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            S


  
      module-attribute
   (agentflow.state.message_context_manager.S)" href="../#agentflow.state.message_context_manager.S">S</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated agent state with trimmed context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/message_context_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">atrim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronous version of trim_context.</span>

<span class="sd">    If `remove_tool_msgs` is True, also removes:</span>
<span class="sd">    - AI messages that contain tool calls (intermediate tool-calling messages)</span>
<span class="sd">    - Tool result messages (role=&quot;tool&quot;)</span>

<span class="sd">    Args:</span>
<span class="sd">        state (AgentState): The agent state containing the context to trim.</span>

<span class="sd">    Returns:</span>
<span class="sd">        S: The updated agent state with trimmed context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">context</span>
    <span class="n">trimmed_messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trim</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trimmed_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">state</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">trimmed_messages</span>
    <span class="k">return</span> <span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.MessageContextManager.trim_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">trim_context</span>


<a href="#agentflow.state.MessageContextManager.trim_context" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">trim_context</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Trim the context in the given AgentState based on the maximum number of user messages.</p>
<p>The first message (typically a system prompt) is always preserved. Only the most recent
user messages up to <code>max_messages</code> are kept, along with the first message.</p>
<p>If <code>remove_tool_msgs</code> is True, also removes:
- AI messages that contain tool calls (intermediate tool-calling messages)
- Tool result messages (role="tool")</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.MessageContextManager.trim_context(state)" class="doc doc-heading doc-heading-parameter">                  <code>state</code>
<a href="#agentflow.state.MessageContextManager.trim_context(state)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            AgentState (agentflow.state.agent_state.AgentState)" href="../#agentflow.state.agent_state.AgentState">AgentState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The agent state containing the context to trim.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>S</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            S


  
      module-attribute
   (agentflow.state.message_context_manager.S)" href="../#agentflow.state.message_context_manager.S">S</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated agent state with trimmed context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/message_context_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">trim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Trim the context in the given AgentState based on the maximum number of user messages.</span>

<span class="sd">    The first message (typically a system prompt) is always preserved. Only the most recent</span>
<span class="sd">    user messages up to `max_messages` are kept, along with the first message.</span>

<span class="sd">    If `remove_tool_msgs` is True, also removes:</span>
<span class="sd">    - AI messages that contain tool calls (intermediate tool-calling messages)</span>
<span class="sd">    - Tool result messages (role=&quot;tool&quot;)</span>

<span class="sd">    Args:</span>
<span class="sd">        state (AgentState): The agent state containing the context to trim.</span>

<span class="sd">    Returns:</span>
<span class="sd">        S: The updated agent state with trimmed context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">context</span>
    <span class="n">trimmed_messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trim</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trimmed_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">state</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">trimmed_messages</span>
    <span class="k">return</span> <span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.ReasoningBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ReasoningBlock</span>


<a href="#agentflow.state.ReasoningBlock" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Reasoning content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.ReasoningBlock.type)" href="../#agentflow.state.ReasoningBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;reasoning&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            summary


  
      instance-attribute
   (agentflow.state.ReasoningBlock.summary)" href="../#agentflow.state.ReasoningBlock.summary">summary</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Summary of reasoning.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            details


  
      class-attribute
      instance-attribute
   (agentflow.state.ReasoningBlock.details)" href="../#agentflow.state.ReasoningBlock.details">details</a></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Detailed reasoning steps.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ReasoningBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reasoning content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;reasoning&quot;]): Block type discriminator.</span>
<span class="sd">        summary (str): Summary of reasoning.</span>
<span class="sd">        details (list[str] | None): Detailed reasoning steps.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;reasoning&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;reasoning&quot;</span>
    <span class="n">summary</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">details</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.ReasoningBlock-attributes">Attributes<a href="#agentflow.state.ReasoningBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ReasoningBlock.details" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">details</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ReasoningBlock.details" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">details</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ReasoningBlock.summary" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">summary</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ReasoningBlock.summary" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">summary</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ReasoningBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ReasoningBlock.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;reasoning&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.StreamChunk" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">StreamChunk</span>


<a href="#agentflow.state.StreamChunk" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Unified wrapper for different types of streaming data.</p>
<p>This class provides a single interface for handling various streaming chunk types
(messages, events, state updates, errors) with type-safe discrimination.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="agentflow.state.StreamChunk.type">type</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of streaming chunk.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            data


  
      class-attribute
      instance-attribute
   (agentflow.state.StreamChunk.data)" href="../#agentflow.state.StreamChunk.data">data</a></code></td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The actual chunk data (Message, EventModel, dict, etc.).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            metadata


  
      class-attribute
      instance-attribute
   (agentflow.state.StreamChunk.metadata)" href="../#agentflow.state.StreamChunk.metadata">metadata</a></code></td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional additional metadata for the chunk.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            Config (agentflow.state.StreamChunk.Config)" href="../#agentflow.state.StreamChunk.Config">Config</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Pydantic configuration for EventModel.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>





              <details class="quote">
                <summary>Source code in <code>agentflow/state/stream_chunks.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StreamChunk</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Unified wrapper for different types of streaming data.</span>

<span class="sd">    This class provides a single interface for handling various streaming chunk types</span>
<span class="sd">    (messages, events, state updates, errors) with type-safe discrimination.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type: The type of streaming chunk.</span>
<span class="sd">        data: The actual chunk data (Message, EventModel, dict, etc.).</span>
<span class="sd">        metadata: Optional additional metadata for the chunk.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">event</span><span class="p">:</span> <span class="n">StreamEvent</span> <span class="o">=</span> <span class="n">StreamEvent</span><span class="o">.</span><span class="n">MESSAGE</span>
    <span class="c1"># data holders for different chunk types</span>
    <span class="n">message</span><span class="p">:</span> <span class="n">Message</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">AgentState</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Placeholder for other chunk types</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Optional identifiers</span>
    <span class="n">thread_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Optional metadata</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">timestamp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;UNIX timestamp of when chunk was created&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Pydantic configuration for EventModel.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            use_enum_values: Output enums as strings.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.StreamChunk-attributes">Attributes<a href="#agentflow.state.StreamChunk-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamChunk.data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamChunk.data" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamChunk.event" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">event</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamChunk.event" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">event</span> <span class="o">=</span> <span class="n">MESSAGE</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamChunk.message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">message</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamChunk.message" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">message</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamChunk.metadata" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">metadata</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamChunk.metadata" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">metadata</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamChunk.run_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">run_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamChunk.run_id" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">run_id</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamChunk.state" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">state</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamChunk.state" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">state</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamChunk.thread_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">thread_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamChunk.thread_id" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">thread_id</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamChunk.timestamp" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">timestamp</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamChunk.timestamp" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">timestamp</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;UNIX timestamp of when chunk was created&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<h4 id="agentflow.state.StreamChunk-classes">Classes<a href="#agentflow.state.StreamChunk-classes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.StreamChunk.Config" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Config</span>


<a href="#agentflow.state.StreamChunk.Config" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">


        <p>Pydantic configuration for EventModel.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            use_enum_values


  
      class-attribute
      instance-attribute
   (agentflow.state.StreamChunk.Config.use_enum_values)" href="../#agentflow.state.StreamChunk.Config.use_enum_values">use_enum_values</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Output enums as strings.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/stream_chunks.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pydantic configuration for EventModel.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        use_enum_values: Output enums as strings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.StreamChunk.Config-attributes">Attributes<a href="#agentflow.state.StreamChunk.Config-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.StreamChunk.Config.use_enum_values" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">use_enum_values</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamChunk.Config.use_enum_values" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.StreamEvent" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">StreamEvent</span>


<a href="#agentflow.state.StreamEvent" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>















<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ERROR


  
      class-attribute
      instance-attribute
   (agentflow.state.StreamEvent.ERROR)" href="../#agentflow.state.StreamEvent.ERROR">ERROR</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            MESSAGE


  
      class-attribute
      instance-attribute
   (agentflow.state.StreamEvent.MESSAGE)" href="../#agentflow.state.StreamEvent.MESSAGE">MESSAGE</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            STATE


  
      class-attribute
      instance-attribute
   (agentflow.state.StreamEvent.STATE)" href="../#agentflow.state.StreamEvent.STATE">STATE</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            UPDATES


  
      class-attribute
      instance-attribute
   (agentflow.state.StreamEvent.UPDATES)" href="../#agentflow.state.StreamEvent.UPDATES">UPDATES</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>agentflow/state/stream_chunks.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StreamEvent</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">STATE</span> <span class="o">=</span> <span class="s2">&quot;state&quot;</span>
    <span class="n">MESSAGE</span> <span class="o">=</span> <span class="s2">&quot;message&quot;</span>
    <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
    <span class="n">UPDATES</span> <span class="o">=</span> <span class="s2">&quot;updates&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.StreamEvent-attributes">Attributes<a href="#agentflow.state.StreamEvent-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamEvent.ERROR" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">ERROR</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamEvent.ERROR" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ERROR</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamEvent.MESSAGE" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">MESSAGE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamEvent.MESSAGE" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">MESSAGE</span> <span class="o">=</span> <span class="s1">&#39;message&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamEvent.STATE" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">STATE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamEvent.STATE" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">STATE</span> <span class="o">=</span> <span class="s1">&#39;state&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.StreamEvent.UPDATES" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">UPDATES</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.StreamEvent.UPDATES" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">UPDATES</span> <span class="o">=</span> <span class="s1">&#39;updates&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.TextBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">TextBlock</span>


<a href="#agentflow.state.TextBlock" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Text content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.TextBlock.type)" href="../#agentflow.state.TextBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;text&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            text


  
      instance-attribute
   (agentflow.state.TextBlock.text)" href="../#agentflow.state.TextBlock.text">text</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text content.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            annotations


  
      class-attribute
      instance-attribute
   (agentflow.state.TextBlock.annotations)" href="../#agentflow.state.TextBlock.annotations">annotations</a></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            AnnotationRef (agentflow.state.message_block.AnnotationRef)" href="../#agentflow.state.message_block.AnnotationRef">AnnotationRef</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of annotation references.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TextBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Text content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;text&quot;]): Block type discriminator.</span>
<span class="sd">        text (str): Text content.</span>
<span class="sd">        annotations (list[AnnotationRef]): List of annotation references.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;text&quot;</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">annotations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AnnotationRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.TextBlock-attributes">Attributes<a href="#agentflow.state.TextBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.TextBlock.annotations" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">annotations</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.TextBlock.annotations" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">annotations</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.TextBlock.text" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">text</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.TextBlock.text" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">text</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.TextBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.TextBlock.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.TokenUsages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">TokenUsages</span>


<a href="#agentflow.state.TokenUsages" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Tracks token usage statistics for a message or model response.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            completion_tokens


  
      instance-attribute
   (agentflow.state.TokenUsages.completion_tokens)" href="../#agentflow.state.TokenUsages.completion_tokens">completion_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of completion tokens used.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            prompt_tokens


  
      instance-attribute
   (agentflow.state.TokenUsages.prompt_tokens)" href="../#agentflow.state.TokenUsages.prompt_tokens">prompt_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of prompt tokens used.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            total_tokens


  
      instance-attribute
   (agentflow.state.TokenUsages.total_tokens)" href="../#agentflow.state.TokenUsages.total_tokens">total_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total tokens used.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            reasoning_tokens


  
      class-attribute
      instance-attribute
   (agentflow.state.TokenUsages.reasoning_tokens)" href="../#agentflow.state.TokenUsages.reasoning_tokens">reasoning_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reasoning tokens used (optional).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            cache_creation_input_tokens


  
      class-attribute
      instance-attribute
   (agentflow.state.TokenUsages.cache_creation_input_tokens)" href="../#agentflow.state.TokenUsages.cache_creation_input_tokens">cache_creation_input_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cache creation input tokens (optional).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            cache_read_input_tokens


  
      class-attribute
      instance-attribute
   (agentflow.state.TokenUsages.cache_read_input_tokens)" href="../#agentflow.state.TokenUsages.cache_read_input_tokens">cache_read_input_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cache read input tokens (optional).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            image_tokens


  
      class-attribute
      instance-attribute
   (agentflow.state.TokenUsages.image_tokens)" href="../#agentflow.state.TokenUsages.image_tokens">image_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image tokens for multimodal models (optional).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            audio_tokens


  
      class-attribute
      instance-attribute
   (agentflow.state.TokenUsages.audio_tokens)" href="../#agentflow.state.TokenUsages.audio_tokens">audio_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Audio tokens for multimodal models (optional).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p 10_="10," 20_="20," 30_="30," _completion_tokens_:="'completion_tokens':" _prompt_tokens_:="'prompt_tokens':" _total_tokens_:="'total_tokens':" class="..">usage = TokenUsages(completion_tokens=10, prompt_tokens=20, total_tokens=30)</p>
</blockquote>
</blockquote>
</blockquote>
</details>












              <details class="quote">
                <summary>Source code in <code>agentflow/state/message.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TokenUsages</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tracks token usage statistics for a message or model response.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        completion_tokens (int): Number of completion tokens used.</span>
<span class="sd">        prompt_tokens (int): Number of prompt tokens used.</span>
<span class="sd">        total_tokens (int): Total tokens used.</span>
<span class="sd">        reasoning_tokens (int): Reasoning tokens used (optional).</span>
<span class="sd">        cache_creation_input_tokens (int): Cache creation input tokens (optional).</span>
<span class="sd">        cache_read_input_tokens (int): Cache read input tokens (optional).</span>
<span class="sd">        image_tokens (int | None): Image tokens for multimodal models (optional).</span>
<span class="sd">        audio_tokens (int | None): Audio tokens for multimodal models (optional).</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; usage = TokenUsages(completion_tokens=10, prompt_tokens=20, total_tokens=30)</span>
<span class="sd">        {&#39;completion_tokens&#39;: 10, &#39;prompt_tokens&#39;: 20, &#39;total_tokens&#39;: 30, ...}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">completion_tokens</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">prompt_tokens</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">total_tokens</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">reasoning_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cache_creation_input_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cache_read_input_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Optional modality-specific usage fields for multimodal models</span>
    <span class="n">image_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">audio_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.TokenUsages-attributes">Attributes<a href="#agentflow.state.TokenUsages-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.TokenUsages.audio_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">audio_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.TokenUsages.audio_tokens" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">audio_tokens</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.TokenUsages.cache_creation_input_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">cache_creation_input_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.TokenUsages.cache_creation_input_tokens" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">cache_creation_input_tokens</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.TokenUsages.cache_read_input_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">cache_read_input_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.TokenUsages.cache_read_input_tokens" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">cache_read_input_tokens</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.TokenUsages.completion_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">completion_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.TokenUsages.completion_tokens" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">completion_tokens</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.TokenUsages.image_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">image_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.TokenUsages.image_tokens" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">image_tokens</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.TokenUsages.prompt_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">prompt_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.TokenUsages.prompt_tokens" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">prompt_tokens</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.TokenUsages.reasoning_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">reasoning_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.TokenUsages.reasoning_tokens" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">reasoning_tokens</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.TokenUsages.total_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">total_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.TokenUsages.total_tokens" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">total_tokens</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.ToolCallBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ToolCallBlock</span>


<a href="#agentflow.state.ToolCallBlock" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Tool call content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.ToolCallBlock.type)" href="../#agentflow.state.ToolCallBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;tool_call&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            id


  
      instance-attribute
   (agentflow.state.ToolCallBlock.id)" href="../#agentflow.state.ToolCallBlock.id">id</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tool call ID.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            name


  
      instance-attribute
   (agentflow.state.ToolCallBlock.name)" href="../#agentflow.state.ToolCallBlock.name">name</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tool name.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            args


  
      class-attribute
      instance-attribute
   (agentflow.state.ToolCallBlock.args)" href="../#agentflow.state.ToolCallBlock.args">args</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arguments for the tool call.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            tool_type


  
      class-attribute
      instance-attribute
   (agentflow.state.ToolCallBlock.tool_type)" href="../#agentflow.state.ToolCallBlock.tool_type">tool_type</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of tool (e.g., web_search, file_search).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ToolCallBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tool call content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;tool_call&quot;]): Block type discriminator.</span>
<span class="sd">        id (str): Tool call ID.</span>
<span class="sd">        name (str): Tool name.</span>
<span class="sd">        args (dict[str, Any]): Arguments for the tool call.</span>
<span class="sd">        tool_type (str | None): Type of tool (e.g., web_search, file_search).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;tool_call&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;tool_call&quot;</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">tool_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># e.g., web_search, file_search, computer_use</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.ToolCallBlock-attributes">Attributes<a href="#agentflow.state.ToolCallBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ToolCallBlock.args" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">args</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ToolCallBlock.args" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">args</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ToolCallBlock.id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ToolCallBlock.id" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">id</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ToolCallBlock.name" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ToolCallBlock.name" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">name</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ToolCallBlock.tool_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">tool_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ToolCallBlock.tool_type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">tool_type</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ToolCallBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ToolCallBlock.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;tool_call&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.ToolResultBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ToolResultBlock</span>


<a href="#agentflow.state.ToolResultBlock" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Tool result content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.ToolResultBlock.type)" href="../#agentflow.state.ToolResultBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;tool_result&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            call_id


  
      instance-attribute
   (agentflow.state.ToolResultBlock.call_id)" href="../#agentflow.state.ToolResultBlock.call_id">call_id</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tool call ID.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            output


  
      class-attribute
      instance-attribute
   (agentflow.state.ToolResultBlock.output)" href="../#agentflow.state.ToolResultBlock.output">output</a></code></td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Output from the tool (str, dict, MediaRef, or list of blocks).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            is_error


  
      class-attribute
      instance-attribute
   (agentflow.state.ToolResultBlock.is_error)" href="../#agentflow.state.ToolResultBlock.is_error">is_error</a></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the result is an error.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            status


  
      class-attribute
      instance-attribute
   (agentflow.state.ToolResultBlock.status)" href="../#agentflow.state.ToolResultBlock.status">status</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;completed&#39;, &#39;failed&#39;] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Status of the tool call.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ToolResultBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tool result content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;tool_result&quot;]): Block type discriminator.</span>
<span class="sd">        call_id (str): Tool call ID.</span>
<span class="sd">        output (Any): Output from the tool (str, dict, MediaRef, or list of blocks).</span>
<span class="sd">        is_error (bool): Whether the result is an error.</span>
<span class="sd">        status (Literal[&quot;completed&quot;, &quot;failed&quot;] | None): Status of the tool call.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;tool_result&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;tool_result&quot;</span>
    <span class="n">call_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">output</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># str | dict | MediaRef | list[ContentBlock-like]</span>
    <span class="n">is_error</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;completed&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.ToolResultBlock-attributes">Attributes<a href="#agentflow.state.ToolResultBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ToolResultBlock.call_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">call_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ToolResultBlock.call_id" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">call_id</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ToolResultBlock.is_error" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">is_error</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ToolResultBlock.is_error" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">is_error</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ToolResultBlock.output" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">output</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ToolResultBlock.output" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">output</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ToolResultBlock.status" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">status</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ToolResultBlock.status" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">status</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.ToolResultBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.ToolResultBlock.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;tool_result&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentflow.state.VideoBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">VideoBlock</span>


<a href="#agentflow.state.VideoBlock" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Video content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.VideoBlock.type)" href="../#agentflow.state.VideoBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;video&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            media


  
      instance-attribute
   (agentflow.state.VideoBlock.media)" href="../#agentflow.state.VideoBlock.media">media</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to video media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            thumbnail


  
      class-attribute
      instance-attribute
   (agentflow.state.VideoBlock.thumbnail)" href="../#agentflow.state.VideoBlock.thumbnail">thumbnail</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to thumbnail image.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">VideoBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Video content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;video&quot;]): Block type discriminator.</span>
<span class="sd">        media (MediaRef): Reference to video media.</span>
<span class="sd">        thumbnail (MediaRef | None): Reference to thumbnail image.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;video&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;video&quot;</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span>
    <span class="n">thumbnail</span><span class="p">:</span> <span class="n">MediaRef</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h4 id="agentflow.state.VideoBlock-attributes">Attributes<a href="#agentflow.state.VideoBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.VideoBlock.media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">media</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.VideoBlock.media" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">media</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.VideoBlock.thumbnail" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">thumbnail</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.VideoBlock.thumbnail" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">thumbnail</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.VideoBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.VideoBlock.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;video&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>
<h2 id="agentflow.state-functions">Functions<a href="#agentflow.state-functions" class="headerlink" title="Permanent link">&para;</a></h2>

<div class="doc doc-object doc-function">


<h3 id="agentflow.state.add_messages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">add_messages</span>


<a href="#agentflow.state.add_messages" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_messages</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Adds messages to the list, avoiding duplicates by message_id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h4 id="agentflow.state.add_messages(left)" class="doc doc-heading doc-heading-parameter">                  <code>left</code>
<a href="#agentflow.state.add_messages(left)" class="headerlink" title="Permanent link">&para;</a></h4>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing list of messages.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h4 id="agentflow.state.add_messages(right)" class="doc doc-heading doc-heading-parameter">                  <code>right</code>
<a href="#agentflow.state.add_messages(right)" class="headerlink" title="Permanent link">&para;</a></h4>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New messages to add.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Message]: Combined list with unique messages.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>add_messages([msg1], [msg2, msg1])
[msg1, msg2]</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/reducers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_messages</span><span class="p">(</span><span class="n">left</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">],</span> <span class="n">right</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds messages to the list, avoiding duplicates by message_id.</span>

<span class="sd">    Args:</span>
<span class="sd">        left (list[Message]): Existing list of messages.</span>
<span class="sd">        right (list[Message]): New messages to add.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Message]: Combined list with unique messages.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; add_messages([msg1], [msg2, msg1])</span>
<span class="sd">        [msg1, msg2]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">left_ids</span> <span class="o">=</span> <span class="p">{</span><span class="n">msg</span><span class="o">.</span><span class="n">message_id</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">left</span><span class="p">}</span>
    <span class="n">right</span> <span class="o">=</span> <span class="p">[</span><span class="n">msg</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">right</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">message_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">left_ids</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">delta</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">left</span> <span class="o">+</span> <span class="n">right</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="agentflow.state.append_items" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">append_items</span>


<a href="#agentflow.state.append_items" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">append_items</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Appends items to a list, avoiding duplicates by item.id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h4 id="agentflow.state.append_items(left)" class="doc doc-heading doc-heading-parameter">                  <code>left</code>
<a href="#agentflow.state.append_items(left)" class="headerlink" title="Permanent link">&para;</a></h4>            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing list of items (must have .id attribute).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h4 id="agentflow.state.append_items(right)" class="doc doc-heading doc-heading-parameter">                  <code>right</code>
<a href="#agentflow.state.append_items(right)" class="headerlink" title="Permanent link">&para;</a></h4>            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New items to add.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Combined list with unique items.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>append_items([item1], [item2, item1])
[item1, item2]</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/reducers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">append_items</span><span class="p">(</span><span class="n">left</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">right</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Appends items to a list, avoiding duplicates by item.id.</span>

<span class="sd">    Args:</span>
<span class="sd">        left (list): Existing list of items (must have .id attribute).</span>
<span class="sd">        right (list): New items to add.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: Combined list with unique items.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; append_items([item1], [item2, item1])</span>
<span class="sd">        [item1, item2]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">left_ids</span> <span class="o">=</span> <span class="p">{</span><span class="n">item</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">left</span><span class="p">}</span>
    <span class="n">right</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">right</span> <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">left_ids</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">left</span> <span class="o">+</span> <span class="n">right</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="agentflow.state.remove_tool_messages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">remove_tool_messages</span>


<a href="#agentflow.state.remove_tool_messages" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">remove_tool_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Remove COMPLETED tool interaction sequences from the message list.</p>
<p>A tool sequence is only removed if it's COMPLETE:
1. AI message with tool_calls (triggering tools)
2. One or more tool result messages (role="tool")
3. AI message WITHOUT tool_calls (final response using tool results)</p>
<p>If a sequence is incomplete (e.g., tool call made but no final AI response yet),
ALL messages are kept to maintain conversation continuity.</p>
<p>Edge cases handled:
- Incomplete sequences (AI called tool, waiting for results): Keep everything
- Partial sequences (AI called tool, got results, but no final response): Keep everything
- Multiple tool calls in one AI message: Handles correctly
- Consecutive tool sequences: Each evaluated independently</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h4 id="agentflow.state.remove_tool_messages(messages)" class="doc doc-heading doc-heading-parameter">                  <code>messages</code>
<a href="#agentflow.state.remove_tool_messages(messages)" class="headerlink" title="Permanent link">&para;</a></h4>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of messages to filter.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Message]: Filtered list with only COMPLETED tool sequences removed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>Complete sequence (will be cleaned):</p>
<blockquote>
<blockquote>
<blockquote>
<p>messages = [user_msg, ai_with_tools, tool_result, ai_final]
remove_tool_messages(messages)
[user_msg, ai_final]</p>
</blockquote>
</blockquote>
</blockquote>
<p>Incomplete sequence (will be kept):</p>
<blockquote>
<blockquote>
<blockquote>
<p>messages = [user_msg, ai_with_tools]
remove_tool_messages(messages)
[user_msg, ai_with_tools]  # Keep everything - sequence incomplete!</p>
</blockquote>
</blockquote>
</blockquote>
<p>Partial sequence (will be kept):</p>
<blockquote>
<blockquote>
<blockquote>
<p>messages = [user_msg, ai_with_tools, tool_result]
remove_tool_messages(messages)
[user_msg, ai_with_tools, tool_result]  # Keep - no final AI response!</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/reducers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_tool_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove COMPLETED tool interaction sequences from the message list.</span>

<span class="sd">    A tool sequence is only removed if it&#39;s COMPLETE:</span>
<span class="sd">    1. AI message with tool_calls (triggering tools)</span>
<span class="sd">    2. One or more tool result messages (role=&quot;tool&quot;)</span>
<span class="sd">    3. AI message WITHOUT tool_calls (final response using tool results)</span>

<span class="sd">    If a sequence is incomplete (e.g., tool call made but no final AI response yet),</span>
<span class="sd">    ALL messages are kept to maintain conversation continuity.</span>

<span class="sd">    Edge cases handled:</span>
<span class="sd">    - Incomplete sequences (AI called tool, waiting for results): Keep everything</span>
<span class="sd">    - Partial sequences (AI called tool, got results, but no final response): Keep everything</span>
<span class="sd">    - Multiple tool calls in one AI message: Handles correctly</span>
<span class="sd">    - Consecutive tool sequences: Each evaluated independently</span>

<span class="sd">    Args:</span>
<span class="sd">        messages (list[Message]): List of messages to filter.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Message]: Filtered list with only COMPLETED tool sequences removed.</span>

<span class="sd">    Example:</span>
<span class="sd">        Complete sequence (will be cleaned):</span>
<span class="sd">        &gt;&gt;&gt; messages = [user_msg, ai_with_tools, tool_result, ai_final]</span>
<span class="sd">        &gt;&gt;&gt; remove_tool_messages(messages)</span>
<span class="sd">        [user_msg, ai_final]</span>

<span class="sd">        Incomplete sequence (will be kept):</span>
<span class="sd">        &gt;&gt;&gt; messages = [user_msg, ai_with_tools]</span>
<span class="sd">        &gt;&gt;&gt; remove_tool_messages(messages)</span>
<span class="sd">        [user_msg, ai_with_tools]  # Keep everything - sequence incomplete!</span>

<span class="sd">        Partial sequence (will be kept):</span>
<span class="sd">        &gt;&gt;&gt; messages = [user_msg, ai_with_tools, tool_result]</span>
<span class="sd">        &gt;&gt;&gt; remove_tool_messages(messages)</span>
<span class="sd">        [user_msg, ai_with_tools, tool_result]  # Keep - no final AI response!</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">messages</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">messages</span>

    <span class="c1"># Step 1: Identify indices to remove by scanning for COMPLETE sequences</span>
    <span class="n">indices_to_remove</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="c1"># Look for AI message with tool calls (potential sequence start)</span>
        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;assistant&quot;</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">tools_calls</span><span class="p">:</span>
            <span class="n">sequence_start</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="c1"># Collect all following tool result messages</span>
            <span class="n">tool_result_indices</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span> <span class="ow">and</span> <span class="n">messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;tool&quot;</span><span class="p">:</span>
                <span class="n">tool_result_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="c1"># Check if there&#39;s a final AI response (without tool_calls)</span>
            <span class="n">has_final_response</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;assistant&quot;</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">tools_calls</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">has_final_response</span><span class="p">:</span>
                <span class="c1"># COMPLETE SEQUENCE FOUND!</span>
                <span class="c1"># Mark AI with tool_calls and all tool results for removal</span>
                <span class="n">indices_to_remove</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sequence_start</span><span class="p">)</span>
                <span class="n">indices_to_remove</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tool_result_indices</span><span class="p">)</span>
                <span class="c1"># Note: We keep the final AI response (index i)</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Move past the final AI response</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># INCOMPLETE SEQUENCE - keep everything</span>
                <span class="c1"># Don&#39;t add anything to indices_to_remove</span>
                <span class="c1"># i is already positioned correctly (at next message or end)</span>
                <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># Step 2: Build filtered list excluding marked indices</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">msg</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">msg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span> <span class="k">if</span> <span class="n">idx</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">indices_to_remove</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="agentflow.state.replace_messages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">replace_messages</span>


<a href="#agentflow.state.replace_messages" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">replace_messages</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Replaces the entire message list with a new one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h4 id="agentflow.state.replace_messages(left)" class="doc doc-heading doc-heading-parameter">                  <code>left</code>
<a href="#agentflow.state.replace_messages(left)" class="headerlink" title="Permanent link">&para;</a></h4>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing list of messages (ignored).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h4 id="agentflow.state.replace_messages(right)" class="doc doc-heading doc-heading-parameter">                  <code>right</code>
<a href="#agentflow.state.replace_messages(right)" class="headerlink" title="Permanent link">&para;</a></h4>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New list of messages.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Message]: The new message list.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>replace_messages([msg1], [msg2])
[msg2]</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/reducers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">replace_messages</span><span class="p">(</span><span class="n">left</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">],</span> <span class="n">right</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces the entire message list with a new one.</span>

<span class="sd">    Args:</span>
<span class="sd">        left (list[Message]): Existing list of messages (ignored).</span>
<span class="sd">        right (list[Message]): New list of messages.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Message]: The new message list.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; replace_messages([msg1], [msg2])</span>
<span class="sd">        [msg2]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">right</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="agentflow.state.replace_value" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">replace_value</span>


<a href="#agentflow.state.replace_value" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">replace_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Replaces a value with another.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h4 id="agentflow.state.replace_value(left)" class="doc doc-heading doc-heading-parameter">                  <code>left</code>
<a href="#agentflow.state.replace_value(left)" class="headerlink" title="Permanent link">&para;</a></h4>            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing value (ignored).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h4 id="agentflow.state.replace_value(right)" class="doc doc-heading doc-heading-parameter">                  <code>right</code>
<a href="#agentflow.state.replace_value(right)" class="headerlink" title="Permanent link">&para;</a></h4>            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New value to use.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>replace_value(1, 2)
2</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/reducers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">replace_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a value with another.</span>

<span class="sd">    Args:</span>
<span class="sd">        left: Existing value (ignored).</span>
<span class="sd">        right: New value to use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: The new value.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; replace_value(1, 2)</span>
<span class="sd">        2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">right</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>
<h2 id="agentflow.state-modules">Modules<a href="#agentflow.state-modules" class="headerlink" title="Permanent link">&para;</a></h2>

<div class="doc doc-object doc-module">



<h3 id="agentflow.state.agent_state" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">agent_state</span>


<a href="#agentflow.state.agent_state" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

        <p>Agent state schema for TAF agent graphs.</p>
<p>This module provides the AgentState class, which tracks message context,
context summaries, and internal execution metadata for agent workflows.
Supports subclassing for custom application fields.</p>










<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            AgentState (agentflow.state.agent_state.AgentState)" href="../#agentflow.state.agent_state.AgentState">AgentState</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Common state schema that includes messages, context and internal execution metadata.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>






<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            logger


  
      module-attribute
   (agentflow.state.agent_state.logger)" href="../#agentflow.state.agent_state.logger">logger</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>



  <div class="doc doc-children">





<h4 id="agentflow.state.agent_state-attributes">Attributes<a href="#agentflow.state.agent_state-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.agent_state.logger" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#agentflow.state.agent_state.logger" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<h4 id="agentflow.state.agent_state-classes">Classes<a href="#agentflow.state.agent_state-classes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.agent_state.AgentState" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AgentState</span>


<a href="#agentflow.state.agent_state.AgentState" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Common state schema that includes messages, context and internal execution metadata.</p>
<p>This class can be subclassed to add application-specific fields while maintaining
compatibility with the TAF framework. All internal execution metadata
is preserved through subclassing.</p>
<p>Notes:
- <code>execution_meta</code> contains internal-only execution progress and interrupt info.
- Users may subclass <code>AgentState</code> to add application fields; internal exec meta remains
  available to the runtime and will be persisted with the state.
- When subclassing, add your fields but keep the core fields intact.</p>


<details class="example" open>
  <summary>Example</summary>
  <p>class MyCustomState(AgentState):
    user_data: dict = Field(default_factory=dict)
    custom_field: str = "default"</p>
</details>











<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            advance_step (agentflow.state.agent_state.AgentState.advance_step)" href="../#agentflow.state.agent_state.AgentState.advance_step">advance_step</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Advance the execution step in the metadata.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            clear_interrupt (agentflow.state.agent_state.AgentState.clear_interrupt)" href="../#agentflow.state.agent_state.AgentState.clear_interrupt">clear_interrupt</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Clear any interrupt in the execution metadata.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            complete (agentflow.state.agent_state.AgentState.complete)" href="../#agentflow.state.agent_state.AgentState.complete">complete</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Mark the agent state as completed.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            error (agentflow.state.agent_state.AgentState.error)" href="../#agentflow.state.agent_state.AgentState.error">error</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Mark the agent state as errored.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_interrupted (agentflow.state.agent_state.AgentState.is_interrupted)" href="../#agentflow.state.agent_state.AgentState.is_interrupted">is_interrupted</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if the agent state is currently interrupted.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_running (agentflow.state.agent_state.AgentState.is_running)" href="../#agentflow.state.agent_state.AgentState.is_running">is_running</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if the agent state is currently running.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_stopped_requested (agentflow.state.agent_state.AgentState.is_stopped_requested)" href="../#agentflow.state.agent_state.AgentState.is_stopped_requested">is_stopped_requested</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if a stop has been requested for the agent state.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            set_current_node (agentflow.state.agent_state.AgentState.set_current_node)" href="../#agentflow.state.agent_state.AgentState.set_current_node">set_current_node</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Set the current node in the execution metadata.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            set_interrupt (agentflow.state.agent_state.AgentState.set_interrupt)" href="../#agentflow.state.agent_state.AgentState.set_interrupt">set_interrupt</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Set an interrupt in the execution metadata.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>




<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            context


  
      class-attribute
      instance-attribute
   (agentflow.state.agent_state.AgentState.context)" href="../#agentflow.state.agent_state.AgentState.context">context</a></code></td>
            <td>
                  <code><span title="typing.Annotated">Annotated</span>[<span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>], <a class="autorefs autorefs-internal" title="            add_messages (agentflow.state.reducers.add_messages)" href="../#agentflow.state.reducers.add_messages">add_messages</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            context_summary


  
      class-attribute
      instance-attribute
   (agentflow.state.agent_state.AgentState.context_summary)" href="../#agentflow.state.agent_state.AgentState.context_summary">context_summary</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            execution_meta


  
      class-attribute
      instance-attribute
   (agentflow.state.agent_state.AgentState.execution_meta)" href="../#agentflow.state.agent_state.AgentState.execution_meta">execution_meta</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ExecutionState (agentflow.state.execution_state.ExecutionState)" href="../#agentflow.state.execution_state.ExecutionState">ExecutionState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AgentState</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Common state schema that includes messages, context and internal execution metadata.</span>

<span class="sd">    This class can be subclassed to add application-specific fields while maintaining</span>
<span class="sd">    compatibility with the TAF framework. All internal execution metadata</span>
<span class="sd">    is preserved through subclassing.</span>

<span class="sd">    Notes:</span>
<span class="sd">    - `execution_meta` contains internal-only execution progress and interrupt info.</span>
<span class="sd">    - Users may subclass `AgentState` to add application fields; internal exec meta remains</span>
<span class="sd">      available to the runtime and will be persisted with the state.</span>
<span class="sd">    - When subclassing, add your fields but keep the core fields intact.</span>

<span class="sd">    Example:</span>
<span class="sd">        class MyCustomState(AgentState):</span>
<span class="sd">            user_data: dict = Field(default_factory=dict)</span>
<span class="sd">            custom_field: str = &quot;default&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">context</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">],</span> <span class="n">add_messages</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">context_summary</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Internal execution metadata (kept private-ish but accessible to runtime)</span>
    <span class="n">execution_meta</span><span class="p">:</span> <span class="n">ExecMeta</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">ExecMeta</span><span class="p">(</span><span class="n">current_node</span><span class="o">=</span><span class="n">START</span><span class="p">))</span>

    <span class="c1"># Convenience delegation methods for execution meta so callers can use the same API</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set an interrupt in the execution metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            node (str): Node where the interrupt occurred.</span>
<span class="sd">            reason (str): Reason for the interrupt.</span>
<span class="sd">            status: Execution status to set.</span>
<span class="sd">            data (dict | None): Optional additional interrupt data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Setting interrupt at node &#39;</span><span class="si">%s</span><span class="s2">&#39; with reason: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">set_interrupt</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clear any interrupt in the execution metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing interrupt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">clear_interrupt</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_running</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the agent state is currently running.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if running, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">running</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_running</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_running: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">running</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">running</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_interrupted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the agent state is currently interrupted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if interrupted, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">interrupted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_interrupted</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_interrupted: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">interrupted</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">interrupted</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">advance_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Advance the execution step in the metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">step</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">advance_step</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Advanced step from </span><span class="si">%d</span><span class="s2"> to </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">old_step</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_current_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the current node in the execution metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            node (str): Node to set as current.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">current_node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">set_current_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Changed current node from &#39;</span><span class="si">%s</span><span class="s2">&#39; to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">old_node</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark the agent state as completed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Marking state as completed&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark the agent state as errored.</span>

<span class="sd">        Args:</span>
<span class="sd">            error_msg (str): Error message to record.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Setting state error: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_stopped_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if a stop has been requested for the agent state.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if stop requested, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stopped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_stopped_requested</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_stopped_requested: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">stopped</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">stopped</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.agent_state.AgentState-attributes">Attributes<a href="#agentflow.state.agent_state.AgentState-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.agent_state.AgentState.context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">context</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.agent_state.AgentState.context" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">context</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.agent_state.AgentState.context_summary" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">context_summary</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.agent_state.AgentState.context_summary" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">context_summary</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.agent_state.AgentState.execution_meta" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">execution_meta</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.agent_state.AgentState.execution_meta" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">execution_meta</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">ExecutionState</span><span class="p">(</span><span class="n">current_node</span><span class="o">=</span><span class="n">START</span><span class="p">))</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>


<h6 id="agentflow.state.agent_state.AgentState-functions">Functions<a href="#agentflow.state.agent_state.AgentState-functions" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.agent_state.AgentState.advance_step" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">advance_step</span>


<a href="#agentflow.state.agent_state.AgentState.advance_step" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">advance_step</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Advance the execution step in the metadata.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">advance_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Advance the execution step in the metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">old_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">step</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">advance_step</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Advanced step from </span><span class="si">%d</span><span class="s2"> to </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">old_step</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.agent_state.AgentState.clear_interrupt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">clear_interrupt</span>


<a href="#agentflow.state.agent_state.AgentState.clear_interrupt" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">clear_interrupt</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Clear any interrupt in the execution metadata.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clear any interrupt in the execution metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing interrupt&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">clear_interrupt</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.agent_state.AgentState.complete" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">complete</span>


<a href="#agentflow.state.agent_state.AgentState.complete" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">complete</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Mark the agent state as completed.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mark the agent state as completed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Marking state as completed&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.agent_state.AgentState.error" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">error</span>


<a href="#agentflow.state.agent_state.AgentState.error" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Mark the agent state as errored.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.agent_state.AgentState.error(error_msg)" class="doc doc-heading doc-heading-parameter">                  <code>error_msg</code>
<a href="#agentflow.state.agent_state.AgentState.error(error_msg)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error message to record.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mark the agent state as errored.</span>

<span class="sd">    Args:</span>
<span class="sd">        error_msg (str): Error message to record.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Setting state error: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.agent_state.AgentState.is_interrupted" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_interrupted</span>


<a href="#agentflow.state.agent_state.AgentState.is_interrupted" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_interrupted</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if the agent state is currently interrupted.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if interrupted, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_interrupted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the agent state is currently interrupted.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if interrupted, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">interrupted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_interrupted</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_interrupted: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">interrupted</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">interrupted</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.agent_state.AgentState.is_running" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_running</span>


<a href="#agentflow.state.agent_state.AgentState.is_running" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_running</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if the agent state is currently running.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if running, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_running</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the agent state is currently running.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if running, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">running</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_running</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_running: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">running</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">running</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.agent_state.AgentState.is_stopped_requested" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_stopped_requested</span>


<a href="#agentflow.state.agent_state.AgentState.is_stopped_requested" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_stopped_requested</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if a stop has been requested for the agent state.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if stop requested, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_stopped_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if a stop has been requested for the agent state.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if stop requested, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stopped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">is_stopped_requested</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;State is_stopped_requested: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">stopped</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stopped</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.agent_state.AgentState.set_current_node" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_current_node</span>


<a href="#agentflow.state.agent_state.AgentState.set_current_node" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_current_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the current node in the execution metadata.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.agent_state.AgentState.set_current_node(node)" class="doc doc-heading doc-heading-parameter">                  <code>node</code>
<a href="#agentflow.state.agent_state.AgentState.set_current_node(node)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Node to set as current.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_current_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the current node in the execution metadata.</span>

<span class="sd">    Args:</span>
<span class="sd">        node (str): Node to set as current.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">old_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">current_node</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">set_current_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Changed current node from &#39;</span><span class="si">%s</span><span class="s2">&#39; to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">old_node</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.agent_state.AgentState.set_interrupt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_interrupt</span>


<a href="#agentflow.state.agent_state.AgentState.set_interrupt" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_interrupt</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set an interrupt in the execution metadata.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.agent_state.AgentState.set_interrupt(node)" class="doc doc-heading doc-heading-parameter">                  <code>node</code>
<a href="#agentflow.state.agent_state.AgentState.set_interrupt(node)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Node where the interrupt occurred.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.agent_state.AgentState.set_interrupt(reason)" class="doc doc-heading doc-heading-parameter">                  <code>reason</code>
<a href="#agentflow.state.agent_state.AgentState.set_interrupt(reason)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reason for the interrupt.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.agent_state.AgentState.set_interrupt(status)" class="doc doc-heading doc-heading-parameter">                  <code>status</code>
<a href="#agentflow.state.agent_state.AgentState.set_interrupt(status)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Execution status to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.agent_state.AgentState.set_interrupt(data)" class="doc doc-heading doc-heading-parameter">                  <code>data</code>
<a href="#agentflow.state.agent_state.AgentState.set_interrupt(data)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional additional interrupt data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/agent_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set an interrupt in the execution metadata.</span>

<span class="sd">    Args:</span>
<span class="sd">        node (str): Node where the interrupt occurred.</span>
<span class="sd">        reason (str): Reason for the interrupt.</span>
<span class="sd">        status: Execution status to set.</span>
<span class="sd">        data (dict | None): Optional additional interrupt data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Setting interrupt at node &#39;</span><span class="si">%s</span><span class="s2">&#39; with reason: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_meta</span><span class="o">.</span><span class="n">set_interrupt</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h4 id="agentflow.state.agent_state-functions">Functions<a href="#agentflow.state.agent_state-functions" class="headerlink" title="Permanent link">&para;</a></h4>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="agentflow.state.base_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">base_context</span>


<a href="#agentflow.state.base_context" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

        <p>Abstract base class for context management in TAF agent graphs.</p>
<p>This module provides BaseContextManager, which defines the interface for
trimming and managing message context in agent state objects.</p>










<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            BaseContextManager (agentflow.state.base_context.BaseContextManager)" href="../#agentflow.state.base_context.BaseContextManager">BaseContextManager</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Abstract base class for context management in AI interactions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>






<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            S


  
      module-attribute
   (agentflow.state.base_context.S)" href="../#agentflow.state.base_context.S">S</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            logger


  
      module-attribute
   (agentflow.state.base_context.logger)" href="../#agentflow.state.base_context.logger">logger</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>



  <div class="doc doc-children">





<h4 id="agentflow.state.base_context-attributes">Attributes<a href="#agentflow.state.base_context-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.base_context.S" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">S</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#agentflow.state.base_context.S" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">S</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">AgentState</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.base_context.logger" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#agentflow.state.base_context.logger" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<h4 id="agentflow.state.base_context-classes">Classes<a href="#agentflow.state.base_context-classes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.base_context.BaseContextManager" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseContextManager</span>


<a href="#agentflow.state.base_context.BaseContextManager" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Abstract base class for context management in AI interactions.</p>
<p>Subclasses should implement <code>trim_context</code> as either a synchronous or asynchronous method.
Generic over AgentState or its subclasses.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            atrim_context


  
      abstractmethod
      async
   (agentflow.state.base_context.BaseContextManager.atrim_context)" href="../#agentflow.state.base_context.BaseContextManager.atrim_context">atrim_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Trim context based on message count asynchronously.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            trim_context


  
      abstractmethod
   (agentflow.state.base_context.BaseContextManager.trim_context)" href="../#agentflow.state.base_context.BaseContextManager.trim_context">trim_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Trim context based on message count. Can be sync or async.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>agentflow/state/base_context.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseContextManager</span><span class="p">[</span><span class="n">S</span><span class="p">](</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for context management in AI interactions.</span>

<span class="sd">    Subclasses should implement `trim_context` as either a synchronous or asynchronous method.</span>
<span class="sd">    Generic over AgentState or its subclasses.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">trim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Trim context based on message count. Can be sync or async.</span>

<span class="sd">        Subclasses may implement as either a synchronous or asynchronous method.</span>

<span class="sd">        Args:</span>
<span class="sd">            state: The state containing context to be trimmed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The state with trimmed context, either directly or as an awaitable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method (sync or async)&quot;</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">atrim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Trim context based on message count asynchronously.</span>

<span class="sd">        Args:</span>
<span class="sd">            state: The state containing context to be trimmed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The state with trimmed context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">








<h6 id="agentflow.state.base_context.BaseContextManager-functions">Functions<a href="#agentflow.state.base_context.BaseContextManager-functions" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.base_context.BaseContextManager.atrim_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">atrim_context</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentflow.state.base_context.BaseContextManager.atrim_context" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">atrim_context</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Trim context based on message count asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.base_context.BaseContextManager.atrim_context(state)" class="doc doc-heading doc-heading-parameter">                  <code>state</code>
<a href="#agentflow.state.base_context.BaseContextManager.atrim_context(state)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="agentflow.state.base_context.BaseContextManager[S]">S</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The state containing context to be trimmed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="agentflow.state.base_context.BaseContextManager[S]">S</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The state with trimmed context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/base_context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">atrim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Trim context based on message count asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        state: The state containing context to be trimmed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The state with trimmed context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.base_context.BaseContextManager.trim_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">trim_context</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#agentflow.state.base_context.BaseContextManager.trim_context" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">trim_context</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Trim context based on message count. Can be sync or async.</p>
<p>Subclasses may implement as either a synchronous or asynchronous method.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.base_context.BaseContextManager.trim_context(state)" class="doc doc-heading doc-heading-parameter">                  <code>state</code>
<a href="#agentflow.state.base_context.BaseContextManager.trim_context(state)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="agentflow.state.base_context.BaseContextManager[S]">S</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The state containing context to be trimmed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="agentflow.state.base_context.BaseContextManager[S]">S</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The state with trimmed context, either directly or as an awaitable.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/base_context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">trim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Trim context based on message count. Can be sync or async.</span>

<span class="sd">    Subclasses may implement as either a synchronous or asynchronous method.</span>

<span class="sd">    Args:</span>
<span class="sd">        state: The state containing context to be trimmed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The state with trimmed context, either directly or as an awaitable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method (sync or async)&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="agentflow.state.execution_state" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">execution_state</span>


<a href="#agentflow.state.execution_state" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

        <p>Execution state management for graph execution in TAF.</p>
<p>This module provides the ExecutionState class and related enums to track
progress, interruptions, and pause/resume functionality for agent graph execution.</p>










<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ExecutionState (agentflow.state.execution_state.ExecutionState)" href="../#agentflow.state.execution_state.ExecutionState">ExecutionState</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Tracks the internal execution state of a graph.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ExecutionStatus (agentflow.state.execution_state.ExecutionStatus)" href="../#agentflow.state.execution_state.ExecutionStatus">ExecutionStatus</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Status of graph execution.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            StopRequestStatus (agentflow.state.execution_state.StopRequestStatus)" href="../#agentflow.state.execution_state.StopRequestStatus">StopRequestStatus</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Status of graph execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>






<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            logger


  
      module-attribute
   (agentflow.state.execution_state.logger)" href="../#agentflow.state.execution_state.logger">logger</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>



  <div class="doc doc-children">





<h4 id="agentflow.state.execution_state-attributes">Attributes<a href="#agentflow.state.execution_state-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.execution_state.logger" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.logger" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<h4 id="agentflow.state.execution_state-classes">Classes<a href="#agentflow.state.execution_state-classes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.execution_state.ExecutionState" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ExecutionState</span>


<a href="#agentflow.state.execution_state.ExecutionState" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Tracks the internal execution state of a graph.</p>
<p>This class manages the execution progress, interrupt status, and internal
data that should not be exposed to users.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            advance_step (agentflow.state.execution_state.ExecutionState.advance_step)" href="../#agentflow.state.execution_state.ExecutionState.advance_step">advance_step</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Advance to the next execution step.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            clear_interrupt (agentflow.state.execution_state.ExecutionState.clear_interrupt)" href="../#agentflow.state.execution_state.ExecutionState.clear_interrupt">clear_interrupt</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Clear the interrupt state and resume execution.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            complete (agentflow.state.execution_state.ExecutionState.complete)" href="../#agentflow.state.execution_state.ExecutionState.complete">complete</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Mark execution as completed.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            error (agentflow.state.execution_state.ExecutionState.error)" href="../#agentflow.state.execution_state.ExecutionState.error">error</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Mark execution as errored.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            from_dict


  
      classmethod
   (agentflow.state.execution_state.ExecutionState.from_dict)" href="../#agentflow.state.execution_state.ExecutionState.from_dict">from_dict</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Create an ExecutionState instance from a dictionary.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_interrupted (agentflow.state.execution_state.ExecutionState.is_interrupted)" href="../#agentflow.state.execution_state.ExecutionState.is_interrupted">is_interrupted</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if execution is currently interrupted.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_running (agentflow.state.execution_state.ExecutionState.is_running)" href="../#agentflow.state.execution_state.ExecutionState.is_running">is_running</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if execution is currently running.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            is_stopped_requested (agentflow.state.execution_state.ExecutionState.is_stopped_requested)" href="../#agentflow.state.execution_state.ExecutionState.is_stopped_requested">is_stopped_requested</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if a stop has been requested for execution.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            set_current_node (agentflow.state.execution_state.ExecutionState.set_current_node)" href="../#agentflow.state.execution_state.ExecutionState.set_current_node">set_current_node</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Update the current node in execution state.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            set_interrupt (agentflow.state.execution_state.ExecutionState.set_interrupt)" href="../#agentflow.state.execution_state.ExecutionState.set_interrupt">set_interrupt</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Set the interrupt state for execution.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>




<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            current_node


  
      instance-attribute
   (agentflow.state.execution_state.ExecutionState.current_node)" href="../#agentflow.state.execution_state.ExecutionState.current_node">current_node</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            internal_data


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionState.internal_data)" href="../#agentflow.state.execution_state.ExecutionState.internal_data">internal_data</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            interrupt_data


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionState.interrupt_data)" href="../#agentflow.state.execution_state.ExecutionState.interrupt_data">interrupt_data</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            interrupt_reason


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionState.interrupt_reason)" href="../#agentflow.state.execution_state.ExecutionState.interrupt_reason">interrupt_reason</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            interrupted_node


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionState.interrupted_node)" href="../#agentflow.state.execution_state.ExecutionState.interrupted_node">interrupted_node</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            status


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionState.status)" href="../#agentflow.state.execution_state.ExecutionState.status">status</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ExecutionStatus (agentflow.state.execution_state.ExecutionStatus)" href="../#agentflow.state.execution_state.ExecutionStatus">ExecutionStatus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            step


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionState.step)" href="../#agentflow.state.execution_state.ExecutionState.step">step</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            stop_current_execution


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionState.stop_current_execution)" href="../#agentflow.state.execution_state.ExecutionState.stop_current_execution">stop_current_execution</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            StopRequestStatus (agentflow.state.execution_state.StopRequestStatus)" href="../#agentflow.state.execution_state.StopRequestStatus">StopRequestStatus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            thread_id


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionState.thread_id)" href="../#agentflow.state.execution_state.ExecutionState.thread_id">thread_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExecutionState</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tracks the internal execution state of a graph.</span>

<span class="sd">    This class manages the execution progress, interrupt status, and internal</span>
<span class="sd">    data that should not be exposed to users.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Core execution tracking</span>
    <span class="n">current_node</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">step</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">ExecutionStatus</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>

    <span class="c1"># Interrupt management</span>
    <span class="n">interrupted_node</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">interrupt_reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">interrupt_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Thread/session identification</span>
    <span class="n">thread_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Stop Current Execution Flag</span>
    <span class="n">stop_current_execution</span><span class="p">:</span> <span class="n">StopRequestStatus</span> <span class="o">=</span> <span class="n">StopRequestStatus</span><span class="o">.</span><span class="n">NONE</span>

    <span class="c1"># Internal execution data (hidden from user)</span>
    <span class="n">internal_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;ExecutionState&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an ExecutionState instance from a dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (dict[str, Any]): Dictionary containing execution state fields.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ExecutionState: The deserialized execution state object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;current_node&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;current_node&quot;</span><span class="p">],</span>
                <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">ExecutionStatus</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;running&quot;</span><span class="p">)),</span>
                <span class="s2">&quot;interrupted_node&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupted_node&quot;</span><span class="p">),</span>
                <span class="s2">&quot;interrupt_reason&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupt_reason&quot;</span><span class="p">),</span>
                <span class="s2">&quot;interrupt_data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupt_data&quot;</span><span class="p">),</span>
                <span class="s2">&quot;thread_id&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;thread_id&quot;</span><span class="p">),</span>
                <span class="s2">&quot;internal_data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_internal_data&quot;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_interrupt</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="n">ExecutionStatus</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the interrupt state for execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            node (str): Node where the interrupt occurred.</span>
<span class="sd">            reason (str): Reason for the interrupt.</span>
<span class="sd">            status (ExecutionStatus): Status to set for the interrupt.</span>
<span class="sd">            data (dict[str, Any] | None): Optional additional interrupt data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Setting interrupt: node=&#39;</span><span class="si">%s</span><span class="s2">&#39;, reason=&#39;</span><span class="si">%s</span><span class="s2">&#39;, status=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
            <span class="n">node</span><span class="p">,</span>
            <span class="n">reason</span><span class="p">,</span>
            <span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupted_node</span> <span class="o">=</span> <span class="n">node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_reason</span> <span class="o">=</span> <span class="n">reason</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_data</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clear the interrupt state and resume execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing interrupt, resuming execution&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupted_node</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_reason</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_data</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_interrupted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if execution is currently interrupted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if interrupted, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">interrupted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">INTERRUPTED_BEFORE</span><span class="p">,</span>
            <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">INTERRUPTED_AFTER</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Execution is_interrupted: </span><span class="si">%s</span><span class="s2"> (status: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">interrupted</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">interrupted</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">advance_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Advance to the next execution step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Advanced step from </span><span class="si">%d</span><span class="s2"> to </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">old_step</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_current_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the current node in execution state.</span>

<span class="sd">        Args:</span>
<span class="sd">            node (str): Node to set as current.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_node</span> <span class="o">=</span> <span class="n">node</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Changed current node from &#39;</span><span class="si">%s</span><span class="s2">&#39; to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">old_node</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark execution as completed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Marking execution as completed&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">COMPLETED</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark execution as errored.</span>

<span class="sd">        Args:</span>
<span class="sd">            error_msg (str): Error message to record.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Marking execution as errored: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">ERROR</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">internal_data</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">error_msg</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_running</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if execution is currently running.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if running, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">running</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Execution is_running: </span><span class="si">%s</span><span class="s2"> (status: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">running</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">running</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_stopped_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if a stop has been requested for execution.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if stop requested, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stopped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_current_execution</span> <span class="o">==</span> <span class="n">StopRequestStatus</span><span class="o">.</span><span class="n">STOP_REQUESTED</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Execution is_stopped_requested: </span><span class="si">%s</span><span class="s2"> (stop_current_execution: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="n">stopped</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stop_current_execution</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">stopped</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.execution_state.ExecutionState-attributes">Attributes<a href="#agentflow.state.execution_state.ExecutionState-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionState.current_node" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">current_node</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionState.current_node" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">current_node</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionState.internal_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">internal_data</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionState.internal_data" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">internal_data</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionState.interrupt_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">interrupt_data</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionState.interrupt_data" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interrupt_data</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionState.interrupt_reason" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">interrupt_reason</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionState.interrupt_reason" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interrupt_reason</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionState.interrupted_node" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">interrupted_node</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionState.interrupted_node" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interrupted_node</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionState.status" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">status</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionState.status" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">status</span> <span class="o">=</span> <span class="n">RUNNING</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionState.step" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">step</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionState.step" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionState.stop_current_execution" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">stop_current_execution</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionState.stop_current_execution" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">stop_current_execution</span> <span class="o">=</span> <span class="n">NONE</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionState.thread_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">thread_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionState.thread_id" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">thread_id</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>


<h6 id="agentflow.state.execution_state.ExecutionState-functions">Functions<a href="#agentflow.state.execution_state.ExecutionState-functions" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.execution_state.ExecutionState.advance_step" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">advance_step</span>


<a href="#agentflow.state.execution_state.ExecutionState.advance_step" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">advance_step</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Advance to the next execution step.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">advance_step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Advance to the next execution step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">old_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Advanced step from </span><span class="si">%d</span><span class="s2"> to </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">old_step</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.execution_state.ExecutionState.clear_interrupt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">clear_interrupt</span>


<a href="#agentflow.state.execution_state.ExecutionState.clear_interrupt" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">clear_interrupt</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Clear the interrupt state and resume execution.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clear the interrupt state and resume execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing interrupt, resuming execution&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupted_node</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_reason</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_data</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.execution_state.ExecutionState.complete" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">complete</span>


<a href="#agentflow.state.execution_state.ExecutionState.complete" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">complete</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Mark execution as completed.</p>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mark execution as completed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Marking execution as completed&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">COMPLETED</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.execution_state.ExecutionState.error" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">error</span>


<a href="#agentflow.state.execution_state.ExecutionState.error" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">error</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Mark execution as errored.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.execution_state.ExecutionState.error(error_msg)" class="doc doc-heading doc-heading-parameter">                  <code>error_msg</code>
<a href="#agentflow.state.execution_state.ExecutionState.error(error_msg)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error message to record.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mark execution as errored.</span>

<span class="sd">    Args:</span>
<span class="sd">        error_msg (str): Error message to record.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Marking execution as errored: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">ERROR</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">internal_data</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">error_msg</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.execution_state.ExecutionState.from_dict" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">from_dict</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionState.from_dict" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create an ExecutionState instance from a dictionary.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.execution_state.ExecutionState.from_dict(data)" class="doc doc-heading doc-heading-parameter">                  <code>data</code>
<a href="#agentflow.state.execution_state.ExecutionState.from_dict(data)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary containing execution state fields.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ExecutionState</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            ExecutionState (agentflow.state.execution_state.ExecutionState)" href="../#agentflow.state.execution_state.ExecutionState">ExecutionState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The deserialized execution state object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;ExecutionState&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an ExecutionState instance from a dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (dict[str, Any]): Dictionary containing execution state fields.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ExecutionState: The deserialized execution state object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;current_node&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;current_node&quot;</span><span class="p">],</span>
            <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">ExecutionStatus</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;running&quot;</span><span class="p">)),</span>
            <span class="s2">&quot;interrupted_node&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupted_node&quot;</span><span class="p">),</span>
            <span class="s2">&quot;interrupt_reason&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupt_reason&quot;</span><span class="p">),</span>
            <span class="s2">&quot;interrupt_data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interrupt_data&quot;</span><span class="p">),</span>
            <span class="s2">&quot;thread_id&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;thread_id&quot;</span><span class="p">),</span>
            <span class="s2">&quot;internal_data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_internal_data&quot;</span><span class="p">,</span> <span class="p">{}),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.execution_state.ExecutionState.is_interrupted" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_interrupted</span>


<a href="#agentflow.state.execution_state.ExecutionState.is_interrupted" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_interrupted</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if execution is currently interrupted.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if interrupted, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_interrupted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if execution is currently interrupted.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if interrupted, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">interrupted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="ow">in</span> <span class="p">[</span>
        <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">INTERRUPTED_BEFORE</span><span class="p">,</span>
        <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">INTERRUPTED_AFTER</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Execution is_interrupted: </span><span class="si">%s</span><span class="s2"> (status: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">interrupted</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">interrupted</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.execution_state.ExecutionState.is_running" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_running</span>


<a href="#agentflow.state.execution_state.ExecutionState.is_running" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_running</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if execution is currently running.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if running, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_running</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if execution is currently running.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if running, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">running</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Execution is_running: </span><span class="si">%s</span><span class="s2"> (status: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">running</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">running</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.execution_state.ExecutionState.is_stopped_requested" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_stopped_requested</span>


<a href="#agentflow.state.execution_state.ExecutionState.is_stopped_requested" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_stopped_requested</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if a stop has been requested for execution.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if stop requested, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_stopped_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if a stop has been requested for execution.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if stop requested, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stopped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_current_execution</span> <span class="o">==</span> <span class="n">StopRequestStatus</span><span class="o">.</span><span class="n">STOP_REQUESTED</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Execution is_stopped_requested: </span><span class="si">%s</span><span class="s2"> (stop_current_execution: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
        <span class="n">stopped</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_current_execution</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">stopped</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.execution_state.ExecutionState.set_current_node" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_current_node</span>


<a href="#agentflow.state.execution_state.ExecutionState.set_current_node" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_current_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Update the current node in execution state.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.execution_state.ExecutionState.set_current_node(node)" class="doc doc-heading doc-heading-parameter">                  <code>node</code>
<a href="#agentflow.state.execution_state.ExecutionState.set_current_node(node)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Node to set as current.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_current_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the current node in execution state.</span>

<span class="sd">    Args:</span>
<span class="sd">        node (str): Node to set as current.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">old_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_node</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">current_node</span> <span class="o">=</span> <span class="n">node</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Changed current node from &#39;</span><span class="si">%s</span><span class="s2">&#39; to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">old_node</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.execution_state.ExecutionState.set_interrupt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_interrupt</span>


<a href="#agentflow.state.execution_state.ExecutionState.set_interrupt" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_interrupt</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the interrupt state for execution.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.execution_state.ExecutionState.set_interrupt(node)" class="doc doc-heading doc-heading-parameter">                  <code>node</code>
<a href="#agentflow.state.execution_state.ExecutionState.set_interrupt(node)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Node where the interrupt occurred.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.execution_state.ExecutionState.set_interrupt(reason)" class="doc doc-heading doc-heading-parameter">                  <code>reason</code>
<a href="#agentflow.state.execution_state.ExecutionState.set_interrupt(reason)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reason for the interrupt.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.execution_state.ExecutionState.set_interrupt(status)" class="doc doc-heading doc-heading-parameter">                  <code>status</code>
<a href="#agentflow.state.execution_state.ExecutionState.set_interrupt(status)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ExecutionStatus (agentflow.state.execution_state.ExecutionStatus)" href="../#agentflow.state.execution_state.ExecutionStatus">ExecutionStatus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Status to set for the interrupt.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.execution_state.ExecutionState.set_interrupt(data)" class="doc doc-heading doc-heading-parameter">                  <code>data</code>
<a href="#agentflow.state.execution_state.ExecutionState.set_interrupt(data)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional additional interrupt data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_interrupt</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="n">ExecutionStatus</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the interrupt state for execution.</span>

<span class="sd">    Args:</span>
<span class="sd">        node (str): Node where the interrupt occurred.</span>
<span class="sd">        reason (str): Reason for the interrupt.</span>
<span class="sd">        status (ExecutionStatus): Status to set for the interrupt.</span>
<span class="sd">        data (dict[str, Any] | None): Optional additional interrupt data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Setting interrupt: node=&#39;</span><span class="si">%s</span><span class="s2">&#39;, reason=&#39;</span><span class="si">%s</span><span class="s2">&#39;, status=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
        <span class="n">node</span><span class="p">,</span>
        <span class="n">reason</span><span class="p">,</span>
        <span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupted_node</span> <span class="o">=</span> <span class="n">node</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_reason</span> <span class="o">=</span> <span class="n">reason</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_data</span> <span class="o">=</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.execution_state.ExecutionStatus" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ExecutionStatus</span>


<a href="#agentflow.state.execution_state.ExecutionStatus" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Status of graph execution.</p>














<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            COMPLETED


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionStatus.COMPLETED)" href="../#agentflow.state.execution_state.ExecutionStatus.COMPLETED">COMPLETED</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ERROR


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionStatus.ERROR)" href="../#agentflow.state.execution_state.ExecutionStatus.ERROR">ERROR</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            INTERRUPTED_AFTER


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionStatus.INTERRUPTED_AFTER)" href="../#agentflow.state.execution_state.ExecutionStatus.INTERRUPTED_AFTER">INTERRUPTED_AFTER</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            INTERRUPTED_BEFORE


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionStatus.INTERRUPTED_BEFORE)" href="../#agentflow.state.execution_state.ExecutionStatus.INTERRUPTED_BEFORE">INTERRUPTED_BEFORE</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            RUNNING


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.ExecutionStatus.RUNNING)" href="../#agentflow.state.execution_state.ExecutionStatus.RUNNING">RUNNING</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExecutionStatus</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Status of graph execution.&quot;&quot;&quot;</span>

    <span class="n">RUNNING</span> <span class="o">=</span> <span class="s2">&quot;running&quot;</span>
    <span class="n">INTERRUPTED_BEFORE</span> <span class="o">=</span> <span class="s2">&quot;interrupted_before&quot;</span>
    <span class="n">INTERRUPTED_AFTER</span> <span class="o">=</span> <span class="s2">&quot;interrupted_after&quot;</span>
    <span class="n">COMPLETED</span> <span class="o">=</span> <span class="s2">&quot;completed&quot;</span>
    <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.execution_state.ExecutionStatus-attributes">Attributes<a href="#agentflow.state.execution_state.ExecutionStatus-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionStatus.COMPLETED" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">COMPLETED</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionStatus.COMPLETED" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">COMPLETED</span> <span class="o">=</span> <span class="s1">&#39;completed&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionStatus.ERROR" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">ERROR</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionStatus.ERROR" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ERROR</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionStatus.INTERRUPTED_AFTER" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">INTERRUPTED_AFTER</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionStatus.INTERRUPTED_AFTER" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">INTERRUPTED_AFTER</span> <span class="o">=</span> <span class="s1">&#39;interrupted_after&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionStatus.INTERRUPTED_BEFORE" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">INTERRUPTED_BEFORE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionStatus.INTERRUPTED_BEFORE" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">INTERRUPTED_BEFORE</span> <span class="o">=</span> <span class="s1">&#39;interrupted_before&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.ExecutionStatus.RUNNING" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">RUNNING</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.ExecutionStatus.RUNNING" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">RUNNING</span> <span class="o">=</span> <span class="s1">&#39;running&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.execution_state.StopRequestStatus" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">StopRequestStatus</span>


<a href="#agentflow.state.execution_state.StopRequestStatus" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Status of graph execution.</p>














<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            NONE


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.StopRequestStatus.NONE)" href="../#agentflow.state.execution_state.StopRequestStatus.NONE">NONE</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            STOPPED


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.StopRequestStatus.STOPPED)" href="../#agentflow.state.execution_state.StopRequestStatus.STOPPED">STOPPED</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            STOP_REQUESTED


  
      class-attribute
      instance-attribute
   (agentflow.state.execution_state.StopRequestStatus.STOP_REQUESTED)" href="../#agentflow.state.execution_state.StopRequestStatus.STOP_REQUESTED">STOP_REQUESTED</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>agentflow/state/execution_state.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StopRequestStatus</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Status of graph execution.&quot;&quot;&quot;</span>

    <span class="n">NONE</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
    <span class="n">STOP_REQUESTED</span> <span class="o">=</span> <span class="s2">&quot;stop_requested&quot;</span>
    <span class="n">STOPPED</span> <span class="o">=</span> <span class="s2">&quot;stopped&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.execution_state.StopRequestStatus-attributes">Attributes<a href="#agentflow.state.execution_state.StopRequestStatus-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.StopRequestStatus.NONE" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">NONE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.StopRequestStatus.NONE" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">NONE</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.StopRequestStatus.STOPPED" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">STOPPED</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.StopRequestStatus.STOPPED" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">STOPPED</span> <span class="o">=</span> <span class="s1">&#39;stopped&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.execution_state.StopRequestStatus.STOP_REQUESTED" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">STOP_REQUESTED</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.execution_state.StopRequestStatus.STOP_REQUESTED" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">STOP_REQUESTED</span> <span class="o">=</span> <span class="s1">&#39;stop_requested&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="agentflow.state.message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">message</span>


<a href="#agentflow.state.message" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

        <p>Message and content block primitives for agent graphs.</p>
<p>This module defines the core message representation, multimodal content blocks,
token usage tracking, and utility functions for agent graph communication.</p>


<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            TokenUsages (agentflow.state.message.TokenUsages)" href="../#agentflow.state.message.TokenUsages">TokenUsages</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Tracks token usage statistics for a message or model response.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message.MediaRef)" href="#agentflow.state.MediaRef">MediaRef</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Reference to media content (image/audio/video/document/data).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="agentflow.state.message.AnnotationRef">AnnotationRef</span></code></td>
            <td>
              <div class="doc-md-description">
                <p>Reference to annotation metadata.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Represents a message in a conversation, including content, role, metadata,
and token usage.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Functions:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            generate_id (agentflow.state.message.generate_id)" href="../#agentflow.state.message.generate_id">generate_id</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Generates a message or tool call ID based on DI context and type.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>














<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            logger


  
      module-attribute
   (agentflow.state.message.logger)" href="../#agentflow.state.message.logger">logger</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>



  <div class="doc doc-children">





<h4 id="agentflow.state.message-attributes">Attributes<a href="#agentflow.state.message-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.message.logger" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#agentflow.state.message.logger" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<h4 id="agentflow.state.message-classes">Classes<a href="#agentflow.state.message-classes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message.Message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Message</span>


<a href="#agentflow.state.message.Message" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Represents a message in a conversation, including content, role, metadata, and token usage.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            message_id


  
      class-attribute
      instance-attribute
   (agentflow.state.message.Message.message_id)" href="../#agentflow.state.message.Message.message_id">message_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unique identifier for the message.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            role


  
      instance-attribute
   (agentflow.state.message.Message.role)" href="../#agentflow.state.message.Message.role">role</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;user&#39;, &#39;assistant&#39;, &#39;system&#39;, &#39;tool&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The role of the message sender.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            content


  
      instance-attribute
   (agentflow.state.message.Message.content)" href="../#agentflow.state.message.Message.content">content</a></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            ContentBlock


  
      module-attribute
   (agentflow.state.message_block.ContentBlock)" href="../#agentflow.state.message_block.ContentBlock">ContentBlock</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message content blocks.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            delta


  
      class-attribute
      instance-attribute
   (agentflow.state.message.Message.delta)" href="../#agentflow.state.message.Message.delta">delta</a></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indicates if this is a delta/partial message.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            tools_calls


  
      class-attribute
      instance-attribute
   (agentflow.state.message.Message.tools_calls)" href="../#agentflow.state.message.Message.tools_calls">tools_calls</a></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tool call information, if any.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            reasoning


  
      class-attribute
      instance-attribute
   (agentflow.state.message.Message.reasoning)" href="../#agentflow.state.message.Message.reasoning">reasoning</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reasoning or explanation, if any.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            timestamp


  
      class-attribute
      instance-attribute
   (agentflow.state.message.Message.timestamp)" href="../#agentflow.state.message.Message.timestamp">timestamp</a></code></td>
            <td>
                  <code><span title="datetime.datetime">datetime</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp of the message.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            metadata


  
      class-attribute
      instance-attribute
   (agentflow.state.message.Message.metadata)" href="../#agentflow.state.message.Message.metadata">metadata</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional metadata.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            usages


  
      class-attribute
      instance-attribute
   (agentflow.state.message.Message.usages)" href="../#agentflow.state.message.Message.usages">usages</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            TokenUsages (agentflow.state.message.TokenUsages)" href="../#agentflow.state.message.TokenUsages">TokenUsages</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token usage statistics.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            raw


  
      class-attribute
      instance-attribute
   (agentflow.state.message.Message.raw)" href="../#agentflow.state.message.Message.raw">raw</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raw data, if any.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p _..._="[...]," _abc123_="'abc123'," _content_:="'content':" _message_id_:="'message_id':" _role_:="'role':" _user_="'user'," class="..">msg = Message(message_id="abc123", role="user", content=[TextBlock(text="Hello!")])</p>
</blockquote>
</blockquote>
</blockquote>
</details>











<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            attach_media (agentflow.state.message.Message.attach_media)" href="../#agentflow.state.message.Message.attach_media">attach_media</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Append a media block to the content.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            text (agentflow.state.message.Message.text)" href="../#agentflow.state.message.Message.text">text</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Best-effort text extraction from content blocks.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            text_message


  
      classmethod
   (agentflow.state.message.Message.text_message)" href="../#agentflow.state.message.Message.text_message">text_message</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Create a Message instance from plain text.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            tool_message


  
      classmethod
   (agentflow.state.message.Message.tool_message)" href="../#agentflow.state.message.Message.tool_message">tool_message</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Create a tool message, optionally marking it as an error.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>agentflow/state/message.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Message</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a message in a conversation, including content, role, metadata, and token usage.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        message_id (str | int): Unique identifier for the message.</span>
<span class="sd">        role (Literal[&quot;user&quot;, &quot;assistant&quot;, &quot;system&quot;, &quot;tool&quot;]): The role of the message sender.</span>
<span class="sd">        content (list[ContentBlock]): The message content blocks.</span>
<span class="sd">        delta (bool): Indicates if this is a delta/partial message.</span>
<span class="sd">        tools_calls (list[dict[str, Any]] | None): Tool call information, if any.</span>
<span class="sd">        reasoning (str | None): Reasoning or explanation, if any.</span>
<span class="sd">        timestamp (datetime | None): Timestamp of the message.</span>
<span class="sd">        metadata (dict[str, Any]): Additional metadata.</span>
<span class="sd">        usages (TokenUsages | None): Token usage statistics.</span>
<span class="sd">        raw (dict[str, Any] | None): Raw data, if any.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; msg = Message(message_id=&quot;abc123&quot;, role=&quot;user&quot;, content=[TextBlock(text=&quot;Hello!&quot;)])</span>
<span class="sd">        {&#39;message_id&#39;: &#39;abc123&#39;, &#39;role&#39;: &#39;user&#39;, &#39;content&#39;: [...], ...}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">generate_id</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
    <span class="n">role</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;tool&quot;</span><span class="p">]</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">]</span>
    <span class="n">delta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Indicates if this is a delta/partial message</span>
    <span class="n">tools_calls</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">reasoning</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Remove it</span>
    <span class="n">timestamp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">())</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">usages</span><span class="p">:</span> <span class="n">TokenUsages</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">raw</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">text_message</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">role</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;tool&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Message&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a Message instance from plain text.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str): The message content.</span>
<span class="sd">            role (Literal[&quot;user&quot;, &quot;assistant&quot;, &quot;system&quot;, &quot;tool&quot;]): The role of the sender.</span>
<span class="sd">            message_id (str | None): Optional message ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Message: The created Message instance.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; Message.text_message(&quot;Hello!&quot;, role=&quot;user&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating message from text with role: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">generate_id</span><span class="p">(</span><span class="n">message_id</span><span class="p">),</span>
            <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="p">[</span><span class="n">TextBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">content</span><span class="p">)],</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">{},</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tool_message</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">meta</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Message&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a tool message, optionally marking it as an error.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (list[ContentBlock]): The message content blocks.</span>
<span class="sd">            message_id (str | None): Optional message ID.</span>
<span class="sd">            meta (dict[str, Any] | None): Optional metadata.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Message: The created tool message instance.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; Message.tool_message([ToolResultBlock(...)], message_id=&quot;tool1&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">content</span>
        <span class="n">msg_id</span> <span class="o">=</span> <span class="n">generate_id</span><span class="p">(</span><span class="n">message_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">msg_id</span><span class="p">,</span>
            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;tool&quot;</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">meta</span> <span class="ow">or</span> <span class="p">{},</span>
        <span class="p">)</span>

    <span class="c1"># --- Convenience helpers ---</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Best-effort text extraction from content blocks.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Concatenated text from TextBlock and ToolResultBlock outputs.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; msg.text()</span>
<span class="sd">            &#39;Hello!Result text.&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">TextBlock</span><span class="p">):</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">ToolResultBlock</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">attach_media</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span><span class="p">,</span>
        <span class="n">as_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;audio&quot;</span><span class="p">,</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span> <span class="s2">&quot;document&quot;</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Append a media block to the content.</span>

<span class="sd">        If content was text, creates a block list. Supports image, audio, video, and document types.</span>

<span class="sd">        Args:</span>
<span class="sd">            media (MediaRef): Reference to media content.</span>
<span class="sd">            as_type (Literal[&quot;image&quot;, &quot;audio&quot;, &quot;video&quot;, &quot;document&quot;]): Type of media block to append.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If an unsupported media type is provided.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; msg.attach_media(media_ref, as_type=&quot;image&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">block</span><span class="p">:</span> <span class="n">ContentBlock</span>
        <span class="k">if</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span>
            <span class="n">block</span> <span class="o">=</span> <span class="n">ImageBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;audio&quot;</span><span class="p">:</span>
            <span class="n">block</span> <span class="o">=</span> <span class="n">AudioBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;video&quot;</span><span class="p">:</span>
            <span class="n">block</span> <span class="o">=</span> <span class="n">VideoBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;document&quot;</span><span class="p">:</span>
            <span class="n">block</span> <span class="o">=</span> <span class="n">DocumentBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported media type: </span><span class="si">{</span><span class="n">as_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="p">[</span><span class="n">TextBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="n">block</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="p">[</span><span class="n">block</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message.Message-attributes">Attributes<a href="#agentflow.state.message.Message-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.Message.content" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">content</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.Message.content" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">content</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.Message.delta" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">delta</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.Message.delta" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">delta</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.Message.message_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">message_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.Message.message_id" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">message_id</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">generate_id</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.Message.metadata" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">metadata</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.Message.metadata" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">metadata</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.Message.raw" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">raw</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.Message.raw" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">raw</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.Message.reasoning" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">reasoning</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.Message.reasoning" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">reasoning</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.Message.role" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">role</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.Message.role" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">role</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.Message.timestamp" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">timestamp</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.Message.timestamp" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">timestamp</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">())</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.Message.tools_calls" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">tools_calls</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.Message.tools_calls" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">tools_calls</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.Message.usages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">usages</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.Message.usages" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">usages</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>


<h6 id="agentflow.state.message.Message-functions">Functions<a href="#agentflow.state.message.Message-functions" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.message.Message.attach_media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">attach_media</span>


<a href="#agentflow.state.message.Message.attach_media" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">attach_media</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="n">as_type</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Append a media block to the content.</p>
<p>If content was text, creates a block list. Supports image, audio, video, and document types.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message.Message.attach_media(media)" class="doc doc-heading doc-heading-parameter">                  <code>media</code>
<a href="#agentflow.state.message.Message.attach_media(media)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to media content.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message.Message.attach_media(as_type)" class="doc doc-heading doc-heading-parameter">                  <code>as_type</code>
<a href="#agentflow.state.message.Message.attach_media(as_type)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;image&#39;, &#39;audio&#39;, &#39;video&#39;, &#39;document&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of media block to append.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an unsupported media type is provided.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>msg.attach_media(media_ref, as_type="image")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/message.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">attach_media</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span><span class="p">,</span>
    <span class="n">as_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;audio&quot;</span><span class="p">,</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span> <span class="s2">&quot;document&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Append a media block to the content.</span>

<span class="sd">    If content was text, creates a block list. Supports image, audio, video, and document types.</span>

<span class="sd">    Args:</span>
<span class="sd">        media (MediaRef): Reference to media content.</span>
<span class="sd">        as_type (Literal[&quot;image&quot;, &quot;audio&quot;, &quot;video&quot;, &quot;document&quot;]): Type of media block to append.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If an unsupported media type is provided.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; msg.attach_media(media_ref, as_type=&quot;image&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">block</span><span class="p">:</span> <span class="n">ContentBlock</span>
    <span class="k">if</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span>
        <span class="n">block</span> <span class="o">=</span> <span class="n">ImageBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;audio&quot;</span><span class="p">:</span>
        <span class="n">block</span> <span class="o">=</span> <span class="n">AudioBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;video&quot;</span><span class="p">:</span>
        <span class="n">block</span> <span class="o">=</span> <span class="n">VideoBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">as_type</span> <span class="o">==</span> <span class="s2">&quot;document&quot;</span><span class="p">:</span>
        <span class="n">block</span> <span class="o">=</span> <span class="n">DocumentBlock</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported media type: </span><span class="si">{</span><span class="n">as_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="p">[</span><span class="n">TextBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="n">block</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="p">[</span><span class="n">block</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.message.Message.text" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">text</span>


<a href="#agentflow.state.message.Message.text" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">text</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Best-effort text extraction from content blocks.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Concatenated text from TextBlock and ToolResultBlock outputs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>msg.text()
'Hello!Result text.'</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/message.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Best-effort text extraction from content blocks.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Concatenated text from TextBlock and ToolResultBlock outputs.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; msg.text()</span>
<span class="sd">        &#39;Hello!Result text.&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">TextBlock</span><span class="p">):</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">ToolResultBlock</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.message.Message.text_message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">text_message</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#agentflow.state.message.Message.text_message" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">text_message</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a Message instance from plain text.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message.Message.text_message(content)" class="doc doc-heading doc-heading-parameter">                  <code>content</code>
<a href="#agentflow.state.message.Message.text_message(content)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message content.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message.Message.text_message(role)" class="doc doc-heading doc-heading-parameter">                  <code>role</code>
<a href="#agentflow.state.message.Message.text_message(role)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;user&#39;, &#39;assistant&#39;, &#39;system&#39;, &#39;tool&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The role of the sender.</p>
              </div>
            </td>
            <td>
                  <code>&#39;user&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message.Message.text_message(message_id)" class="doc doc-heading doc-heading-parameter">                  <code>message_id</code>
<a href="#agentflow.state.message.Message.text_message(message_id)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional message ID.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Message</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created Message instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>Message.text_message("Hello!", role="user")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/message.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">text_message</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">role</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;tool&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Message&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a Message instance from plain text.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (str): The message content.</span>
<span class="sd">        role (Literal[&quot;user&quot;, &quot;assistant&quot;, &quot;system&quot;, &quot;tool&quot;]): The role of the sender.</span>
<span class="sd">        message_id (str | None): Optional message ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Message: The created Message instance.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; Message.text_message(&quot;Hello!&quot;, role=&quot;user&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating message from text with role: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">generate_id</span><span class="p">(</span><span class="n">message_id</span><span class="p">),</span>
        <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="p">[</span><span class="n">TextBlock</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">content</span><span class="p">)],</span>
        <span class="n">metadata</span><span class="o">=</span><span class="p">{},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.message.Message.tool_message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">tool_message</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#agentflow.state.message.Message.tool_message" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">tool_message</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">message_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a tool message, optionally marking it as an error.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message.Message.tool_message(content)" class="doc doc-heading doc-heading-parameter">                  <code>content</code>
<a href="#agentflow.state.message.Message.tool_message(content)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            ContentBlock


  
      module-attribute
   (agentflow.state.message_block.ContentBlock)" href="../#agentflow.state.message_block.ContentBlock">ContentBlock</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message content blocks.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message.Message.tool_message(message_id)" class="doc doc-heading doc-heading-parameter">                  <code>message_id</code>
<a href="#agentflow.state.message.Message.tool_message(message_id)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional message ID.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message.Message.tool_message(meta)" class="doc doc-heading doc-heading-parameter">                  <code>meta</code>
<a href="#agentflow.state.message.Message.tool_message(meta)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional metadata.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Message</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created tool message instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>Message.tool_message([ToolResultBlock(...)], message_id="tool1")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/message.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">tool_message</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ContentBlock</span><span class="p">],</span>
    <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">meta</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Message&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a tool message, optionally marking it as an error.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (list[ContentBlock]): The message content blocks.</span>
<span class="sd">        message_id (str | None): Optional message ID.</span>
<span class="sd">        meta (dict[str, Any] | None): Optional metadata.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Message: The created tool message instance.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; Message.tool_message([ToolResultBlock(...)], message_id=&quot;tool1&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">content</span>
    <span class="n">msg_id</span> <span class="o">=</span> <span class="n">generate_id</span><span class="p">(</span><span class="n">message_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">message_id</span><span class="o">=</span><span class="n">msg_id</span><span class="p">,</span>
        <span class="n">role</span><span class="o">=</span><span class="s2">&quot;tool&quot;</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="n">res</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">meta</span> <span class="ow">or</span> <span class="p">{},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message.TokenUsages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">TokenUsages</span>


<a href="#agentflow.state.message.TokenUsages" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Tracks token usage statistics for a message or model response.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            completion_tokens


  
      instance-attribute
   (agentflow.state.message.TokenUsages.completion_tokens)" href="../#agentflow.state.message.TokenUsages.completion_tokens">completion_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of completion tokens used.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            prompt_tokens


  
      instance-attribute
   (agentflow.state.message.TokenUsages.prompt_tokens)" href="../#agentflow.state.message.TokenUsages.prompt_tokens">prompt_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of prompt tokens used.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            total_tokens


  
      instance-attribute
   (agentflow.state.message.TokenUsages.total_tokens)" href="../#agentflow.state.message.TokenUsages.total_tokens">total_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total tokens used.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            reasoning_tokens


  
      class-attribute
      instance-attribute
   (agentflow.state.message.TokenUsages.reasoning_tokens)" href="../#agentflow.state.message.TokenUsages.reasoning_tokens">reasoning_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reasoning tokens used (optional).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            cache_creation_input_tokens


  
      class-attribute
      instance-attribute
   (agentflow.state.message.TokenUsages.cache_creation_input_tokens)" href="../#agentflow.state.message.TokenUsages.cache_creation_input_tokens">cache_creation_input_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cache creation input tokens (optional).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            cache_read_input_tokens


  
      class-attribute
      instance-attribute
   (agentflow.state.message.TokenUsages.cache_read_input_tokens)" href="../#agentflow.state.message.TokenUsages.cache_read_input_tokens">cache_read_input_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cache read input tokens (optional).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            image_tokens


  
      class-attribute
      instance-attribute
   (agentflow.state.message.TokenUsages.image_tokens)" href="../#agentflow.state.message.TokenUsages.image_tokens">image_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image tokens for multimodal models (optional).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            audio_tokens


  
      class-attribute
      instance-attribute
   (agentflow.state.message.TokenUsages.audio_tokens)" href="../#agentflow.state.message.TokenUsages.audio_tokens">audio_tokens</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Audio tokens for multimodal models (optional).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p 10_="10," 20_="20," 30_="30," _completion_tokens_:="'completion_tokens':" _prompt_tokens_:="'prompt_tokens':" _total_tokens_:="'total_tokens':" class="..">usage = TokenUsages(completion_tokens=10, prompt_tokens=20, total_tokens=30)</p>
</blockquote>
</blockquote>
</blockquote>
</details>












              <details class="quote">
                <summary>Source code in <code>agentflow/state/message.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TokenUsages</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tracks token usage statistics for a message or model response.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        completion_tokens (int): Number of completion tokens used.</span>
<span class="sd">        prompt_tokens (int): Number of prompt tokens used.</span>
<span class="sd">        total_tokens (int): Total tokens used.</span>
<span class="sd">        reasoning_tokens (int): Reasoning tokens used (optional).</span>
<span class="sd">        cache_creation_input_tokens (int): Cache creation input tokens (optional).</span>
<span class="sd">        cache_read_input_tokens (int): Cache read input tokens (optional).</span>
<span class="sd">        image_tokens (int | None): Image tokens for multimodal models (optional).</span>
<span class="sd">        audio_tokens (int | None): Audio tokens for multimodal models (optional).</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; usage = TokenUsages(completion_tokens=10, prompt_tokens=20, total_tokens=30)</span>
<span class="sd">        {&#39;completion_tokens&#39;: 10, &#39;prompt_tokens&#39;: 20, &#39;total_tokens&#39;: 30, ...}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">completion_tokens</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">prompt_tokens</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">total_tokens</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">reasoning_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cache_creation_input_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cache_read_input_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Optional modality-specific usage fields for multimodal models</span>
    <span class="n">image_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">audio_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message.TokenUsages-attributes">Attributes<a href="#agentflow.state.message.TokenUsages-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.TokenUsages.audio_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">audio_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.TokenUsages.audio_tokens" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">audio_tokens</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.TokenUsages.cache_creation_input_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">cache_creation_input_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.TokenUsages.cache_creation_input_tokens" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">cache_creation_input_tokens</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.TokenUsages.cache_read_input_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">cache_read_input_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.TokenUsages.cache_read_input_tokens" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">cache_read_input_tokens</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.TokenUsages.completion_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">completion_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.TokenUsages.completion_tokens" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">completion_tokens</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.TokenUsages.image_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">image_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.TokenUsages.image_tokens" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">image_tokens</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.TokenUsages.prompt_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">prompt_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.TokenUsages.prompt_tokens" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">prompt_tokens</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.TokenUsages.reasoning_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">reasoning_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.TokenUsages.reasoning_tokens" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">reasoning_tokens</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message.TokenUsages.total_tokens" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">total_tokens</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message.TokenUsages.total_tokens" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">total_tokens</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>
<h4 id="agentflow.state.message-functions">Functions<a href="#agentflow.state.message-functions" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.message.generate_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">generate_id</span>


<a href="#agentflow.state.message.generate_id" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_id</span><span class="p">(</span><span class="n">default_id</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generate a message or tool call ID based on DI context and type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.message.generate_id(default_id)" class="doc doc-heading doc-heading-parameter">                  <code>default_id</code>
<a href="#agentflow.state.message.generate_id(default_id)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="str">str</span> | <span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Default ID to use if provided and matches type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | <span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str | int: Generated or provided ID, type determined by DI context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>generate_id("abc123")
'abc123'
generate_id(None)
'a-uuid-string'</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/message.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_id</span><span class="p">(</span><span class="n">default_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a message or tool call ID based on DI context and type.</span>

<span class="sd">    Args:</span>
<span class="sd">        default_id (str | int | None): Default ID to use if provided and matches type.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str | int: Generated or provided ID, type determined by DI context.</span>

<span class="sd">    Raises:</span>
<span class="sd">        None</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; generate_id(&quot;abc123&quot;)</span>
<span class="sd">        &#39;abc123&#39;</span>
<span class="sd">        &gt;&gt;&gt; generate_id(None)</span>
<span class="sd">        &#39;a-uuid-string&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">id_type</span> <span class="o">=</span> <span class="n">InjectQ</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span><span class="o">.</span><span class="n">try_get</span><span class="p">(</span><span class="s2">&quot;generated_id_type&quot;</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span>
    <span class="n">generated_id</span> <span class="o">=</span> <span class="n">InjectQ</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span><span class="o">.</span><span class="n">try_get</span><span class="p">(</span><span class="s2">&quot;generated_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># if user provided an awaitable, resolve it</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">generated_id</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">):</span>

        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_id</span><span class="p">():</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">generated_id</span>

        <span class="n">generated_id</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">wait_for_id</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">generated_id</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generated_id</span>

    <span class="k">if</span> <span class="n">default_id</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">id_type</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">default_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">default_id</span>
        <span class="k">if</span> <span class="n">id_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="s2">&quot;bigint&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">default_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">default_id</span>

    <span class="c1"># if not matched or default_id is None, generate new id</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Generating new id of type: </span><span class="si">%s</span><span class="s2">. Default ID not provided or not matched </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">id_type</span><span class="p">,</span>
        <span class="n">default_id</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">id_type</span> <span class="o">==</span> <span class="s2">&quot;int&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">int</span> <span class="o">&gt;&gt;</span> <span class="mi">32</span>
    <span class="k">if</span> <span class="n">id_type</span> <span class="o">==</span> <span class="s2">&quot;bigint&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">int</span> <span class="o">&gt;&gt;</span> <span class="mi">64</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="agentflow.state.message_block" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">message_block</span>


<a href="#agentflow.state.message_block" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            AnnotationBlock (agentflow.state.message_block.AnnotationBlock)" href="../#agentflow.state.message_block.AnnotationBlock">AnnotationBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Annotation content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            AnnotationRef (agentflow.state.message_block.AnnotationRef)" href="../#agentflow.state.message_block.AnnotationRef">AnnotationRef</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Reference to annotation metadata (e.g., citation, note).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            AudioBlock (agentflow.state.message_block.AudioBlock)" href="../#agentflow.state.message_block.AudioBlock">AudioBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Audio content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            DataBlock (agentflow.state.message_block.DataBlock)" href="../#agentflow.state.message_block.DataBlock">DataBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Data content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            DocumentBlock (agentflow.state.message_block.DocumentBlock)" href="../#agentflow.state.message_block.DocumentBlock">DocumentBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Document content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ErrorBlock (agentflow.state.message_block.ErrorBlock)" href="../#agentflow.state.message_block.ErrorBlock">ErrorBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Error content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ImageBlock (agentflow.state.message_block.ImageBlock)" href="../#agentflow.state.message_block.ImageBlock">ImageBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Image content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Reference to media content (image/audio/video/document/data).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ReasoningBlock (agentflow.state.message_block.ReasoningBlock)" href="../#agentflow.state.message_block.ReasoningBlock">ReasoningBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Reasoning content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            RemoteToolCallBlock (agentflow.state.message_block.RemoteToolCallBlock)" href="../#agentflow.state.message_block.RemoteToolCallBlock">RemoteToolCallBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Remote Tool call content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            TextBlock (agentflow.state.message_block.TextBlock)" href="../#agentflow.state.message_block.TextBlock">TextBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Text content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ToolCallBlock (agentflow.state.message_block.ToolCallBlock)" href="../#agentflow.state.message_block.ToolCallBlock">ToolCallBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Tool call content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ToolResultBlock (agentflow.state.message_block.ToolResultBlock)" href="../#agentflow.state.message_block.ToolResultBlock">ToolResultBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Tool result content block for messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            VideoBlock (agentflow.state.message_block.VideoBlock)" href="../#agentflow.state.message_block.VideoBlock">VideoBlock</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Video content block for messages.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>






<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ContentBlock


  
      module-attribute
   (agentflow.state.message_block.ContentBlock)" href="../#agentflow.state.message_block.ContentBlock">ContentBlock</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>



  <div class="doc doc-children">





<h4 id="agentflow.state.message_block-attributes">Attributes<a href="#agentflow.state.message_block-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.message_block.ContentBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">ContentBlock</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ContentBlock" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ContentBlock</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">TextBlock</span><span class="p">,</span> <span class="n">ImageBlock</span><span class="p">,</span> <span class="n">AudioBlock</span><span class="p">,</span> <span class="n">VideoBlock</span><span class="p">,</span> <span class="n">DocumentBlock</span><span class="p">,</span> <span class="n">DataBlock</span><span class="p">,</span> <span class="n">ToolCallBlock</span><span class="p">,</span> <span class="n">RemoteToolCallBlock</span><span class="p">,</span> <span class="n">ToolResultBlock</span><span class="p">,</span> <span class="n">ReasoningBlock</span><span class="p">,</span> <span class="n">AnnotationBlock</span><span class="p">,</span> <span class="n">ErrorBlock</span><span class="p">],</span> <span class="n">Field</span><span class="p">(</span><span class="n">discriminator</span><span class="o">=</span><span class="s1">&#39;type&#39;</span><span class="p">)]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<h4 id="agentflow.state.message_block-classes">Classes<a href="#agentflow.state.message_block-classes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.AnnotationBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AnnotationBlock</span>


<a href="#agentflow.state.message_block.AnnotationBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Annotation content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AnnotationBlock.type)" href="../#agentflow.state.message_block.AnnotationBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;annotation&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            kind


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AnnotationBlock.kind)" href="../#agentflow.state.message_block.AnnotationBlock.kind">kind</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;citation&#39;, &#39;note&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Kind of annotation.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            refs


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AnnotationBlock.refs)" href="../#agentflow.state.message_block.AnnotationBlock.refs">refs</a></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            AnnotationRef (agentflow.state.message_block.AnnotationRef)" href="../#agentflow.state.message_block.AnnotationRef">AnnotationRef</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of annotation references.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            spans


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AnnotationBlock.spans)" href="../#agentflow.state.message_block.AnnotationBlock.spans">spans</a></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="int">int</span>, <span title="int">int</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spans covered by the annotation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AnnotationBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Annotation content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;annotation&quot;]): Block type discriminator.</span>
<span class="sd">        kind (Literal[&quot;citation&quot;, &quot;note&quot;]): Kind of annotation.</span>
<span class="sd">        refs (list[AnnotationRef]): List of annotation references.</span>
<span class="sd">        spans (list[tuple[int, int]] | None): Spans covered by the annotation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;annotation&quot;</span>
    <span class="n">kind</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;citation&quot;</span><span class="p">,</span> <span class="s2">&quot;note&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;citation&quot;</span>
    <span class="n">refs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AnnotationRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">spans</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.AnnotationBlock-attributes">Attributes<a href="#agentflow.state.message_block.AnnotationBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AnnotationBlock.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AnnotationBlock.kind" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;citation&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AnnotationBlock.refs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">refs</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AnnotationBlock.refs" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">refs</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AnnotationBlock.spans" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">spans</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AnnotationBlock.spans" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">spans</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AnnotationBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AnnotationBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;annotation&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.AnnotationRef" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AnnotationRef</span>


<a href="#agentflow.state.message_block.AnnotationRef" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Reference to annotation metadata (e.g., citation, note).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            url


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AnnotationRef.url)" href="../#agentflow.state.message_block.AnnotationRef.url">url</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL to annotation source.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            file_id


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AnnotationRef.file_id)" href="../#agentflow.state.message_block.AnnotationRef.file_id">file_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Provider-managed file ID.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            page


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AnnotationRef.page)" href="../#agentflow.state.message_block.AnnotationRef.page">page</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page number (if applicable).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            index


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AnnotationRef.index)" href="../#agentflow.state.message_block.AnnotationRef.index">index</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index within the annotation source.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            title


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AnnotationRef.title)" href="../#agentflow.state.message_block.AnnotationRef.title">title</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Title of the annotation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AnnotationRef</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reference to annotation metadata (e.g., citation, note).</span>

<span class="sd">    Attributes:</span>
<span class="sd">        url (str | None): URL to annotation source.</span>
<span class="sd">        file_id (str | None): Provider-managed file ID.</span>
<span class="sd">        page (int | None): Page number (if applicable).</span>
<span class="sd">        index (int | None): Index within the annotation source.</span>
<span class="sd">        title (str | None): Title of the annotation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">file_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.AnnotationRef-attributes">Attributes<a href="#agentflow.state.message_block.AnnotationRef-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AnnotationRef.file_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">file_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AnnotationRef.file_id" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_id</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AnnotationRef.index" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">index</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AnnotationRef.index" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">index</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AnnotationRef.page" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">page</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AnnotationRef.page" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">page</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AnnotationRef.title" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">title</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AnnotationRef.title" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">title</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AnnotationRef.url" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">url</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AnnotationRef.url" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">url</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.AudioBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AudioBlock</span>


<a href="#agentflow.state.message_block.AudioBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Audio content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AudioBlock.type)" href="../#agentflow.state.message_block.AudioBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;audio&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            media


  
      instance-attribute
   (agentflow.state.message_block.AudioBlock.media)" href="../#agentflow.state.message_block.AudioBlock.media">media</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to audio media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            transcript


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AudioBlock.transcript)" href="../#agentflow.state.message_block.AudioBlock.transcript">transcript</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transcript of audio.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            sample_rate


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AudioBlock.sample_rate)" href="../#agentflow.state.message_block.AudioBlock.sample_rate">sample_rate</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Sample rate in Hz.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            channels


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.AudioBlock.channels)" href="../#agentflow.state.message_block.AudioBlock.channels">channels</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of audio channels.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AudioBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Audio content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;audio&quot;]): Block type discriminator.</span>
<span class="sd">        media (MediaRef): Reference to audio media.</span>
<span class="sd">        transcript (str | None): Transcript of audio.</span>
<span class="sd">        sample_rate (int | None): Sample rate in Hz.</span>
<span class="sd">        channels (int | None): Number of audio channels.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;audio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;audio&quot;</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span>
    <span class="n">transcript</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sample_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">channels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.AudioBlock-attributes">Attributes<a href="#agentflow.state.message_block.AudioBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AudioBlock.channels" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">channels</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AudioBlock.channels" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">channels</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AudioBlock.media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">media</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AudioBlock.media" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">media</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AudioBlock.sample_rate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">sample_rate</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AudioBlock.sample_rate" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">sample_rate</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AudioBlock.transcript" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">transcript</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AudioBlock.transcript" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">transcript</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.AudioBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.AudioBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;audio&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.DataBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">DataBlock</span>


<a href="#agentflow.state.message_block.DataBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Data content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.DataBlock.type)" href="../#agentflow.state.message_block.DataBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;data&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            mime_type


  
      instance-attribute
   (agentflow.state.message_block.DataBlock.mime_type)" href="../#agentflow.state.message_block.DataBlock.mime_type">mime_type</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>MIME type of the data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            data_base64


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.DataBlock.data_base64)" href="../#agentflow.state.message_block.DataBlock.data_base64">data_base64</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Base64-encoded data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            media


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.DataBlock.media)" href="../#agentflow.state.message_block.DataBlock.media">media</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to associated media.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DataBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Data content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;data&quot;]): Block type discriminator.</span>
<span class="sd">        mime_type (str): MIME type of the data.</span>
<span class="sd">        data_base64 (str | None): Base64-encoded data.</span>
<span class="sd">        media (MediaRef | None): Reference to associated media.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span>
    <span class="n">mime_type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">data_base64</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.DataBlock-attributes">Attributes<a href="#agentflow.state.message_block.DataBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.DataBlock.data_base64" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data_base64</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.DataBlock.data_base64" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data_base64</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.DataBlock.media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">media</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.DataBlock.media" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">media</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.DataBlock.mime_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">mime_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.DataBlock.mime_type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">mime_type</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.DataBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.DataBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.DocumentBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">DocumentBlock</span>


<a href="#agentflow.state.message_block.DocumentBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Document content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.DocumentBlock.type)" href="../#agentflow.state.message_block.DocumentBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;document&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            media


  
      instance-attribute
   (agentflow.state.message_block.DocumentBlock.media)" href="../#agentflow.state.message_block.DocumentBlock.media">media</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to document media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            pages


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.DocumentBlock.pages)" href="../#agentflow.state.message_block.DocumentBlock.pages">pages</a></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="int">int</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of page numbers.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            excerpt


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.DocumentBlock.excerpt)" href="../#agentflow.state.message_block.DocumentBlock.excerpt">excerpt</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Excerpt from the document.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DocumentBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Document content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;document&quot;]): Block type discriminator.</span>
<span class="sd">        media (MediaRef): Reference to document media.</span>
<span class="sd">        pages (list[int] | None): List of page numbers.</span>
<span class="sd">        excerpt (str | None): Excerpt from the document.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;document&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;document&quot;</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span>
    <span class="n">pages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">excerpt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.DocumentBlock-attributes">Attributes<a href="#agentflow.state.message_block.DocumentBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.DocumentBlock.excerpt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">excerpt</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.DocumentBlock.excerpt" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">excerpt</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.DocumentBlock.media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">media</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.DocumentBlock.media" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">media</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.DocumentBlock.pages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">pages</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.DocumentBlock.pages" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">pages</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.DocumentBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.DocumentBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;document&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.ErrorBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ErrorBlock</span>


<a href="#agentflow.state.message_block.ErrorBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Error content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ErrorBlock.type)" href="../#agentflow.state.message_block.ErrorBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;error&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            message


  
      instance-attribute
   (agentflow.state.message_block.ErrorBlock.message)" href="../#agentflow.state.message_block.ErrorBlock.message">message</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error message.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            code


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ErrorBlock.code)" href="../#agentflow.state.message_block.ErrorBlock.code">code</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error code.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            data


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ErrorBlock.data)" href="../#agentflow.state.message_block.ErrorBlock.data">data</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional error data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ErrorBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Error content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;error&quot;]): Block type discriminator.</span>
<span class="sd">        message (str): Error message.</span>
<span class="sd">        code (str | None): Error code.</span>
<span class="sd">        data (dict[str, Any] | None): Additional error data.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">code</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.ErrorBlock-attributes">Attributes<a href="#agentflow.state.message_block.ErrorBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ErrorBlock.code" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">code</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ErrorBlock.code" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">code</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ErrorBlock.data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ErrorBlock.data" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ErrorBlock.message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">message</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ErrorBlock.message" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">message</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ErrorBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ErrorBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.ImageBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ImageBlock</span>


<a href="#agentflow.state.message_block.ImageBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Image content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ImageBlock.type)" href="../#agentflow.state.message_block.ImageBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;image&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            media


  
      instance-attribute
   (agentflow.state.message_block.ImageBlock.media)" href="../#agentflow.state.message_block.ImageBlock.media">media</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to image media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            alt_text


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ImageBlock.alt_text)" href="../#agentflow.state.message_block.ImageBlock.alt_text">alt_text</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Alternative text for accessibility.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            bbox


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ImageBlock.bbox)" href="../#agentflow.state.message_block.ImageBlock.bbox">bbox</a></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="float">float</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Bounding box coordinates [x1, y1, x2, y2].</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ImageBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Image content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;image&quot;]): Block type discriminator.</span>
<span class="sd">        media (MediaRef): Reference to image media.</span>
<span class="sd">        alt_text (str | None): Alternative text for accessibility.</span>
<span class="sd">        bbox (list[float] | None): Bounding box coordinates [x1, y1, x2, y2].</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span>
    <span class="n">alt_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">bbox</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># [x1,y1,x2,y2] if applicable</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.ImageBlock-attributes">Attributes<a href="#agentflow.state.message_block.ImageBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ImageBlock.alt_text" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">alt_text</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ImageBlock.alt_text" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">alt_text</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ImageBlock.bbox" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">bbox</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ImageBlock.bbox" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">bbox</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ImageBlock.media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">media</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ImageBlock.media" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">media</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ImageBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ImageBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.MediaRef" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">MediaRef</span>


<a href="#agentflow.state.message_block.MediaRef" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Reference to media content (image/audio/video/document/data).</p>
<p>Prefer referencing by URL or provider file_id over inlining base64 for large payloads.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            kind


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.kind)" href="../#agentflow.state.message_block.MediaRef.kind">kind</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;url&#39;, &#39;file_id&#39;, &#39;data&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of reference.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            url


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.url)" href="../#agentflow.state.message_block.MediaRef.url">url</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL to media content.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            file_id


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.file_id)" href="../#agentflow.state.message_block.MediaRef.file_id">file_id</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Provider-managed file ID.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            data_base64


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.data_base64)" href="../#agentflow.state.message_block.MediaRef.data_base64">data_base64</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Base64-encoded data (small payloads only).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            mime_type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.mime_type)" href="../#agentflow.state.message_block.MediaRef.mime_type">mime_type</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>MIME type of the media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            size_bytes


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.size_bytes)" href="../#agentflow.state.message_block.MediaRef.size_bytes">size_bytes</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Size in bytes.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            sha256


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.sha256)" href="../#agentflow.state.message_block.MediaRef.sha256">sha256</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SHA256 hash of the media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            filename


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.filename)" href="../#agentflow.state.message_block.MediaRef.filename">filename</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filename of the media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            width


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.width)" href="../#agentflow.state.message_block.MediaRef.width">width</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image width (if applicable).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            height


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.height)" href="../#agentflow.state.message_block.MediaRef.height">height</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image height (if applicable).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            duration_ms


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.duration_ms)" href="../#agentflow.state.message_block.MediaRef.duration_ms">duration_ms</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Duration in milliseconds (if applicable).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            page


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.MediaRef.page)" href="../#agentflow.state.message_block.MediaRef.page">page</a></code></td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page number (if applicable).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MediaRef</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reference to media content (image/audio/video/document/data).</span>

<span class="sd">    Prefer referencing by URL or provider file_id over inlining base64 for large payloads.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        kind (Literal[&quot;url&quot;, &quot;file_id&quot;, &quot;data&quot;]): Type of reference.</span>
<span class="sd">        url (str | None): URL to media content.</span>
<span class="sd">        file_id (str | None): Provider-managed file ID.</span>
<span class="sd">        data_base64 (str | None): Base64-encoded data (small payloads only).</span>
<span class="sd">        mime_type (str | None): MIME type of the media.</span>
<span class="sd">        size_bytes (int | None): Size in bytes.</span>
<span class="sd">        sha256 (str | None): SHA256 hash of the media.</span>
<span class="sd">        filename (str | None): Filename of the media.</span>
<span class="sd">        width (int | None): Image width (if applicable).</span>
<span class="sd">        height (int | None): Image height (if applicable).</span>
<span class="sd">        duration_ms (int | None): Duration in milliseconds (if applicable).</span>
<span class="sd">        page (int | None): Page number (if applicable).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">kind</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;file_id&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;url&quot;</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># http(s) or data: URL</span>
    <span class="n">file_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># provider-managed ID (e.g., OpenAI/Gemini)</span>
    <span class="n">data_base64</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># small payloads only</span>
    <span class="n">mime_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">size_bytes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sha256</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Media-specific hints</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">duration_ms</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.MediaRef-attributes">Attributes<a href="#agentflow.state.message_block.MediaRef-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.data_base64" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data_base64</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.data_base64" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data_base64</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.duration_ms" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">duration_ms</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.duration_ms" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">duration_ms</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.file_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">file_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.file_id" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_id</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.filename" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">filename</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.filename" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">filename</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.height" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">height</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.height" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">height</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.kind" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;url&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.mime_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">mime_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.mime_type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">mime_type</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.page" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">page</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.page" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">page</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.sha256" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">sha256</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.sha256" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">sha256</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.size_bytes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">size_bytes</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.size_bytes" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">size_bytes</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.url" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">url</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.url" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">url</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.MediaRef.width" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">width</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.MediaRef.width" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">width</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.ReasoningBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ReasoningBlock</span>


<a href="#agentflow.state.message_block.ReasoningBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Reasoning content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ReasoningBlock.type)" href="../#agentflow.state.message_block.ReasoningBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;reasoning&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            summary


  
      instance-attribute
   (agentflow.state.message_block.ReasoningBlock.summary)" href="../#agentflow.state.message_block.ReasoningBlock.summary">summary</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Summary of reasoning.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            details


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ReasoningBlock.details)" href="../#agentflow.state.message_block.ReasoningBlock.details">details</a></code></td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Detailed reasoning steps.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ReasoningBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reasoning content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;reasoning&quot;]): Block type discriminator.</span>
<span class="sd">        summary (str): Summary of reasoning.</span>
<span class="sd">        details (list[str] | None): Detailed reasoning steps.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;reasoning&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;reasoning&quot;</span>
    <span class="n">summary</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">details</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.ReasoningBlock-attributes">Attributes<a href="#agentflow.state.message_block.ReasoningBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ReasoningBlock.details" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">details</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ReasoningBlock.details" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">details</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ReasoningBlock.summary" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">summary</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ReasoningBlock.summary" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">summary</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ReasoningBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ReasoningBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;reasoning&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.RemoteToolCallBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RemoteToolCallBlock</span>


<a href="#agentflow.state.message_block.RemoteToolCallBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Remote Tool call content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.RemoteToolCallBlock.type)" href="../#agentflow.state.message_block.RemoteToolCallBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;remote_tool_call&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            id


  
      instance-attribute
   (agentflow.state.message_block.RemoteToolCallBlock.id)" href="../#agentflow.state.message_block.RemoteToolCallBlock.id">id</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tool call ID.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            name


  
      instance-attribute
   (agentflow.state.message_block.RemoteToolCallBlock.name)" href="../#agentflow.state.message_block.RemoteToolCallBlock.name">name</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tool name.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            args


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.RemoteToolCallBlock.args)" href="../#agentflow.state.message_block.RemoteToolCallBlock.args">args</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arguments for the tool call.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            tool_type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.RemoteToolCallBlock.tool_type)" href="../#agentflow.state.message_block.RemoteToolCallBlock.tool_type">tool_type</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of tool (e.g., web_search, file_search).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RemoteToolCallBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remote Tool call content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;remote_tool_call&quot;]): Block type discriminator.</span>
<span class="sd">        id (str): Tool call ID.</span>
<span class="sd">        name (str): Tool name.</span>
<span class="sd">        args (dict[str, Any]): Arguments for the tool call.</span>
<span class="sd">        tool_type (str | None): Type of tool (e.g., web_search, file_search).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;remote_tool_call&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;remote_tool_call&quot;</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">tool_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;remote&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.RemoteToolCallBlock-attributes">Attributes<a href="#agentflow.state.message_block.RemoteToolCallBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.RemoteToolCallBlock.args" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">args</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.RemoteToolCallBlock.args" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">args</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.RemoteToolCallBlock.id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.RemoteToolCallBlock.id" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">id</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.RemoteToolCallBlock.name" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.RemoteToolCallBlock.name" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">name</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.RemoteToolCallBlock.tool_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">tool_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.RemoteToolCallBlock.tool_type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">tool_type</span> <span class="o">=</span> <span class="s1">&#39;remote&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.RemoteToolCallBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.RemoteToolCallBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;remote_tool_call&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.TextBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">TextBlock</span>


<a href="#agentflow.state.message_block.TextBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Text content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.TextBlock.type)" href="../#agentflow.state.message_block.TextBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;text&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            text


  
      instance-attribute
   (agentflow.state.message_block.TextBlock.text)" href="../#agentflow.state.message_block.TextBlock.text">text</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text content.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            annotations


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.TextBlock.annotations)" href="../#agentflow.state.message_block.TextBlock.annotations">annotations</a></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            AnnotationRef (agentflow.state.message_block.AnnotationRef)" href="../#agentflow.state.message_block.AnnotationRef">AnnotationRef</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of annotation references.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TextBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Text content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;text&quot;]): Block type discriminator.</span>
<span class="sd">        text (str): Text content.</span>
<span class="sd">        annotations (list[AnnotationRef]): List of annotation references.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;text&quot;</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">annotations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AnnotationRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.TextBlock-attributes">Attributes<a href="#agentflow.state.message_block.TextBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.TextBlock.annotations" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">annotations</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.TextBlock.annotations" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">annotations</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.TextBlock.text" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">text</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.TextBlock.text" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">text</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.TextBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.TextBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.ToolCallBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ToolCallBlock</span>


<a href="#agentflow.state.message_block.ToolCallBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Tool call content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ToolCallBlock.type)" href="../#agentflow.state.message_block.ToolCallBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;tool_call&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            id


  
      instance-attribute
   (agentflow.state.message_block.ToolCallBlock.id)" href="../#agentflow.state.message_block.ToolCallBlock.id">id</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tool call ID.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            name


  
      instance-attribute
   (agentflow.state.message_block.ToolCallBlock.name)" href="../#agentflow.state.message_block.ToolCallBlock.name">name</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tool name.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            args


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ToolCallBlock.args)" href="../#agentflow.state.message_block.ToolCallBlock.args">args</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arguments for the tool call.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            tool_type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ToolCallBlock.tool_type)" href="../#agentflow.state.message_block.ToolCallBlock.tool_type">tool_type</a></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of tool (e.g., web_search, file_search).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ToolCallBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tool call content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;tool_call&quot;]): Block type discriminator.</span>
<span class="sd">        id (str): Tool call ID.</span>
<span class="sd">        name (str): Tool name.</span>
<span class="sd">        args (dict[str, Any]): Arguments for the tool call.</span>
<span class="sd">        tool_type (str | None): Type of tool (e.g., web_search, file_search).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;tool_call&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;tool_call&quot;</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">tool_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># e.g., web_search, file_search, computer_use</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.ToolCallBlock-attributes">Attributes<a href="#agentflow.state.message_block.ToolCallBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ToolCallBlock.args" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">args</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ToolCallBlock.args" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">args</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ToolCallBlock.id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ToolCallBlock.id" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">id</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ToolCallBlock.name" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ToolCallBlock.name" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">name</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ToolCallBlock.tool_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">tool_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ToolCallBlock.tool_type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">tool_type</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ToolCallBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ToolCallBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;tool_call&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.ToolResultBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ToolResultBlock</span>


<a href="#agentflow.state.message_block.ToolResultBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Tool result content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ToolResultBlock.type)" href="../#agentflow.state.message_block.ToolResultBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;tool_result&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            call_id


  
      instance-attribute
   (agentflow.state.message_block.ToolResultBlock.call_id)" href="../#agentflow.state.message_block.ToolResultBlock.call_id">call_id</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tool call ID.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            output


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ToolResultBlock.output)" href="../#agentflow.state.message_block.ToolResultBlock.output">output</a></code></td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Output from the tool (str, dict, MediaRef, or list of blocks).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            is_error


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ToolResultBlock.is_error)" href="../#agentflow.state.message_block.ToolResultBlock.is_error">is_error</a></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the result is an error.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            status


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.ToolResultBlock.status)" href="../#agentflow.state.message_block.ToolResultBlock.status">status</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;completed&#39;, &#39;failed&#39;] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Status of the tool call.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ToolResultBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tool result content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;tool_result&quot;]): Block type discriminator.</span>
<span class="sd">        call_id (str): Tool call ID.</span>
<span class="sd">        output (Any): Output from the tool (str, dict, MediaRef, or list of blocks).</span>
<span class="sd">        is_error (bool): Whether the result is an error.</span>
<span class="sd">        status (Literal[&quot;completed&quot;, &quot;failed&quot;] | None): Status of the tool call.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;tool_result&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;tool_result&quot;</span>
    <span class="n">call_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">output</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># str | dict | MediaRef | list[ContentBlock-like]</span>
    <span class="n">is_error</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;completed&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.ToolResultBlock-attributes">Attributes<a href="#agentflow.state.message_block.ToolResultBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ToolResultBlock.call_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">call_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ToolResultBlock.call_id" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">call_id</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ToolResultBlock.is_error" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">is_error</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ToolResultBlock.is_error" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">is_error</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ToolResultBlock.output" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">output</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ToolResultBlock.output" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">output</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ToolResultBlock.status" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">status</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ToolResultBlock.status" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">status</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.ToolResultBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.ToolResultBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;tool_result&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_block.VideoBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">VideoBlock</span>


<a href="#agentflow.state.message_block.VideoBlock" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Video content block for messages.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            type


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.VideoBlock.type)" href="../#agentflow.state.message_block.VideoBlock.type">type</a></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;video&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block type discriminator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            media


  
      instance-attribute
   (agentflow.state.message_block.VideoBlock.media)" href="../#agentflow.state.message_block.VideoBlock.media">media</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to video media.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            thumbnail


  
      class-attribute
      instance-attribute
   (agentflow.state.message_block.VideoBlock.thumbnail)" href="../#agentflow.state.message_block.VideoBlock.thumbnail">thumbnail</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            MediaRef (agentflow.state.message_block.MediaRef)" href="../#agentflow.state.message_block.MediaRef">MediaRef</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to thumbnail image.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_block.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">VideoBlock</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Video content block for messages.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type (Literal[&quot;video&quot;]): Block type discriminator.</span>
<span class="sd">        media (MediaRef): Reference to video media.</span>
<span class="sd">        thumbnail (MediaRef | None): Reference to thumbnail image.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;video&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;video&quot;</span>
    <span class="n">media</span><span class="p">:</span> <span class="n">MediaRef</span>
    <span class="n">thumbnail</span><span class="p">:</span> <span class="n">MediaRef</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_block.VideoBlock-attributes">Attributes<a href="#agentflow.state.message_block.VideoBlock-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.VideoBlock.media" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">media</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.VideoBlock.media" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">media</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.VideoBlock.thumbnail" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">thumbnail</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.VideoBlock.thumbnail" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">thumbnail</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_block.VideoBlock.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_block.VideoBlock.type" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;video&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="agentflow.state.message_context_manager" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">message_context_manager</span>


<a href="#agentflow.state.message_context_manager" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

        <p>Message context management for agent state in TAF.</p>
<p>This module provides MessageContextManager, which trims and manages the message
history (context) for agent interactions, ensuring efficient context window usage.</p>










<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            MessageContextManager (agentflow.state.message_context_manager.MessageContextManager)" href="../#agentflow.state.message_context_manager.MessageContextManager">MessageContextManager</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Manages the context field for AI interactions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>






<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            S


  
      module-attribute
   (agentflow.state.message_context_manager.S)" href="../#agentflow.state.message_context_manager.S">S</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            logger


  
      module-attribute
   (agentflow.state.message_context_manager.logger)" href="../#agentflow.state.message_context_manager.logger">logger</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>



  <div class="doc doc-children">





<h4 id="agentflow.state.message_context_manager-attributes">Attributes<a href="#agentflow.state.message_context_manager-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.message_context_manager.S" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">S</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#agentflow.state.message_context_manager.S" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">S</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">AgentState</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="agentflow.state.message_context_manager.logger" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#agentflow.state.message_context_manager.logger" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<h4 id="agentflow.state.message_context_manager-classes">Classes<a href="#agentflow.state.message_context_manager-classes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.message_context_manager.MessageContextManager" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">MessageContextManager</span>


<a href="#agentflow.state.message_context_manager.MessageContextManager" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BaseContextManager (agentflow.state.base_context.BaseContextManager)" href="../#agentflow.state.base_context.BaseContextManager">BaseContextManager</a>[<a class="autorefs autorefs-internal" title="            S


  
      module-attribute
   (agentflow.state.message_context_manager.S)" href="../#agentflow.state.message_context_manager.S">S</a>]</code></p>


        <p>Manages the context field for AI interactions.</p>
<p>This class trims the context (message history) based on a maximum number of user messages,
ensuring the first message (usually a system prompt) is always preserved.
Optionally removes tool-related messages (AI messages with tool calls and tool result messages).
Generic over AgentState or its subclasses.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            __init__ (agentflow.state.message_context_manager.MessageContextManager.__init__)" href="../#agentflow.state.message_context_manager.MessageContextManager.__init__">__init__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Initialize the MessageContextManager.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            atrim_context


  
      async
   (agentflow.state.message_context_manager.MessageContextManager.atrim_context)" href="../#agentflow.state.message_context_manager.MessageContextManager.atrim_context">atrim_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Asynchronous version of trim_context.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            trim_context (agentflow.state.message_context_manager.MessageContextManager.trim_context)" href="../#agentflow.state.message_context_manager.MessageContextManager.trim_context">trim_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Trim the context in the given AgentState based on the maximum number of user messages.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>




<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            max_messages


  
      instance-attribute
   (agentflow.state.message_context_manager.MessageContextManager.max_messages)" href="../#agentflow.state.message_context_manager.MessageContextManager.max_messages">max_messages</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            remove_tool_msgs


  
      instance-attribute
   (agentflow.state.message_context_manager.MessageContextManager.remove_tool_msgs)" href="../#agentflow.state.message_context_manager.MessageContextManager.remove_tool_msgs">remove_tool_msgs</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>agentflow/state/message_context_manager.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MessageContextManager</span><span class="p">(</span><span class="n">BaseContextManager</span><span class="p">[</span><span class="n">S</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manages the context field for AI interactions.</span>

<span class="sd">    This class trims the context (message history) based on a maximum number of user messages,</span>
<span class="sd">    ensuring the first message (usually a system prompt) is always preserved.</span>
<span class="sd">    Optionally removes tool-related messages (AI messages with tool calls and tool result messages).</span>
<span class="sd">    Generic over AgentState or its subclasses.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_messages</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">remove_tool_msgs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the MessageContextManager.</span>

<span class="sd">        Args:</span>
<span class="sd">            max_messages (int): Maximum number of</span>
<span class="sd">                user messages to keep in context. Default is 10.</span>
<span class="sd">            remove_tool_msgs (bool): Whether to remove tool messages from context.</span>
<span class="sd">                Default is False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_messages</span> <span class="o">=</span> <span class="n">max_messages</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_tool_msgs</span> <span class="o">=</span> <span class="n">remove_tool_msgs</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initialized MessageContextManager with max_messages=</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">max_messages</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_trim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Trim messages keeping system messages and most recent user messages.</span>

<span class="sd">        Returns None if no trimming is needed, otherwise returns the trimmed list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check context is empty</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">messages</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;No messages to trim; context is empty&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># First, remove tool messages if requested</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_tool_msgs</span><span class="p">:</span>
            <span class="n">messages</span> <span class="o">=</span> <span class="n">remove_tool_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Removed tool messages, </span><span class="si">%d</span><span class="s2"> messages remaining&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">))</span>

        <span class="c1"># Count user messages</span>
        <span class="n">user_message_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">messages</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;user&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">user_message_count</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_messages</span><span class="p">:</span>
            <span class="c1"># Check if we removed tool messages but no trimming needed</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_tool_msgs</span><span class="p">:</span>
                <span class="c1"># Return the filtered messages even if count is within limits</span>
                <span class="k">return</span> <span class="n">messages</span>
            <span class="c1"># no trimming needed</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;No trimming needed; context is within limits (</span><span class="si">%d</span><span class="s2"> user messages)&quot;</span><span class="p">,</span>
                <span class="n">user_message_count</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Separate system messages (usually at the beginning)</span>
        <span class="n">system_messages</span> <span class="o">=</span> <span class="p">[</span><span class="n">msg</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">messages</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;system&quot;</span><span class="p">]</span>
        <span class="n">non_system_messages</span> <span class="o">=</span> <span class="p">[</span><span class="n">msg</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">messages</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">!=</span> <span class="s2">&quot;system&quot;</span><span class="p">]</span>

        <span class="c1"># Find the index of the oldest user message to keep</span>
        <span class="n">user_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">start_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">non_system_messages</span><span class="p">)</span>

        <span class="c1"># Iterate from the end to find the position to start keeping messages</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">non_system_messages</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">non_system_messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;user&quot;</span><span class="p">:</span>
                <span class="n">user_count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">user_count</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_messages</span><span class="p">:</span>
                    <span class="n">start_index</span> <span class="o">=</span> <span class="n">i</span>
                    <span class="k">break</span>

        <span class="c1"># Keep messages from start_index onwards</span>
        <span class="n">final_non_system</span> <span class="o">=</span> <span class="n">non_system_messages</span><span class="p">[</span><span class="n">start_index</span><span class="p">:]</span>

        <span class="c1"># Combine system messages (at start) with trimmed conversation</span>
        <span class="n">trimmed_messages</span> <span class="o">=</span> <span class="n">system_messages</span> <span class="o">+</span> <span class="n">final_non_system</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Trimmed from </span><span class="si">%d</span><span class="s2"> to </span><span class="si">%d</span><span class="s2"> messages (</span><span class="si">%d</span><span class="s2"> user messages kept)&quot;</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">),</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">trimmed_messages</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max_messages</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">trimmed_messages</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">trim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Trim the context in the given AgentState based on the maximum number of user messages.</span>

<span class="sd">        The first message (typically a system prompt) is always preserved. Only the most recent</span>
<span class="sd">        user messages up to `max_messages` are kept, along with the first message.</span>

<span class="sd">        If `remove_tool_msgs` is True, also removes:</span>
<span class="sd">        - AI messages that contain tool calls (intermediate tool-calling messages)</span>
<span class="sd">        - Tool result messages (role=&quot;tool&quot;)</span>

<span class="sd">        Args:</span>
<span class="sd">            state (AgentState): The agent state containing the context to trim.</span>

<span class="sd">        Returns:</span>
<span class="sd">            S: The updated agent state with trimmed context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">context</span>
        <span class="n">trimmed_messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trim</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">trimmed_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">state</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">trimmed_messages</span>
        <span class="k">return</span> <span class="n">state</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">atrim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Asynchronous version of trim_context.</span>

<span class="sd">        If `remove_tool_msgs` is True, also removes:</span>
<span class="sd">        - AI messages that contain tool calls (intermediate tool-calling messages)</span>
<span class="sd">        - Tool result messages (role=&quot;tool&quot;)</span>

<span class="sd">        Args:</span>
<span class="sd">            state (AgentState): The agent state containing the context to trim.</span>

<span class="sd">        Returns:</span>
<span class="sd">            S: The updated agent state with trimmed context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">context</span>
        <span class="n">trimmed_messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trim</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">trimmed_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">state</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">trimmed_messages</span>
        <span class="k">return</span> <span class="n">state</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.message_context_manager.MessageContextManager-attributes">Attributes<a href="#agentflow.state.message_context_manager.MessageContextManager-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_context_manager.MessageContextManager.max_messages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">max_messages</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_context_manager.MessageContextManager.max_messages" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">max_messages</span> <span class="o">=</span> <span class="n">max_messages</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.message_context_manager.MessageContextManager.remove_tool_msgs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">remove_tool_msgs</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.message_context_manager.MessageContextManager.remove_tool_msgs" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">remove_tool_msgs</span> <span class="o">=</span> <span class="n">remove_tool_msgs</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>


<h6 id="agentflow.state.message_context_manager.MessageContextManager-functions">Functions<a href="#agentflow.state.message_context_manager.MessageContextManager-functions" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.message_context_manager.MessageContextManager.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">__init__</span>


<a href="#agentflow.state.message_context_manager.MessageContextManager.__init__" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__init__</span><span class="p">(</span><span class="n">max_messages</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">remove_tool_msgs</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the MessageContextManager.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message_context_manager.MessageContextManager.__init__(max_messages)" class="doc doc-heading doc-heading-parameter">                  <code>max_messages</code>
<a href="#agentflow.state.message_context_manager.MessageContextManager.__init__(max_messages)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum number of
user messages to keep in context. Default is 10.</p>
              </div>
            </td>
            <td>
                  <code>10</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message_context_manager.MessageContextManager.__init__(remove_tool_msgs)" class="doc doc-heading doc-heading-parameter">                  <code>remove_tool_msgs</code>
<a href="#agentflow.state.message_context_manager.MessageContextManager.__init__(remove_tool_msgs)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to remove tool messages from context.
Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/message_context_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_messages</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">remove_tool_msgs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the MessageContextManager.</span>

<span class="sd">    Args:</span>
<span class="sd">        max_messages (int): Maximum number of</span>
<span class="sd">            user messages to keep in context. Default is 10.</span>
<span class="sd">        remove_tool_msgs (bool): Whether to remove tool messages from context.</span>
<span class="sd">            Default is False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_messages</span> <span class="o">=</span> <span class="n">max_messages</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_tool_msgs</span> <span class="o">=</span> <span class="n">remove_tool_msgs</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initialized MessageContextManager with max_messages=</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">max_messages</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.message_context_manager.MessageContextManager.atrim_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">atrim_context</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentflow.state.message_context_manager.MessageContextManager.atrim_context" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">atrim_context</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Asynchronous version of trim_context.</p>
<p>If <code>remove_tool_msgs</code> is True, also removes:
- AI messages that contain tool calls (intermediate tool-calling messages)
- Tool result messages (role="tool")</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message_context_manager.MessageContextManager.atrim_context(state)" class="doc doc-heading doc-heading-parameter">                  <code>state</code>
<a href="#agentflow.state.message_context_manager.MessageContextManager.atrim_context(state)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            AgentState (agentflow.state.agent_state.AgentState)" href="../#agentflow.state.agent_state.AgentState">AgentState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The agent state containing the context to trim.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>S</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            S


  
      module-attribute
   (agentflow.state.message_context_manager.S)" href="../#agentflow.state.message_context_manager.S">S</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated agent state with trimmed context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/message_context_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">atrim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronous version of trim_context.</span>

<span class="sd">    If `remove_tool_msgs` is True, also removes:</span>
<span class="sd">    - AI messages that contain tool calls (intermediate tool-calling messages)</span>
<span class="sd">    - Tool result messages (role=&quot;tool&quot;)</span>

<span class="sd">    Args:</span>
<span class="sd">        state (AgentState): The agent state containing the context to trim.</span>

<span class="sd">    Returns:</span>
<span class="sd">        S: The updated agent state with trimmed context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">context</span>
    <span class="n">trimmed_messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trim</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trimmed_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">state</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">trimmed_messages</span>
    <span class="k">return</span> <span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="agentflow.state.message_context_manager.MessageContextManager.trim_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">trim_context</span>


<a href="#agentflow.state.message_context_manager.MessageContextManager.trim_context" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">trim_context</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Trim the context in the given AgentState based on the maximum number of user messages.</p>
<p>The first message (typically a system prompt) is always preserved. Only the most recent
user messages up to <code>max_messages</code> are kept, along with the first message.</p>
<p>If <code>remove_tool_msgs</code> is True, also removes:
- AI messages that contain tool calls (intermediate tool-calling messages)
- Tool result messages (role="tool")</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h8 id="agentflow.state.message_context_manager.MessageContextManager.trim_context(state)" class="doc doc-heading doc-heading-parameter">                  <code>state</code>
<a href="#agentflow.state.message_context_manager.MessageContextManager.trim_context(state)" class="headerlink" title="Permanent link">&para;</a></h8>            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            AgentState (agentflow.state.agent_state.AgentState)" href="../#agentflow.state.agent_state.AgentState">AgentState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The agent state containing the context to trim.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>S</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            S


  
      module-attribute
   (agentflow.state.message_context_manager.S)" href="../#agentflow.state.message_context_manager.S">S</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated agent state with trimmed context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>agentflow/state/message_context_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">trim_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Trim the context in the given AgentState based on the maximum number of user messages.</span>

<span class="sd">    The first message (typically a system prompt) is always preserved. Only the most recent</span>
<span class="sd">    user messages up to `max_messages` are kept, along with the first message.</span>

<span class="sd">    If `remove_tool_msgs` is True, also removes:</span>
<span class="sd">    - AI messages that contain tool calls (intermediate tool-calling messages)</span>
<span class="sd">    - Tool result messages (role=&quot;tool&quot;)</span>

<span class="sd">    Args:</span>
<span class="sd">        state (AgentState): The agent state containing the context to trim.</span>

<span class="sd">    Returns:</span>
<span class="sd">        S: The updated agent state with trimmed context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">context</span>
    <span class="n">trimmed_messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trim</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trimmed_messages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">state</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">trimmed_messages</span>
    <span class="k">return</span> <span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h4 id="agentflow.state.message_context_manager-functions">Functions<a href="#agentflow.state.message_context_manager-functions" class="headerlink" title="Permanent link">&para;</a></h4>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="agentflow.state.reducers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">reducers</span>


<a href="#agentflow.state.reducers" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

        <p>Reducer utilities for merging and replacing lists and values in agent state.</p>
<p>This module provides generic and message-specific reducers for combining lists,
replacing values, and appending items while avoiding duplicates.</p>


<p><span class="doc-section-title">Functions:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            add_messages (agentflow.state.reducers.add_messages)" href="../#agentflow.state.reducers.add_messages">add_messages</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Adds messages to a list, avoiding duplicates by message_id.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            replace_messages (agentflow.state.reducers.replace_messages)" href="../#agentflow.state.reducers.replace_messages">replace_messages</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Replaces the entire message list.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            append_items (agentflow.state.reducers.append_items)" href="../#agentflow.state.reducers.append_items">append_items</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Appends items to a list, avoiding duplicates by id.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            replace_value (agentflow.state.reducers.replace_value)" href="../#agentflow.state.reducers.replace_value">replace_value</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Replaces a value with another.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>















  <div class="doc doc-children">







<h4 id="agentflow.state.reducers-classes">Classes<a href="#agentflow.state.reducers-classes" class="headerlink" title="Permanent link">&para;</a></h4>
<h4 id="agentflow.state.reducers-functions">Functions<a href="#agentflow.state.reducers-functions" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.reducers.add_messages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">add_messages</span>


<a href="#agentflow.state.reducers.add_messages" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_messages</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Adds messages to the list, avoiding duplicates by message_id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.reducers.add_messages(left)" class="doc doc-heading doc-heading-parameter">                  <code>left</code>
<a href="#agentflow.state.reducers.add_messages(left)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing list of messages.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.reducers.add_messages(right)" class="doc doc-heading doc-heading-parameter">                  <code>right</code>
<a href="#agentflow.state.reducers.add_messages(right)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New messages to add.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Message]: Combined list with unique messages.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>add_messages([msg1], [msg2, msg1])
[msg1, msg2]</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/reducers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_messages</span><span class="p">(</span><span class="n">left</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">],</span> <span class="n">right</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds messages to the list, avoiding duplicates by message_id.</span>

<span class="sd">    Args:</span>
<span class="sd">        left (list[Message]): Existing list of messages.</span>
<span class="sd">        right (list[Message]): New messages to add.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Message]: Combined list with unique messages.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; add_messages([msg1], [msg2, msg1])</span>
<span class="sd">        [msg1, msg2]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">left_ids</span> <span class="o">=</span> <span class="p">{</span><span class="n">msg</span><span class="o">.</span><span class="n">message_id</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">left</span><span class="p">}</span>
    <span class="n">right</span> <span class="o">=</span> <span class="p">[</span><span class="n">msg</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">right</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">message_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">left_ids</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">delta</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">left</span> <span class="o">+</span> <span class="n">right</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.reducers.append_items" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">append_items</span>


<a href="#agentflow.state.reducers.append_items" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">append_items</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Appends items to a list, avoiding duplicates by item.id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.reducers.append_items(left)" class="doc doc-heading doc-heading-parameter">                  <code>left</code>
<a href="#agentflow.state.reducers.append_items(left)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing list of items (must have .id attribute).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.reducers.append_items(right)" class="doc doc-heading doc-heading-parameter">                  <code>right</code>
<a href="#agentflow.state.reducers.append_items(right)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New items to add.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Combined list with unique items.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>append_items([item1], [item2, item1])
[item1, item2]</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/reducers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">append_items</span><span class="p">(</span><span class="n">left</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">right</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Appends items to a list, avoiding duplicates by item.id.</span>

<span class="sd">    Args:</span>
<span class="sd">        left (list): Existing list of items (must have .id attribute).</span>
<span class="sd">        right (list): New items to add.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: Combined list with unique items.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; append_items([item1], [item2, item1])</span>
<span class="sd">        [item1, item2]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">left_ids</span> <span class="o">=</span> <span class="p">{</span><span class="n">item</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">left</span><span class="p">}</span>
    <span class="n">right</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">right</span> <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">left_ids</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">left</span> <span class="o">+</span> <span class="n">right</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.reducers.remove_tool_messages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">remove_tool_messages</span>


<a href="#agentflow.state.reducers.remove_tool_messages" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">remove_tool_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Remove COMPLETED tool interaction sequences from the message list.</p>
<p>A tool sequence is only removed if it's COMPLETE:
1. AI message with tool_calls (triggering tools)
2. One or more tool result messages (role="tool")
3. AI message WITHOUT tool_calls (final response using tool results)</p>
<p>If a sequence is incomplete (e.g., tool call made but no final AI response yet),
ALL messages are kept to maintain conversation continuity.</p>
<p>Edge cases handled:
- Incomplete sequences (AI called tool, waiting for results): Keep everything
- Partial sequences (AI called tool, got results, but no final response): Keep everything
- Multiple tool calls in one AI message: Handles correctly
- Consecutive tool sequences: Each evaluated independently</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.reducers.remove_tool_messages(messages)" class="doc doc-heading doc-heading-parameter">                  <code>messages</code>
<a href="#agentflow.state.reducers.remove_tool_messages(messages)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of messages to filter.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Message]: Filtered list with only COMPLETED tool sequences removed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>Complete sequence (will be cleaned):</p>
<blockquote>
<blockquote>
<blockquote>
<p>messages = [user_msg, ai_with_tools, tool_result, ai_final]
remove_tool_messages(messages)
[user_msg, ai_final]</p>
</blockquote>
</blockquote>
</blockquote>
<p>Incomplete sequence (will be kept):</p>
<blockquote>
<blockquote>
<blockquote>
<p>messages = [user_msg, ai_with_tools]
remove_tool_messages(messages)
[user_msg, ai_with_tools]  # Keep everything - sequence incomplete!</p>
</blockquote>
</blockquote>
</blockquote>
<p>Partial sequence (will be kept):</p>
<blockquote>
<blockquote>
<blockquote>
<p>messages = [user_msg, ai_with_tools, tool_result]
remove_tool_messages(messages)
[user_msg, ai_with_tools, tool_result]  # Keep - no final AI response!</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/reducers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_tool_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove COMPLETED tool interaction sequences from the message list.</span>

<span class="sd">    A tool sequence is only removed if it&#39;s COMPLETE:</span>
<span class="sd">    1. AI message with tool_calls (triggering tools)</span>
<span class="sd">    2. One or more tool result messages (role=&quot;tool&quot;)</span>
<span class="sd">    3. AI message WITHOUT tool_calls (final response using tool results)</span>

<span class="sd">    If a sequence is incomplete (e.g., tool call made but no final AI response yet),</span>
<span class="sd">    ALL messages are kept to maintain conversation continuity.</span>

<span class="sd">    Edge cases handled:</span>
<span class="sd">    - Incomplete sequences (AI called tool, waiting for results): Keep everything</span>
<span class="sd">    - Partial sequences (AI called tool, got results, but no final response): Keep everything</span>
<span class="sd">    - Multiple tool calls in one AI message: Handles correctly</span>
<span class="sd">    - Consecutive tool sequences: Each evaluated independently</span>

<span class="sd">    Args:</span>
<span class="sd">        messages (list[Message]): List of messages to filter.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Message]: Filtered list with only COMPLETED tool sequences removed.</span>

<span class="sd">    Example:</span>
<span class="sd">        Complete sequence (will be cleaned):</span>
<span class="sd">        &gt;&gt;&gt; messages = [user_msg, ai_with_tools, tool_result, ai_final]</span>
<span class="sd">        &gt;&gt;&gt; remove_tool_messages(messages)</span>
<span class="sd">        [user_msg, ai_final]</span>

<span class="sd">        Incomplete sequence (will be kept):</span>
<span class="sd">        &gt;&gt;&gt; messages = [user_msg, ai_with_tools]</span>
<span class="sd">        &gt;&gt;&gt; remove_tool_messages(messages)</span>
<span class="sd">        [user_msg, ai_with_tools]  # Keep everything - sequence incomplete!</span>

<span class="sd">        Partial sequence (will be kept):</span>
<span class="sd">        &gt;&gt;&gt; messages = [user_msg, ai_with_tools, tool_result]</span>
<span class="sd">        &gt;&gt;&gt; remove_tool_messages(messages)</span>
<span class="sd">        [user_msg, ai_with_tools, tool_result]  # Keep - no final AI response!</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">messages</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">messages</span>

    <span class="c1"># Step 1: Identify indices to remove by scanning for COMPLETE sequences</span>
    <span class="n">indices_to_remove</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="c1"># Look for AI message with tool calls (potential sequence start)</span>
        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;assistant&quot;</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">tools_calls</span><span class="p">:</span>
            <span class="n">sequence_start</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="c1"># Collect all following tool result messages</span>
            <span class="n">tool_result_indices</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span> <span class="ow">and</span> <span class="n">messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;tool&quot;</span><span class="p">:</span>
                <span class="n">tool_result_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="c1"># Check if there&#39;s a final AI response (without tool_calls)</span>
            <span class="n">has_final_response</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;assistant&quot;</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">tools_calls</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">has_final_response</span><span class="p">:</span>
                <span class="c1"># COMPLETE SEQUENCE FOUND!</span>
                <span class="c1"># Mark AI with tool_calls and all tool results for removal</span>
                <span class="n">indices_to_remove</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sequence_start</span><span class="p">)</span>
                <span class="n">indices_to_remove</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tool_result_indices</span><span class="p">)</span>
                <span class="c1"># Note: We keep the final AI response (index i)</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Move past the final AI response</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># INCOMPLETE SEQUENCE - keep everything</span>
                <span class="c1"># Don&#39;t add anything to indices_to_remove</span>
                <span class="c1"># i is already positioned correctly (at next message or end)</span>
                <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># Step 2: Build filtered list excluding marked indices</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">msg</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">msg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span> <span class="k">if</span> <span class="n">idx</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">indices_to_remove</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.reducers.replace_messages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">replace_messages</span>


<a href="#agentflow.state.reducers.replace_messages" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">replace_messages</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Replaces the entire message list with a new one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.reducers.replace_messages(left)" class="doc doc-heading doc-heading-parameter">                  <code>left</code>
<a href="#agentflow.state.reducers.replace_messages(left)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing list of messages (ignored).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.reducers.replace_messages(right)" class="doc doc-heading doc-heading-parameter">                  <code>right</code>
<a href="#agentflow.state.reducers.replace_messages(right)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New list of messages.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="            Message (agentflow.state.message.Message)" href="../#agentflow.state.message.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Message]: The new message list.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>replace_messages([msg1], [msg2])
[msg2]</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/reducers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">replace_messages</span><span class="p">(</span><span class="n">left</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">],</span> <span class="n">right</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces the entire message list with a new one.</span>

<span class="sd">    Args:</span>
<span class="sd">        left (list[Message]): Existing list of messages (ignored).</span>
<span class="sd">        right (list[Message]): New list of messages.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Message]: The new message list.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; replace_messages([msg1], [msg2])</span>
<span class="sd">        [msg2]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">right</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="agentflow.state.reducers.replace_value" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">replace_value</span>


<a href="#agentflow.state.reducers.replace_value" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">replace_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Replaces a value with another.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.reducers.replace_value(left)" class="doc doc-heading doc-heading-parameter">                  <code>left</code>
<a href="#agentflow.state.reducers.replace_value(left)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing value (ignored).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h6 id="agentflow.state.reducers.replace_value(right)" class="doc doc-heading doc-heading-parameter">                  <code>right</code>
<a href="#agentflow.state.reducers.replace_value(right)" class="headerlink" title="Permanent link">&para;</a></h6>            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New value to use.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>replace_value(1, 2)
2</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>agentflow/state/reducers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">replace_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a value with another.</span>

<span class="sd">    Args:</span>
<span class="sd">        left: Existing value (ignored).</span>
<span class="sd">        right: New value to use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: The new value.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; replace_value(1, 2)</span>
<span class="sd">        2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">right</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="agentflow.state.stream_chunks" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">stream_chunks</span>


<a href="#agentflow.state.stream_chunks" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

        <p>Stream chunk primitives for unified streaming data handling.</p>
<p>This module provides a unified StreamChunk class that can encapsulate different types
of streaming data (Messages, EventModels, etc.) in a type-safe manner.
This enables clean separation between conversation content and execution state while
providing a consistent interface for streaming consumers.</p>


<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            StreamChunk (agentflow.state.stream_chunks.StreamChunk)" href="../#agentflow.state.stream_chunks.StreamChunk">StreamChunk</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Unified wrapper for streaming data with type discrimination.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>















  <div class="doc doc-children">







<h4 id="agentflow.state.stream_chunks-classes">Classes<a href="#agentflow.state.stream_chunks-classes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.stream_chunks.StreamChunk" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">StreamChunk</span>


<a href="#agentflow.state.stream_chunks.StreamChunk" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Unified wrapper for different types of streaming data.</p>
<p>This class provides a single interface for handling various streaming chunk types
(messages, events, state updates, errors) with type-safe discrimination.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="agentflow.state.stream_chunks.StreamChunk.type">type</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of streaming chunk.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            data


  
      class-attribute
      instance-attribute
   (agentflow.state.stream_chunks.StreamChunk.data)" href="../#agentflow.state.stream_chunks.StreamChunk.data">data</a></code></td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The actual chunk data (Message, EventModel, dict, etc.).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            metadata


  
      class-attribute
      instance-attribute
   (agentflow.state.stream_chunks.StreamChunk.metadata)" href="../#agentflow.state.stream_chunks.StreamChunk.metadata">metadata</a></code></td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional additional metadata for the chunk.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            Config (agentflow.state.stream_chunks.StreamChunk.Config)" href="../#agentflow.state.stream_chunks.StreamChunk.Config">Config</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Pydantic configuration for EventModel.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>





              <details class="quote">
                <summary>Source code in <code>agentflow/state/stream_chunks.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StreamChunk</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Unified wrapper for different types of streaming data.</span>

<span class="sd">    This class provides a single interface for handling various streaming chunk types</span>
<span class="sd">    (messages, events, state updates, errors) with type-safe discrimination.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        type: The type of streaming chunk.</span>
<span class="sd">        data: The actual chunk data (Message, EventModel, dict, etc.).</span>
<span class="sd">        metadata: Optional additional metadata for the chunk.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">event</span><span class="p">:</span> <span class="n">StreamEvent</span> <span class="o">=</span> <span class="n">StreamEvent</span><span class="o">.</span><span class="n">MESSAGE</span>
    <span class="c1"># data holders for different chunk types</span>
    <span class="n">message</span><span class="p">:</span> <span class="n">Message</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">AgentState</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Placeholder for other chunk types</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Optional identifiers</span>
    <span class="n">thread_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Optional metadata</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">timestamp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;UNIX timestamp of when chunk was created&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Pydantic configuration for EventModel.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            use_enum_values: Output enums as strings.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.stream_chunks.StreamChunk-attributes">Attributes<a href="#agentflow.state.stream_chunks.StreamChunk-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamChunk.data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamChunk.data" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamChunk.event" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">event</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamChunk.event" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">event</span> <span class="o">=</span> <span class="n">MESSAGE</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamChunk.message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">message</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamChunk.message" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">message</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamChunk.metadata" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">metadata</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamChunk.metadata" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">metadata</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamChunk.run_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">run_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamChunk.run_id" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">run_id</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamChunk.state" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">state</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamChunk.state" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">state</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamChunk.thread_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">thread_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamChunk.thread_id" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">thread_id</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamChunk.timestamp" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">timestamp</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamChunk.timestamp" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">timestamp</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;UNIX timestamp of when chunk was created&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<h6 id="agentflow.state.stream_chunks.StreamChunk-classes">Classes<a href="#agentflow.state.stream_chunks.StreamChunk-classes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-class">



<h7 id="agentflow.state.stream_chunks.StreamChunk.Config" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Config</span>


<a href="#agentflow.state.stream_chunks.StreamChunk.Config" class="headerlink" title="Permanent link">&para;</a></h7>


    <div class="doc doc-contents ">


        <p>Pydantic configuration for EventModel.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            use_enum_values


  
      class-attribute
      instance-attribute
   (agentflow.state.stream_chunks.StreamChunk.Config.use_enum_values)" href="../#agentflow.state.stream_chunks.StreamChunk.Config.use_enum_values">use_enum_values</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Output enums as strings.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="quote">
                <summary>Source code in <code>agentflow/state/stream_chunks.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pydantic configuration for EventModel.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        use_enum_values: Output enums as strings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h8 id="agentflow.state.stream_chunks.StreamChunk.Config-attributes">Attributes<a href="#agentflow.state.stream_chunks.StreamChunk.Config-attributes" class="headerlink" title="Permanent link">&para;</a></h8>

<div class="doc doc-object doc-attribute">



<h9 id="agentflow.state.stream_chunks.StreamChunk.Config.use_enum_values" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">use_enum_values</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamChunk.Config.use_enum_values" class="headerlink" title="Permanent link">&para;</a></h9>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="agentflow.state.stream_chunks.StreamEvent" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">StreamEvent</span>


<a href="#agentflow.state.stream_chunks.StreamEvent" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>















<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            ERROR


  
      class-attribute
      instance-attribute
   (agentflow.state.stream_chunks.StreamEvent.ERROR)" href="../#agentflow.state.stream_chunks.StreamEvent.ERROR">ERROR</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            MESSAGE


  
      class-attribute
      instance-attribute
   (agentflow.state.stream_chunks.StreamEvent.MESSAGE)" href="../#agentflow.state.stream_chunks.StreamEvent.MESSAGE">MESSAGE</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            STATE


  
      class-attribute
      instance-attribute
   (agentflow.state.stream_chunks.StreamEvent.STATE)" href="../#agentflow.state.stream_chunks.StreamEvent.STATE">STATE</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            UPDATES


  
      class-attribute
      instance-attribute
   (agentflow.state.stream_chunks.StreamEvent.UPDATES)" href="../#agentflow.state.stream_chunks.StreamEvent.UPDATES">UPDATES</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>agentflow/state/stream_chunks.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StreamEvent</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">STATE</span> <span class="o">=</span> <span class="s2">&quot;state&quot;</span>
    <span class="n">MESSAGE</span> <span class="o">=</span> <span class="s2">&quot;message&quot;</span>
    <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
    <span class="n">UPDATES</span> <span class="o">=</span> <span class="s2">&quot;updates&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h6 id="agentflow.state.stream_chunks.StreamEvent-attributes">Attributes<a href="#agentflow.state.stream_chunks.StreamEvent-attributes" class="headerlink" title="Permanent link">&para;</a></h6>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamEvent.ERROR" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">ERROR</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamEvent.ERROR" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ERROR</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamEvent.MESSAGE" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">MESSAGE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamEvent.MESSAGE" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">MESSAGE</span> <span class="o">=</span> <span class="s1">&#39;message&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamEvent.STATE" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">STATE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamEvent.STATE" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">STATE</span> <span class="o">=</span> <span class="s1">&#39;state&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h7 id="agentflow.state.stream_chunks.StreamEvent.UPDATES" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">UPDATES</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#agentflow.state.stream_chunks.StreamEvent.UPDATES" class="headerlink" title="Permanent link">&para;</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">UPDATES</span> <span class="o">=</span> <span class="s1">&#39;updates&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.pagination", "navigation.goto_top", "navigation.path", "navigation.tabs", "navigation.top", "search-suggest", "search.highlight", "search.share", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>